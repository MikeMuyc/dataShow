{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/vue-ol/plugins/plot/img/delete.png","webpack:///./src/vue-ol/assets/del.png","webpack:///./src/components/ECharts.vue?2c7a","webpack:///src/components/ECharts.vue","webpack:///./src/components/ECharts.vue?75c2","webpack:///./src/components/ECharts.vue","webpack:///./src/utils/suc-plugin.ts","webpack:///./src/plugins/perfect-scrollbar/scroll.vue?acd0","webpack:///./src/App.vue?1fbf","webpack:///src/App.vue","webpack:///./src/App.vue?a7d1","webpack:///./src/App.vue","webpack:///./src/router/dataShow.ts","webpack:///./src/router/index.ts","webpack:///./src/stores/routeTabs/state.ts","webpack:///./src/stores/routeTabs/actions.ts","webpack:///./src/stores/routeTabs/mutations.ts","webpack:///./src/stores/routeTabs/index.ts","webpack:///./src/stores/index.ts","webpack:///./src/vue-ol/component/map/map.vue?0f46","webpack:///./src/vue-ol/component/map/view.vue?930c","webpack:///./src/vue-ol/util/olData.js","webpack:///./src/vue-ol/plugins/plot/gispace/Constants.js","webpack:///./src/vue-ol/util/helpers.js","webpack:///src/vue-ol/component/map/view.vue","webpack:///./src/vue-ol/component/map/view.vue?5e3d","webpack:///./src/vue-ol/component/map/view.vue","webpack:///./src/vue-ol/util/layer.js","webpack:///./src/vue-ol/util/bus.js","webpack:///src/vue-ol/component/map/map.vue","webpack:///./src/vue-ol/component/map/map.vue?76fe","webpack:///./src/vue-ol/component/map/map.vue","webpack:///./src/vue-ol/component/map/index.js","webpack:///./src/vue-ol/component/basicLayer/basicLayer.vue?a347","webpack:///src/vue-ol/component/basicLayer/basicLayer.vue","webpack:///./src/vue-ol/component/basicLayer/basicLayer.vue?e5ac","webpack:///./src/vue-ol/component/basicLayer/basicLayer.vue","webpack:///./src/vue-ol/component/basicLayer/index.js","webpack:///./src/vue-ol/component/marker/markerGroup.vue?ce26","webpack:///src/vue-ol/component/marker/markerGroup.vue","webpack:///./src/vue-ol/component/marker/markerGroup.vue?cef8","webpack:///./src/vue-ol/component/marker/markerGroup.vue","webpack:///./src/vue-ol/component/marker/marker.vue?2fa4","webpack:///./src/vue-ol/util/olMapDefaults.js","webpack:///src/vue-ol/component/marker/marker.vue","webpack:///./src/vue-ol/component/marker/marker.vue?4d9e","webpack:///./src/vue-ol/component/marker/marker.vue","webpack:///./src/vue-ol/component/marker/index.js","webpack:///./src/vue-ol/component/overlay/overlay.vue?e675","webpack:///./src/vue-ol/util/uuid.js","webpack:///src/vue-ol/component/overlay/overlay.vue","webpack:///./src/vue-ol/component/overlay/overlay.vue?207a","webpack:///./src/vue-ol/component/overlay/overlay.vue","webpack:///./src/vue-ol/component/overlay/index.js","webpack:///./src/vue-ol/component/cluster/cluster.vue?d82c","webpack:///src/vue-ol/component/cluster/cluster.vue","webpack:///./src/vue-ol/component/cluster/cluster.vue?1ea2","webpack:///./src/vue-ol/component/cluster/cluster.vue","webpack:///./src/vue-ol/component/cluster/index.js","webpack:///./src/vue-ol/component/interaction/point.vue?4494","webpack:///src/vue-ol/component/interaction/point.vue","webpack:///./src/vue-ol/component/interaction/point.vue?9160","webpack:///./src/vue-ol/component/interaction/point.vue","webpack:///./src/vue-ol/component/interaction/shape.vue?5b3c","webpack:///src/vue-ol/component/interaction/shape.vue","webpack:///./src/vue-ol/component/interaction/shape.vue?e21a","webpack:///./src/vue-ol/component/interaction/shape.vue","webpack:///./src/vue-ol/component/interaction/route.vue?113a","webpack:///src/vue-ol/component/interaction/route.vue","webpack:///./src/vue-ol/component/interaction/route.vue?db63","webpack:///./src/vue-ol/component/interaction/route.vue","webpack:///./src/vue-ol/component/interaction/measure.vue?4db3","webpack:///src/vue-ol/component/interaction/measure.vue","webpack:///./src/vue-ol/component/interaction/measure.vue?47a9","webpack:///./src/vue-ol/component/interaction/measure.vue","webpack:///./src/vue-ol/component/interaction/plot.vue?dad3","webpack:///./src/vue-ol/plugins/plot/gispace/event/EventType.js","webpack:///./src/vue-ol/plugins/plot/gispace/goog/event.js","webpack:///./src/vue-ol/plugins/plot/gispace/event/PlotDrawEvent.js","webpack:///./src/vue-ol/plugins/plot/gispace/event/PlotEditEvent.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/BaseMixin.js","webpack:///./src/vue-ol/plugins/plot/gispace/PlotTypes.js","webpack:///./src/vue-ol/plugins/plot/gispace/PlotUtils.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Arc.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Ellipse.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Curve.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/ClosedCurve.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Lune.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Sector.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/GatheringPlace.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/StraightArrow.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/FineArrow.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/AssaultDirection.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/AttackArrow.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Circle.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/DoubleArrow.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/TailedAttackArrow.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/SquadCombat.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/TailedSquadCombat.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/FreehandLine.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/FreehandPolygon.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Polygon.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Marker.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Rectangle.js","webpack:///./src/vue-ol/plugins/plot/gispace/plot/Polyline.js","webpack:///./src/vue-ol/plugins/plot/gispace/PlotFactory.js","webpack:///./src/vue-ol/plugins/plot/gispace/tool/PlotDraw.js","webpack:///./src/vue-ol/plugins/plot/gispace/util/Utils.js","webpack:///./src/vue-ol/plugins/plot/gispace/util/DomUtils.js","webpack:///./src/vue-ol/plugins/plot/gispace/tool/PlotEdit.js","webpack:///./src/vue-ol/plugins/plot/gispace/PlotCategory.js","webpack:///./src/vue-ol/plugins/plot/overlay/editOverlay.vue?7231","webpack:///./src/vue-ol/plugins/plot/components/colorpicker.vue?0b03","webpack:///src/vue-ol/plugins/plot/components/colorpicker.vue","webpack:///./src/vue-ol/plugins/plot/components/colorpicker.vue?a28f","webpack:///./src/vue-ol/plugins/plot/components/colorpicker.vue","webpack:///./src/vue-ol/plugins/plot/components/slider.vue?bd06","webpack:///src/vue-ol/plugins/plot/components/slider.vue","webpack:///./src/vue-ol/plugins/plot/components/slider.vue?cb50","webpack:///./src/vue-ol/plugins/plot/components/slider.vue","webpack:///src/vue-ol/plugins/plot/overlay/editOverlay.vue","webpack:///./src/vue-ol/plugins/plot/overlay/editOverlay.vue?7145","webpack:///./src/vue-ol/plugins/plot/overlay/editOverlay.vue","webpack:///src/vue-ol/component/interaction/plot.vue","webpack:///./src/vue-ol/component/interaction/plot.vue?38f5","webpack:///./src/vue-ol/component/interaction/plot.vue","webpack:///./src/vue-ol/component/interaction/index.js","webpack:///./src/vue-ol/component/flash/ripples.vue?0fbd","webpack:///src/vue-ol/component/flash/ripples.vue","webpack:///./src/vue-ol/component/flash/ripples.vue?7a53","webpack:///./src/vue-ol/component/flash/ripples.vue","webpack:///./src/vue-ol/component/flash/twinkle.vue?3132","webpack:///src/vue-ol/component/flash/twinkle.vue","webpack:///./src/vue-ol/component/flash/twinkle.vue?257f","webpack:///./src/vue-ol/component/flash/twinkle.vue","webpack:///./src/vue-ol/component/flash/track.vue?45b5","webpack:///src/vue-ol/component/flash/track.vue","webpack:///./src/vue-ol/component/flash/track.vue?8cde","webpack:///./src/vue-ol/component/flash/track.vue","webpack:///./src/vue-ol/component/flash/migrate.vue?13d8","webpack:///src/vue-ol/component/flash/migrate.vue","webpack:///./src/vue-ol/component/flash/migrate.vue?c72e","webpack:///./src/vue-ol/component/flash/migrate.vue","webpack:///./src/vue-ol/component/flash/radar.vue?a0d5","webpack:///src/vue-ol/component/flash/radar.vue","webpack:///./src/vue-ol/component/flash/radar.vue?f2ca","webpack:///./src/vue-ol/component/flash/radar.vue","webpack:///./src/vue-ol/component/flash/index.js","webpack:///./src/vue-ol/component/vector/path.vue?92e4","webpack:///src/vue-ol/component/vector/path.vue","webpack:///./src/vue-ol/component/vector/path.vue?add3","webpack:///./src/vue-ol/component/vector/path.vue","webpack:///./src/vue-ol/component/vector/multiPath.vue?afdb","webpack:///src/vue-ol/component/vector/multiPath.vue","webpack:///./src/vue-ol/component/vector/multiPath.vue?8d8c","webpack:///./src/vue-ol/component/vector/multiPath.vue","webpack:///./src/vue-ol/component/vector/pointCollection.vue?2b9a","webpack:///src/vue-ol/component/vector/pointCollection.vue","webpack:///./src/vue-ol/component/vector/pointCollection.vue?4467","webpack:///./src/vue-ol/component/vector/pointCollection.vue","webpack:///./src/vue-ol/component/vector/heatMap.vue?fb9b","webpack:///src/vue-ol/component/vector/heatMap.vue","webpack:///./src/vue-ol/component/vector/heatMap.vue?4a29","webpack:///./src/vue-ol/component/vector/heatMap.vue","webpack:///./src/vue-ol/component/vector/nearby.vue?a3d4","webpack:///src/vue-ol/component/vector/nearby.vue","webpack:///./src/vue-ol/component/vector/nearby.vue?5a44","webpack:///./src/vue-ol/component/vector/nearby.vue","webpack:///./src/vue-ol/component/vector/index.js","webpack:///./src/vue-ol/index.js","webpack:///./src/plugins/perfect-scrollbar/scroll.vue?2c9e","webpack:///src/plugins/perfect-scrollbar/scroll.vue","webpack:///./src/plugins/perfect-scrollbar/scroll.vue?b674","webpack:///./src/plugins/perfect-scrollbar/scroll.vue","webpack:///./src/plugins/perfect-scrollbar/index.js","webpack:///./src/main.ts","webpack:///./src/vue-ol/component/interaction/plot.vue?4010","webpack:///./src/components/ECharts.vue?9abe","webpack:///./src/vue-ol/plugins/plot/overlay/editOverlay.vue?996b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","component","utils","dateFormat","timeStamp","date","Date","setTime","y","getFullYear","getMonth","getDate","h","getHours","minute","getMinutes","second","getSeconds","dateToTimestamp","str","substring","replace","getTime","changeSize","fileSize","size","parseInt","toFixed","getBlobUrl","file","url","URL","createObjectURL","deepCopy","obj","JSON","parse","stringify","isntNull","Array","isArray","flag","content","eval","objName","showClose","phoneLimit","phone","reg","test","idCardLimit","id","intLimit","Math","floor","floatLimit","Number","getEchartData","arr","newArr","forEach","item","count","getEchartxAxis","numberGrow","varName","num","time","timer","step","fn","setInterval","clearInterval","Map","common","assign","mapConfig","coords","projection","map","view","center","coord","parseFloat","zoom","setCenter","setZoom","install","Vue","options","$utils","$getMapConfig","$imgBaseUrl","$baseVideoSrc","directive","el","binding","documentHandler","contains","expression","_vueClickOutside_","addEventListener","unbind","removeEventListener","path","use","routes","redirect","children","dataShow","state","routeModuleList","routeModule","tabList","activeTabName","partB","Asize","toRouteName","setLoginUser","context","commit","removeAllRouterTab","openTabs","bool","routeName","temp","index","concat","BToA","tempb","tempa","setRouteModule","closeTab","windex","clearAllTabs","setTabSize","routeTabs","namespaced","actions","mutations","Store","userInfo","getUserInfo","staticStyle","attrs","_t","_v","_s","handleCenter","maps","setResolvedDefer","mapId","obtainEffectiveMapId","resolvedDefer","getUnresolvedDefer","defer","isDefined","getDefer","mapNum","keys","olData","setMap","olMap","getMap","resetMap","Constants","TWO_PI","PI","HALF_PI","FITTING_COUNT","ZERO_TOLERANCE","x","isDefinedAndNotNull","isFunction","isObjectLike","isEqual","other","valueProps","otherProps","checked","traverse","valueProp","includes","otherProp","deepClone","objClone","exportMap","canvas","navigator","msSaveBlob","msToBlob","toBlob","blob","saveAs","validCoords","longitude","latitude","lon","lat","lonRe","RegExp","latRe","fmt","dateList","getMilliseconds","k","$1","substr","stringToStamp","dateStr","separator1","separator2","dateArr","split","month","arr1","year","indexOf","day","arr2","hour","min","sec","colorRgb","color","join","sColor","toLowerCase","sColorNew","sColorChange","coordinateTransform","coordinate1","coordinate2","transformProjection","extentTransform","extent","transformExtent","getLonLatFromPixelDis","LonLat","pixel","ps","getPixelFromCoordinate","fromLonLat","ps2","getCoordinateFromPixel","createVectorLayer","layer","VectorLayer","source","VectorSource","zIndex","arguments","set","styleMap","Style","Fill","Stroke","CircleStyle","Icon","ImageStyle","RegularShape","Text","AtlasManager","optionalFactory","style","Constructor","createStyle","recursiveStyle","styleName","styleObject","Function","toString","styleConstructor","val","idx","array","valConstructor","assert","getArcPoints","radius","startAngle","endAngle","pnts","angleDiff","COUNT","angle","cos","sin","calcRadius","radiusMeter","perDegree","getGeodesicDistance","createFeature","viewProjection","geometry","Polygon","MultiPolygon","LineString","MultiLineString","Point","MultiPoint","Circle","transform","feature","Feature","len","setStyle","getControlClasses","attribution","Attribution","fullscreen","FullScreen","mouseposition","MousePosition","overviewmap","OverviewMap","rotate","Rotate","scaleline","ScaleLine","Zoom","zoomslider","ZoomSlider","zoomtoextent","ZoomToExtent","detectControls","controls","actualControls","controlClasses","control","createOverlay","element","pos","stopEvent","ov","Overlay","positioning","insertFirst","setPosition","removeOverlay","layArr","getOverlays","getLength","getId","removeAt","clear","setLabelEvent","getView","getProjection","getCode","label","layEle","className","classNm","innerHTML","addOverlay","point1","point2","sqrt","point11","point21","Sphere","normalize","kernels","none","gray","sepia","kernel","normal","grayfilter","g","b","grayFilterColorBar","grayFilterPerBar","minPer","minColor","maxPer","maxColor","convolve","width","height","inputData","getImageData","output","createImageData","outputData","a","filtercolor","putImageData","throttle","interval","canRun","debounce","layerMethods","detectLayerType","createAttribution","attributions","unshift","html","createXYZSource","tileUrlFunction","tileGrid","GRID","tileSize","minZoom","origin","origins","resolutions","sizes","tileSizes","TileGrid","xyzOps","maxZoom","tileLoadFunction","crossOrigin","XYZ","createImageStatic","imageExtent","Projection","units","ImageStatic","imageSize","imageLoadFunction","createTileArcGISRest","oSource","params","TileArcGISRest","createImageArcGISRest","ImageArcGISRest","ratio","handleJsonFeatures","features","moveStyle","clickStyle","createObjJson","onLayerCreatedFn","jsonFormat","EsriJSON","GeoJSON","dataProjection","strategy","loadingstrategy","projectionToUse","getProj","readFeatures","featureProjection","addFeatures","jsonp","callback","cbName","round","random","queryString","ele","scripts","body","createUrlJson","vm","successCallback","response","alert","details","local","xhr","XMLHttpRequest","open","send","responseText","createJson","createGeoJSON","createEsriJSON","createImageWMS","ImageWMS","createTileWMS","urls","wmsConfiguration","serverType","TileWMS","createBdTileImage","baiduMercator","applyTransform","projzh","addProjection","addCoordinateTransforms","bmercResolutions","pow","sub","tileCoord","z","hash","intranet","createWmts","projection2","projectionExtent","getExtent","getWidth","zoomRange","matrixIds","wmtsConfiguration","matrixSet","format","requestEncoding","WMTSTileGrid","getTopLeft","wrapX","WMTS","createTileVector","ops","OlFormat","VectorTile","createSource","extractStyles","KML","warn","createLayer","oLayer","clustering","Cluster","distance","clusteringDistance","layerConfig","opacity","visible","minResolution","maxResolution","updateWhileAnimating","updateWhileInteracting","blur","declutter","ImageLayer","TileLayer","HeatmapLayer","VectorTileLayer","customAttributes","plugin","installed","View","selectFeature","moveFeature","basicLayer","selectPoint","base64icon","defaults","rotation","autodiscover","bounds","centerUrlHash","styles","fill","stroke","marker","image","anchor","anchorXUnits","anchorYUnits","events","markers","layers","interactions","mouseWheelZoom","renderer","olMapDefaults","getDefaults","markerGroup","position","offset","uuid","hexDigits","overlay","_l","on","$event","locateFeature","points","cluster","delObj","noEdit","_e","selectedFeature","layPosition","layOffset","category","refreshStroke","refreshLine","refreshWidth","refreshFill","deleteFeature","EventType","MOUSEMOVE","MOUSEUP","MOUSEDOWN","GoogEvent","opt_target","currentTarget","propagationStopped_","defaultPrevented","returnValue_","stopPropagation","preventDefault","PlotDrawEvent","DRAW_START","DRAW_END","PlotEditEvent","EDIT_START","EDIT_MOVE","EDIT_END","BaseMixin","Sup","setPoints","generate","point","updatePoint","PlotTypes","ARC","ELLIPSE","CURVE","CLOSED_CURVE","LUNE","SECTOR","GATHERING_PLACE","STRAIGHT_ARROW","ASSAULT_DIRECTION","ATTACK_ARROW","TAILED_ATTACK_ARROW","SQUAD_COMBAT","TAILED_SQUAD_COMBAT","FINE_ARROW","CIRCLE","DOUBLE_ARROW","POLYLINE","FREEHAND_LINE","POLYGON","FREEHAND_POLYGON","RECTANGLE","MARKER","TRIANGLE","PlotUtils","pnt1","pnt2","wholeDistance","pnt3","pntA","pntB","pntC","pntD","getIntersectPoint","f","startPnt","endPnt","azimuth","asin","abs","getAzimuth","cPnt1","cPnt2","max","tp","t2","t3","tp2","tp3","clockWise","alpha","dx","dy","dt","bisectorNormalRight","bisectorNormalLeft","getNormal","dist","uX","uY","d1","d2","isClockWise","dX1","dY1","dX2","dY2","controlPoints","normalPoints","leftControl","getLeftMostControlPoint","normals","getBisectorNormals","rightControl","getRightMostControlPoint","pnt","getCubicValue","controlX","controlY","normalRight","mid","pX","pY","nX","nY","a11","a12","a22","dX","dY","normalLeft","bezierPoints","factor","getBinomialFactor","getFactorial","bSplinePoints","getQuadricBSplineFactor","Arc","fixPointCount","getPointCount","setCoordinates","getCircleCenterOfThreePoints","angle1","angle2","Ellipse","majorRadius","minorRadius","generatePoints","Curve","getCurvePoints","ClosedCurve","getPoints","pList","Lune","getThirdPoint","Sector","GatheringPlace","StraightArrow","maxArrowLength","arrowLengthScale","leftPnt","rightPnt","FineArrow","tailWidthFactor","neckWidthFactor","headWidthFactor","headAngle","neckAngle","getBaseLength","tailWidth","neckWidth","headWidth","tailLeft","tailRight","headLeft","headRight","neckLeft","neckRight","AssaultDirection","AttackArrow","headHeightFactor","neckHeightFactor","headTailFactor","midTail","bonePnts","headPnts","getArrowHeadPoints","bodyPnts","getArrowBodyPoints","leftPnts","rightPnts","getQBSplinePoints","reverse","headHeight","headPnt","neckHeight","headEndPnt","neckEndPnt","allLen","widthDif","tempLen","leftBodyPnts","rightBodyPnts","getAngleOfThreePoints","w","left","right","DoubleArrow","connPoint","tempPoint4","leftArrowPnts","rightArrowPnts","getTempPoint4","getArrowPoints","llBodyPnts","lArrowPnts","lrBodyPnts","rlBodyPnts","rArrowPnts","rrBodyPnts","getBezierPoints","midPnt","midPnt1","midPnt2","arrowPnts","neckLeftPoint","neckRightPoint","lPoints","rPoints","linePnt1","linePnt2","symPnt","distance1","distance2","TailedAttackArrow","swallowTailFactor","swallowTailPnt","SquadCombat","tailPnts","getTailPoints","TailedSquadCombat","FreehandLine","freehand","FreehandPolygon","PolygonOl","Marker","Rectangle","xmin","xmax","ymin","ymax","tl","tr","br","bl","Polyline","PlotFactory","Plot","PlotDraw","plot","plotType","plotParams","mapViewport","dblClickZoomInteraction","clickListener","dblclickListener","moveCallback","mapMouseMoveHandler","featureSource","drawOverlay","deactivate","deactivateMapTools","mapFirstClickHandler","addLayer","disconnectEventHandlers","removeLayer","activateMapTools","getViewport","coordinate","createPlot","getGeometry","addFeature","unByKey","mapNextClickHandler","mapDoubleClickHandler","Event","offsetX","offsetY","finishDrawing","drawEnd","removeFeature","dispatchEvent","getInteractions","DoubleClickZoom","remove","Observable","Utils","_stampId","trim","DomUtils","tagName","parent","display","getElementById","hasClass","stamp","self","eventKey","getDomEventKey","handler","attachEvent","detachEvent","PlotEdit","activePlot","startPoint","ghostControlPoints","mouseOver","elementTable","activeControlPointId","mapDragPan","HELPER_HIDDEN_DIV","HELPER_CONTROL_POINT_DIV","pointermoveListener","pointerdownListener","pointerupListener","pointerdragListener","mousemoveCallback","controlPointMouseMoveHandler","mouseupCallback","controlPointMouseUpHandler","getMapParentElement","hiddenDiv","createHidden","cPnts","getControlPoints","mapElement","getTargetElement","removeListener","controlPointMouseDownHandler","controlPointMouseMoveHandler2","addListener","stopImmediatePropagation","getOverlayById","geom","isPlot","plotMouseOverOutHandler","initHelperDom","initControlPoints","forEachFeatureAtPixel","cursor","plotMouseDownHandler","disableMapDragPan","plotMouseUpHandler","plotMouseMoveHandler","newPoints","setPositioning","enableMapDragPan","destroyHelperDom","DragPan","setActive","PlotCategory","line","face","arrow","directives","rawName","class","plotOl","_m","changeFill","model","colorData","$$v","$set","changeStroke","styleOpen","changeWidth","active","lineStyle","changeLine","del","recommend","$emit","newValue","showInput","showStops","shape","route","measure","flash","twinkle","track","migrate","radar","editDis","edit","domProps","composing","initialRadius","Path","MulPath","PointCollection","HeatMap","NearBy","BasicLayer","Interaction","Flash","Vector","$mapUtils","helpers","$props","tagname","update","scrollHanle","scrollBar","props","settings","default","swicher","Boolean","String","isBodyScroll","methods","evt","$el","__init","_ps_inited","__uninit","destroy","watch","$route","scrollTop","mounted","updated","$nextTick","activated","deactivated","beforeDestroy","VuePerfectScrollbar","config","productionTip","$Modal","router","beforeEach","to","from","next","start","afterEach","finish","store","App","$mount"],"mappings":"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","file":"js/app.7e908f2e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"echarts\":\"echarts\"}[chunkId]||chunkId) + \".\" + {\"chunk-734bdb52\":\"87771e5d\",\"chunk-427cbb9e\":\"a940fdc8\",\"chunk-9b9461b2\":\"aa6c26ff\",\"chunk-673d1dfb\":\"d13f785b\",\"chunk-2d0b924f\":\"cb6098e3\",\"chunk-0517fa9b\":\"dea483e4\",\"chunk-3aa72fdf\":\"295af18e\",\"chunk-10a64a58\":\"9ada0307\",\"chunk-2de0a28a\":\"f6af67ea\",\"chunk-3378d534\":\"ea1ade01\",\"chunk-e4c2d952\":\"9b08c2e4\",\"chunk-8d391c9c\":\"0231e6a9\",\"chunk-001f3007\":\"e0e16233\",\"chunk-63fe99a2\":\"79efb1b4\",\"chunk-720fe7aa\":\"71f87bd3\",\"chunk-c7634e9e\":\"6ab92a24\",\"chunk-350c38c2\":\"a3e68575\",\"chunk-d503db16\":\"feac7340\",\"chunk-f9309eb2\":\"87c9f396\",\"chunk-60dbb3da\":\"91d97d1d\",\"echarts\":\"9a474437\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-427cbb9e\":1,\"chunk-673d1dfb\":1,\"chunk-0517fa9b\":1,\"chunk-3aa72fdf\":1,\"chunk-10a64a58\":1,\"chunk-2de0a28a\":1,\"chunk-3378d534\":1,\"chunk-e4c2d952\":1,\"chunk-8d391c9c\":1,\"chunk-001f3007\":1,\"chunk-63fe99a2\":1,\"chunk-c7634e9e\":1,\"chunk-350c38c2\":1,\"chunk-d503db16\":1,\"chunk-f9309eb2\":1,\"chunk-60dbb3da\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"echarts\":\"echarts\"}[chunkId]||chunkId) + \".\" + {\"chunk-734bdb52\":\"31d6cfe0\",\"chunk-427cbb9e\":\"bb142968\",\"chunk-9b9461b2\":\"31d6cfe0\",\"chunk-673d1dfb\":\"beafcc99\",\"chunk-2d0b924f\":\"31d6cfe0\",\"chunk-0517fa9b\":\"8a371259\",\"chunk-3aa72fdf\":\"66270fe5\",\"chunk-10a64a58\":\"8073c1d3\",\"chunk-2de0a28a\":\"7d299f5d\",\"chunk-3378d534\":\"d9cb75ac\",\"chunk-e4c2d952\":\"d073ab71\",\"chunk-8d391c9c\":\"ba9ae76f\",\"chunk-001f3007\":\"5f3a27d1\",\"chunk-63fe99a2\":\"faade404\",\"chunk-720fe7aa\":\"31d6cfe0\",\"chunk-c7634e9e\":\"d29f992f\",\"chunk-350c38c2\":\"bb16172f\",\"chunk-d503db16\":\"af419d73\",\"chunk-f9309eb2\":\"89e2869a\",\"chunk-60dbb3da\":\"5b70b2c6\",\"echarts\":\"31d6cfe0\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"dll\",\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAA7ElEQVQ4T2NkoDJgpLJ5DKMGQkL0voCAwE9ejvVM//4Wqj19fQE5nG9Jixr8Y2LuZ//8I1Dxw4cP6HGANQxvyEocYGRksGdg+P+B8e8/R5ihIMP+MzPtZ2BgFPj/n+GgxuMXDkQZCNV4gIGBkR9mKEgjzDAGhv8fGf/+c0B3PUgNzlhGNxTiEkYBfIbhNRAkiWoo2I04XQbzOt50iBxmEA2oYYotUxDyMjgCQC6DehkeptjCD6eXUV0G8SY0UlAiiuhIQUo2KGGGHKYkJRtowt7A9O9vAY6EPYH9848AohM2JSXQaGlDSehB9AIATs+OFVtUYhIAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAtUlEQVQoU8XRMWoCURDG8d/0VqlNLiCk0S4E7IRU23sJK8HOxsYreIEE0gXSWKVOBPEM1iJiY/VkZReWZTet07z5Zt6f+d68UIvEAJ1K+SdIpY48SeTnC7oYY1Nc6OMDe/wF5xJ4Qw+/9YmFfsU2+CqBR7xj3QIMkQXHG1DYWgbTxBNOFc/HxK2X15qAJb4LYB4M7w8sKo+fBNm/lpq21Aas8IlLAzQKZvUtPeC55R92wSHvXQGCCj8NTxyoAAAAAABJRU5ErkJggg==\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"echarts\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"echarts\"></div>\r\n</template>\r\n\r\n<style>\r\n\t.echarts {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n</style>\r\n\r\n<script>\r\n\t// import echarts from 'echarts/lib/echarts'\r\n\timport debounce from 'lodash/debounce'\r\n\timport {addListener, removeListener} from 'resize-detector'\r\n\r\n\t// enumerating ECharts events for now\r\n\tconst EVENTS = [\r\n\t\t'legendselectchanged',\r\n\t\t'legendselected',\r\n\t\t'legendunselected',\r\n\t\t'legendunscroll',\r\n\t\t'datazoom',\r\n\t\t'datarangeselected',\r\n\t\t'timelinechanged',\r\n\t\t'timelineplaychanged',\r\n\t\t'restore',\r\n\t\t'dataviewchanged',\r\n\t\t'magictypechanged',\r\n\t\t'geoselectchanged',\r\n\t\t'geoselected',\r\n\t\t'geounselected',\r\n\t\t'pieselectchanged',\r\n\t\t'pieselected',\r\n\t\t'pieunselected',\r\n\t\t'mapselectchanged',\r\n\t\t'mapselected',\r\n\t\t'mapunselected',\r\n\t\t'axisareaselected',\r\n\t\t'focusnodeadjacency',\r\n\t\t'unfocusnodeadjacency',\r\n\t\t'brush',\r\n\t\t'brushselected',\r\n\t\t'rendered',\r\n\t\t'finished',\r\n\t\t'click',\r\n\t\t'dblclick',\r\n\t\t'mouseover',\r\n\t\t'mouseout',\r\n\t\t'mousemove',\r\n\t\t'mousedown',\r\n\t\t'mouseup',\r\n\t\t'globalout',\r\n\t\t'contextmenu'\r\n\t]\r\n\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\toptions: Object,\r\n\t\t\ttheme: [String, Object],\r\n\t\t\tinitOptions: Object,\r\n\t\t\tgroup: String,\r\n\t\t\tautoResize: Boolean,\r\n\t\t\twatchShallow: Boolean,\r\n\t\t\tmanualUpdate: Boolean\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlastArea: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tgroup(group) {\r\n\t\t\t\tthis.chart.group = group\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// provide a explicit merge option method\r\n\t\t\tmergeOptions(options, notMerge, lazyUpdate) {\r\n\t\t\t\tif (this.manualUpdate) {\r\n\t\t\t\t\tthis.manualOptions = options\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.chart) {\r\n\t\t\t\t\tthis.init()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.delegateMethod('setOption', options, notMerge, lazyUpdate)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// just delegates ECharts methods to Vue component\r\n\t\t\t// use explicit params to reduce transpiled size for now\r\n\t\t\tappendData(params) {\r\n\t\t\t\tthis.delegateMethod('appendData', params)\r\n\t\t\t},\r\n\t\t\tresize(options) {\r\n\t\t\t\tthis.delegateMethod('resize', options)\r\n\t\t\t},\r\n\t\t\tdispatchAction(payload) {\r\n\t\t\t\tthis.delegateMethod('dispatchAction', payload)\r\n\t\t\t},\r\n\t\t\tconvertToPixel(finder, value) {\r\n\t\t\t\treturn this.delegateMethod('convertToPixel', finder, value)\r\n\t\t\t},\r\n\t\t\tconvertFromPixel(finder, value) {\r\n\t\t\t\treturn this.delegateMethod('convertFromPixel', finder, value)\r\n\t\t\t},\r\n\t\t\tcontainPixel(finder, value) {\r\n\t\t\t\treturn this.delegateMethod('containPixel', finder, value)\r\n\t\t\t},\r\n\t\t\tshowLoading(type, options) {\r\n\t\t\t\tthis.delegateMethod('showLoading', type, options)\r\n\t\t\t},\r\n\t\t\thideLoading() {\r\n\t\t\t\tthis.delegateMethod('hideLoading')\r\n\t\t\t},\r\n\t\t\tgetDataURL(options) {\r\n\t\t\t\treturn this.delegateMethod('getDataURL', options)\r\n\t\t\t},\r\n\t\t\tgetConnectedDataURL(options) {\r\n\t\t\t\treturn this.delegateMethod('getConnectedDataURL', options)\r\n\t\t\t},\r\n\t\t\tclear() {\r\n\t\t\t\tthis.delegateMethod('clear')\r\n\t\t\t},\r\n\t\t\tdispose() {\r\n\t\t\t\tthis.delegateMethod('dispose')\r\n\t\t\t},\r\n\t\t\tdelegateMethod(name, ...args) {\r\n\t\t\t\tif (!this.chart) {\r\n\t\t\t\t\tthis.init()\r\n\t\t\t\t}\r\n\t\t\t\treturn this.chart[name](...args)\r\n\t\t\t},\r\n\t\t\tdelegateGet(name, method) {\r\n\t\t\t\tif (!this.chart) {\r\n\t\t\t\t\tthis.init()\r\n\t\t\t\t}\r\n\t\t\t\treturn this.chart[method]()\r\n\t\t\t},\r\n\t\t\tgetArea() {\r\n\t\t\t\treturn this.$el.offsetWidth * this.$el.offsetHeight\r\n\t\t\t},\r\n\t\t\techarts() {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tif (this.chart) {\r\n\t\t\t\t\t\tresolve(this.chart)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\timport(\r\n\t\t\t\t\t\t\t/* webpackChunkName: \"echarts\" */\r\n\t\t\t\t\t\t\t/* webpackMode: \"lazy\" */\r\n\t\t\t\t\t\t\t\"echarts\")\r\n\t\t\t\t\t\t\t.then((echarts) => {\r\n\t\t\t\t\t\t\t\tresolve(echarts.init(this.$el, this.theme, this.initOptions))\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\t\t\treject(e)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync init() {\r\n\t\t\t\tif (this.chart) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// let chart = echarts.init(this.$el, this.theme, this.initOptions)\r\n\t\t\t\tlet chart = await this.echarts();\r\n\r\n\t\t\t\tif (this.group) {\r\n\t\t\t\t\tchart.group = this.group\r\n\t\t\t\t}\r\n\r\n\t\t\t\tchart.setOption(this.manualOptions || this.options || {}, true)\r\n\r\n\t\t\t\t// expose ECharts events as custom events\r\n\t\t\t\tEVENTS.forEach(event => {\r\n\t\t\t\t\tchart.on(event, params => {\r\n\t\t\t\t\t\tthis.$emit(event, params)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (this.autoResize) {\r\n\t\t\t\t\tthis.lastArea = this.getArea()\r\n\t\t\t\t\tthis.__resizeHandler = debounce(() => {\r\n\t\t\t\t\t\tif (this.lastArea === 0) {\r\n\t\t\t\t\t\t\t// emulate initial render for initially hidden charts\r\n\t\t\t\t\t\t\tthis.mergeOptions({}, true)\r\n\t\t\t\t\t\t\tthis.resize()\r\n\t\t\t\t\t\t\tthis.mergeOptions(this.options || this.manualOptions || {}, true)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.resize()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.lastArea = this.getArea()\r\n\t\t\t\t\t}, 100, {leading: true})\r\n\t\t\t\t\taddListener(this.$el, this.__resizeHandler)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tObject.defineProperties(this, {\r\n\t\t\t\t\t// Only recalculated when accessed from JavaScript.\r\n\t\t\t\t\t// Won't update DOM on value change because getters\r\n\t\t\t\t\t// don't depend on reactive values\r\n\t\t\t\t\twidth: {\r\n\t\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\t\tget: () => {\r\n\t\t\t\t\t\t\treturn this.delegateGet('width', 'getWidth')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\theight: {\r\n\t\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\t\tget: () => {\r\n\t\t\t\t\t\t\treturn this.delegateGet('height', 'getHeight')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tisDisposed: {\r\n\t\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\t\tget: () => {\r\n\t\t\t\t\t\t\treturn !!this.delegateGet('isDisposed', 'isDisposed')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomputedOptions: {\r\n\t\t\t\t\t\tconfigurable: true,\r\n\t\t\t\t\t\tget: () => {\r\n\t\t\t\t\t\t\treturn this.delegateGet('computedOptions', 'getOption')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.chart = chart\r\n\t\t\t},\r\n\t\t\tdestroy() {\r\n\t\t\t\tif (this.autoResize) {\r\n\t\t\t\t\tremoveListener(this.$el, this.__resizeHandler)\r\n\t\t\t\t}\r\n\t\t\t\tthis.dispose()\r\n\t\t\t\tthis.chart = null\r\n\t\t\t},\r\n\t\t\trefresh() {\r\n\t\t\t\tif (this.chart) {\r\n\t\t\t\t\tthis.destroy()\r\n\t\t\t\t\tthis.init()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif (!this.manualUpdate) {\r\n\t\t\t\tthis.$watch('options', (val, oldVal) => {\r\n\t\t\t\t\tif (!this.chart && val) {\r\n\t\t\t\t\t\tthis.init()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// mutating `options` will lead to merging\r\n\t\t\t\t\t\t// replacing it with new reference will lead to not merging\r\n\t\t\t\t\t\t// eg.\r\n\t\t\t\t\t\t// `this.options = Object.assign({}, this.options, { ... })`\r\n\t\t\t\t\t\t// will trigger `this.chart.setOption(val, true)\r\n\t\t\t\t\t\t// `this.options.title.text = 'Trends'`\r\n\t\t\t\t\t\t// will trigger `this.chart.setOption(val, false)`\r\n\t\t\t\t\t\tthis.chart.setOption(val, val !== oldVal)\r\n\t\t\t\t\t}\r\n\t\t\t\t}, {deep: !this.watchShallow})\r\n\t\t\t}\r\n\r\n\t\t\tlet watched = ['theme', 'initOptions', 'autoResize', 'manualUpdate', 'watchShallow']\r\n\t\t\twatched.forEach(prop => {\r\n\t\t\t\tthis.$watch(prop, () => {\r\n\t\t\t\t\tthis.refresh()\r\n\t\t\t\t}, {deep: true})\r\n\t\t\t})\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// auto init if `options` is already provided\r\n\t\t\tif (this.options) {\r\n\t\t\t\tthis.init()\r\n\t\t\t}\r\n\t\t},\r\n\t\tactivated() {\r\n\t\t\tif (this.autoResize) {\r\n\t\t\t\tthis.chart && this.chart.resize()\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tif (!this.chart) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.destroy()\r\n\t\t}\r\n\t}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ECharts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ECharts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ECharts.vue?vue&type=template&id=2f3aa0ee&\"\nimport script from \"./ECharts.vue?vue&type=script&lang=js&\"\nexport * from \"./ECharts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ECharts.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ECharts from '@datashow/components/ECharts.vue';\r\nimport topBar from '@datashow/components/topBar.vue';\r\nimport leftSide from '@datashow/components/leftSide.vue';\r\nimport {Message} from \"element-ui\";\r\n\r\n\r\n//通用方法集合\r\nconst utils: any = {\r\n    //时间戳转换成自定义字符串\r\n    dateFormat: (timeStamp: number, type: string): any => {\r\n        if (timeStamp) {\r\n            let date = new Date();\r\n            date.setTime(timeStamp);\r\n            let y = date.getFullYear();\r\n            let m: any = date.getMonth() + 1;\r\n            m = m < 10 ? ('0' + m) : m;\r\n            let d: any = date.getDate();\r\n            d = d < 10 ? ('0' + d) : d;\r\n            if (type === `date`) {\r\n                return y + '-' + m + '-' + d;\r\n            } else if (type === `time`) {\r\n                let h: any = date.getHours();\r\n                h = h < 10 ? ('0' + h) : h;\r\n                let minute: any = date.getMinutes();\r\n                let second: any = date.getSeconds();\r\n                minute = minute < 10 ? ('0' + minute) : minute;\r\n                second = second < 10 ? ('0' + second) : second;\r\n                return y + '-' + m + '-' + d + ' ' + h + ':' + minute + ':' + second;\r\n            } else {\r\n                return '-'\r\n            }\r\n        } else {\r\n            return '-'\r\n        }\r\n    },\r\n\r\n    dateToTimestamp: (date: string): any => {\r\n\r\n        if (date) {\r\n            if (date.length > 0) {\r\n                let str: string = date.substring(0, 19);\r\n                str.replace(/-/g, '/');\r\n                str.replace(/./g, '/');\r\n                return new Date(str).getTime();\r\n            }\r\n        } else {\r\n            return null\r\n        }\r\n    },\r\n    //文件大小转换   B=> GB/MB\r\n    changeSize: (fileSize: any): any => {\r\n        let size: number = parseInt(fileSize);\r\n        if (size) {\r\n            return size > 1024\r\n                ? size / 1024 > 1024\r\n                    ? size / (1024 * 1024) > 1024\r\n                        ? (size / (1024 * 1024 * 1024)).toFixed(2) + 'GB'\r\n                        : (size / (1024 * 1024)).toFixed(2) + 'MB'\r\n                    : (size / 1024).toFixed(2) + 'KB'\r\n                : (size).toFixed(2) + 'B'\r\n        }\r\n    },\r\n    //获取上传图片的缓存路径\r\n    getBlobUrl: (file: any): any => {\r\n        let url = null;\r\n        if (window.URL) {\r\n            url = window.URL.createObjectURL(file);\r\n        }\r\n        return url\r\n    },\r\n    //深拷贝\r\n    deepCopy: (obj: any): any => {\r\n        return JSON.parse(JSON.stringify(obj));\r\n    },\r\n    //必填项不为空的验证\r\n    isntNull: (data: any, name: any) => {\r\n        /*\r\n        * data 为数据源\r\n        * name 为数据源对应每一项的名称，例如：\r\n        * {\r\n        *       \"presonBasicInfo.name\": `姓名`,\r\n        *       \"address\": `地址`,\r\n        * }\r\n        * */\r\n        if (Array.isArray(data)) {\r\n            let flag = false;\r\n            for (let i = 0; i < data.length; i++) {\r\n                if (!content(data[i], name[i])) {\r\n                    break;\r\n                }\r\n            }\r\n            return flag\r\n        } else if (typeof data === 'object') {\r\n            let flag = true;\r\n            for (let key in name) {\r\n\r\n                if (eval(`data.${key}`) !== undefined) {\r\n                    if (!content(eval(`data.${key}`), name[key])) {\r\n                        flag = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            /* for (let key in data) {\r\n                 if (name[key]) {\r\n                     if (!content(data[key], name[key])) {\r\n                         flag = false;\r\n                         break;\r\n                     }\r\n                 }\r\n             }*/\r\n            return flag\r\n        } else if (typeof data === 'string') {\r\n            return content(data, name);\r\n        }\r\n\r\n        function content(obj, objName) {\r\n            if (obj === '' || obj === null || obj === undefined) {\r\n                Message({\r\n                    showClose: true,\r\n                    message: `请填写${objName}！`,\r\n                    type: 'warning'\r\n                })\r\n                return false\r\n            } else {\r\n                return true\r\n            }\r\n        }\r\n    },\r\n    //手机号码验证（2019）\r\n    phoneLimit(phone) {\r\n        let reg = /^1(3[0-9]|4[5,7]|5[0,1,2,3,5,6,7,8,9]|6[2,5,6,7]|7[0,1,7,8]|8[0-9]|9[1,8,9])\\d{8}$/;\r\n        return reg.test(phone);\r\n    },\r\n    //身份证校验（15/18位）\r\n    idCardLimit(id: string) {\r\n        let reg = /^[1-9]\\d{5}(18|19|([23]\\d))\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{3}[0-9Xx]$/ || /^[1-9]\\d{5}\\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\\d{2}$/\r\n        return reg.test(id);\r\n    },\r\n    //正整数限制（含0）\r\n    intLimit(value, name) {\r\n         if( Math.floor(value) >= 0){\r\n             return Math.floor(value)\r\n         }\r\n         else{\r\n             return false\r\n         }\r\n    },\r\n    //正数限制（含0）\r\n    floatLimit(value, name) {\r\n        if( Number(value) >= 0){\r\n            return Number(value)\r\n        }\r\n        else{\r\n            return false\r\n        }\r\n    },\r\n\r\n    //提取echart数据\r\n    getEchartData(arr:Array<any>){\r\n        let newArr:Array<any> = [];\r\n        arr.forEach(item =>{\r\n            newArr.push({\r\n                name:item.name,\r\n                value:item.count,\r\n            })\r\n        })\r\n        return newArr;\r\n    },\r\n    //提取echart数据\r\n    getEchartxAxis(arr:Array<any>){\r\n        let newArr:Array<any> = [];\r\n        arr.forEach(item =>{\r\n            newArr.push(item.name)\r\n        })\r\n        return newArr;\r\n    },\r\n\r\n    //数字动态增长\r\n    numberGrow(obj:any,varName:string,num:number){\r\n        const time:number = 1000;                   //动态时长1s\r\n        let timer:number = 50;                      //最小变化间隔50ms\r\n        let step:number = Math.floor(num/(time/timer) + 1);//每次增加的数值\r\n\r\n        let fn:any = setInterval(()=>{\r\n            if(obj[varName] < num - step){\r\n                obj[varName] += step;\r\n            }\r\n            else{\r\n                clearInterval(fn);\r\n                obj[varName] = num\r\n            }\r\n        },timer)\r\n\r\n\r\n    }\r\n}\r\n\r\n\r\n//地图类\r\nclass Map {\r\n    map: any;\r\n\r\n    constructor(common?: any) { //constructor是一个构造方法，用来接收参数\r\n        if (common) {\r\n            Object.assign(this, common);\r\n        } else {\r\n            Object.assign(this, utils.deepCopy((<any>window).mapConfig));\r\n        }\r\n    }\r\n\r\n    setCenter(coords: any, projection: any) {\r\n        if (coords instanceof Array) {\r\n            this.map.view.center.coord = [parseFloat(coords[0]), parseFloat(coords[1])];\r\n        }\r\n        if (projection) {\r\n            this.map.view.center.projection = projection;\r\n        }\r\n    }\r\n\r\n    setZoom(zoom: any) {\r\n        if (zoom) {\r\n            this.map.view.zoom = zoom;\r\n        }\r\n    }\r\n\r\n    setCenterZoom(coords: any, zoom: any, projection: any) {\r\n        this.setCenter(coords, projection);\r\n        this.setZoom(zoom);\r\n    }\r\n}\r\n\r\nexport default {\r\n    install: (Vue: any, options: any) => {\r\n\r\n\r\n        //echarts的vue组件\r\n        Vue.component('v-chart', ECharts);\r\n\r\n\r\n\r\n        //将方法集添加到Vue实例上面去\r\n        Vue.prototype.$utils = utils;\r\n        //返回地图对象\r\n        Vue.prototype.$getMapConfig = function (common?: any) {\r\n            return new Map(common);\r\n        }\r\n\r\n        Vue.prototype.$imgBaseUrl = function () {\r\n            return (<any>window).$imgBaseUrl;\r\n        }\r\n        Vue.prototype.$baseVideoSrc = function () {\r\n            return (<any>window).$baseVideoSrc;\r\n        }\r\n\r\n        //点击该元素以外的部分触发的事件\r\n        Vue.directive('clickoutside', {\r\n            bind: function (\r\n                el: {\r\n                    contains: (arg0: any) => void;\r\n                    _vueClickOutside_: (e: any) => false | undefined;\r\n                },\r\n                binding: {\r\n                    expression: any;\r\n                    value: (arg0: any) => void;\r\n                }) {\r\n                function documentHandler(e: { target: any; }) {\r\n                    // @ts-ignore\r\n                    if (el.contains(e.target)) {\r\n                        return false;\r\n                    }\r\n                    if (binding.expression) {\r\n                        binding.value(e)\r\n                    }\r\n                }\r\n                // @ts-ignore\r\n                el._vueClickOutside_ = documentHandler;\r\n                document.addEventListener('click', documentHandler);\r\n            },\r\n            unbind: function (el: { _vueClickOutside_: (this: Document, ev: MouseEvent) => any; }) {\r\n                document.removeEventListener('click', el._vueClickOutside_);\r\n                delete el._vueClickOutside_;\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scroll.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scroll.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <router-view />\r\n</template>\r\n<script>\r\n\r\n    export default {\r\n        computed:{\r\n\r\n        },\r\n        watch:{\r\n\r\n        },\r\n        methods:{\r\n\r\n        },\r\n    }\r\n</script>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5c32fb7e&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default [\r\n    {\r\n        path: 'futureHome',\r\n        name: '未来社区首页',\r\n        component: () => import('../views/futureHome.vue'),\r\n    },\r\n    {\r\n        path: 'dataManage',\r\n        name: '数字化管理',\r\n        component: () => import('../views/dataManage.vue'),\r\n    },\r\n    {\r\n        path: 'health',\r\n        name: '健康场景',\r\n        component: () => import('../views/health.vue'),\r\n    },\r\n    {\r\n        path: 'traffic',\r\n        name: '交通场景',\r\n        component: () => import('../views/traffic.vue'),\r\n    },\r\n    {\r\n        path: 'govern',\r\n        name: '治理场景',\r\n        component: () => import('../views/govern.vue'),\r\n    },\r\n\r\n\r\n    {\r\n        path: 'neighbor',\r\n        name: '邻里场景',\r\n        component: () => import('../views/neighbor.vue'),\r\n    },\r\n    {\r\n        path: 'lowCarbon',\r\n        name: '低碳场景',\r\n        component: () => import('../views/lowCarbon.vue'),\r\n    },\r\n    {\r\n        path: 'serve',\r\n        name: '服务场景',\r\n        component: () => import('../views/serve.vue'),\r\n    },\r\n    {\r\n        path: 'building',\r\n        name: '建筑场景',\r\n        component: () => import('../views/building.vue'),\r\n    },\r\n    {\r\n        path: 'entrepreneurship',\r\n        name: '创业场景',\r\n        component: () => import('../views/entrepreneurship.vue'),\r\n    },\r\n    {\r\n        path: 'education',\r\n        name: '教育场景',\r\n        component: () => import('../views/education.vue'),\r\n    },\r\n\r\n]\r\n","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport dataShow from './dataShow';\r\nVue.use(Router);\r\n\r\nexport default new Router({\r\n    routes: [\r\n        {\r\n            path: '',\r\n            redirect: '/dataShow',\r\n        },\r\n        {\r\n            name: '数据展示',\r\n            path: '/dataShow',\r\n            component:() => import('../views/allDataShow/dataShowMng.vue'),\r\n            redirect:'dataShow/futureHome',\r\n            children:[\r\n                ...dataShow,\r\n            ]\r\n        },\r\n        {\r\n            name: '控件下载',\r\n            path: '/download',\r\n            component:() => import('../views/download.vue'),\r\n        },\r\n    ]\r\n})\r\n","import {routeState} from \"./interfaces\";\r\n\r\nconst state: routeState = {\r\n    routeModuleList:[\r\n        `security`,\r\n        `property`,\r\n    ],\r\n    routeModule:'',\r\n    tabList: [],\r\n    activeTabName:'',\r\n    partB:[],\r\n    Asize:2,\r\n    toRouteName:'',\r\n};\r\nexport default state;\r\n","import {ActionContext} from \"vuex\";\r\n\r\nimport {routeState} from \"./interfaces\";\r\nimport Vue from \"vue\";\r\n\r\n\r\nexport function setLoginUser(\r\n    context: ActionContext<routeState, any>,\r\n    data: any\r\n) {\r\n    context.commit('setLoginUser', data);\r\n}\r\n\r\n\r\nexport function removeAllRouterTab(\r\n    context: ActionContext<routeState, any>\r\n) {\r\n    context.commit('removeAllRouter');\r\n}\r\n","import {routeState} from \"./interfaces\";\r\n\r\n//新增路由标签\r\nexport function openTabs(\r\n    state: routeState,\r\n    data: any,\r\n) {\r\n    let bool = false;\r\n    state.tabList.forEach(item=>{\r\n        if(item.routeName === data.routeName){\r\n            bool = true\r\n        }\r\n    })\r\n    if(!bool){\r\n        if(state.Asize > state.tabList.length){\r\n            state.tabList.push(data)\r\n        }\r\n        else{\r\n            let temp = state.tabList.splice(state.tabList.length-1,1);\r\n            state.tabList.push(data);\r\n            state.partB.forEach((item,index)=>{\r\n                if(item.routeName === data.routeName){\r\n                    state.partB.splice(index,1)\r\n                }\r\n            });\r\n            state.partB  = temp.concat(state.partB);\r\n\r\n        }\r\n    }\r\n    state.activeTabName = data.routeName;\r\n\r\n}\r\ninterface btoaInterface {\r\n    routeName:string,\r\n    index:number\r\n}\r\n//打开partB中的路由标签\r\nexport function BToA(\r\n    state: routeState,\r\n    obj:btoaInterface\r\n) {\r\n    let tempb = state.partB.splice(obj.index,1);\r\n    let tempa = state.tabList.splice(state.tabList.length-1,1);\r\n    state.tabList = state.tabList.concat(tempb);\r\n    state.partB = tempa.concat(state.partB);\r\n}\r\n\r\n//设置路由所属模块\r\nexport function setRouteModule(\r\n    state: routeState,\r\n    module: any,\r\n) {\r\n    state.routeModule = module;\r\n}\r\n\r\n//关闭路由标签\r\nexport function closeTab(\r\n    state: routeState,\r\n    routeName:string,\r\n) {\r\n    if(state.tabList.length>1){\r\n        let windex = 0;\r\n        state.tabList.forEach((item,index)=>{\r\n            if(item.routeName === routeName){\r\n                state.tabList.splice(index,1);\r\n                windex=index;\r\n            }\r\n        })\r\n        if(state.partB.length>0){\r\n            let temp = state.partB.splice(0,1);\r\n            state.tabList = state.tabList.concat(temp);\r\n        }\r\n        if(windex === 0){\r\n            state.toRouteName =  state.tabList[0].routeName\r\n        }\r\n        else{\r\n            state.toRouteName =  state.tabList[windex-1].routeName\r\n        }\r\n    }\r\n\r\n}\r\nexport function clearAllTabs(\r\n    state: routeState,\r\n) {\r\n    state.tabList = [];\r\n    state.partB = [];\r\n}\r\n\r\n//设置路由数组最大长度\r\nexport function setTabSize(\r\n    state: routeState,\r\n    size:number\r\n) {\r\n    state.Asize = size;\r\n}\r\n","import {Module} from \"vuex\";\r\n\r\nimport state from \"./state\";\r\nimport * as actions from \"./actions\";\r\nimport * as mutations from \"./mutations\";\r\n\r\n\r\n\r\nconst routeTabs: Module<any, any> = {\r\n    namespaced: true,\r\n    state,\r\n    actions,\r\n    mutations\r\n};\r\nexport default routeTabs;\r\n","import Vue from 'vue'\r\nimport Vuex, {ModuleTree} from 'vuex';\r\nimport routeTabs from './routeTabs/index';\r\n\r\nVue.use(Vuex)\r\n\r\n\r\nconst modules: ModuleTree<any> = {\r\n    routeTabs,\r\n\r\n};\r\n\r\nexport default new Vuex.Store({\r\n    state: {\r\n        userInfo: null\r\n    },\r\n    modules,\r\n    mutations: {\r\n        getUserInfo(state, userInfo) {\r\n            state.userInfo = userInfo;\r\n        }\r\n    },\r\n    actions: {\r\n\r\n    }\r\n})\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-map\",staticStyle:{\"height\":\"100%\"},attrs:{\"id\":_vm.options.id}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-view\",staticStyle:{\"display\":\"none !important\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.handleCenter)+\"\\n\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {isDefined} from \"./helpers\";\r\n\r\nconst maps = {};\r\n\r\nconst setResolvedDefer = function (d, mapId) {\r\n    const id = obtainEffectiveMapId(d, mapId);\r\n    d[id].resolvedDefer = true;\r\n};\r\n\r\nconst getUnresolvedDefer = function (d, mapId) {\r\n    const id = obtainEffectiveMapId(d, mapId);\r\n    let defer = {\r\n        promise: null,\r\n        resolve: null\r\n    }\r\n\r\n    if (!isDefined(d[id]) || d[id].resolvedDefer === true) {\r\n        defer.promise = new Promise((resolve, reject) => {\r\n            defer.resolve = resolve;\r\n        });\r\n        d[id] = {\r\n            defer: defer,\r\n            resolvedDefer: false\r\n        };\r\n    } else {\r\n        defer = d[id].defer;\r\n    }\r\n    return defer;\r\n};\r\n\r\nconst getDefer = function (d, mapId) {\r\n    const id = obtainEffectiveMapId(d, mapId);\r\n    let defer;\r\n\r\n    if (!isDefined(d[id]) || d[id].resolvedDefer === false) {\r\n        defer = getUnresolvedDefer(d, mapId);\r\n    } else {\r\n        defer = d[id].defer;\r\n    }\r\n    return defer;\r\n};\r\n\r\nfunction obtainEffectiveMapId(d, mapId) {\r\n    let id, i;\r\n    if (!isDefined(mapId)) {\r\n        const mapNum = Object.keys(d).length;\r\n        if (mapNum === 1) {\r\n            for (i in d) {\r\n                if (d.hasOwnProperty(i)) {\r\n                    id = i;\r\n                }\r\n            }\r\n        } else if (mapNum === 0) {\r\n            id = 'main';\r\n        } else {\r\n            console.error('[Vue - Openlayers] - You have more than 1 map on the DOM, ' +\r\n                'you must provide the map ID to the olData.getXXX call');\r\n        }\r\n    } else {\r\n        id = mapId;\r\n    }\r\n    return id;\r\n}\r\n\r\nconst olData = {\r\n    setMap(olMap, id) {\r\n        let defer = getUnresolvedDefer(maps, id);\r\n        defer.resolve(olMap);\r\n        setResolvedDefer(maps, id);\r\n    },\r\n    getMap(id) {\r\n        let defer = getDefer(maps, id);\r\n        return defer.promise;\r\n    },\r\n    resetMap(id) {\r\n        if (isDefined(maps[id])) {\r\n            delete maps[id];\r\n        }\r\n    }\r\n}\r\nexport default olData;","\r\nconst Constants = {\r\n    TWO_PI : Math.PI * 2,\r\n    HALF_PI : Math.PI / 2,\r\n    FITTING_COUNT : 100,\r\n    ZERO_TOLERANCE : 0.0001\r\n};\r\nexport default Constants;","import {\r\n    Vector as VectorLayer\r\n} from 'ol/layer.js';\r\nimport {\r\n    Vector as VectorSource\r\n} from 'ol/source.js';\r\nimport Feature from 'ol/Feature.js';\r\nimport {\r\n    Circle as CircleStyle,\r\n    Fill,\r\n    Stroke,\r\n    Style,\r\n    Text,\r\n    Image as ImageStyle,\r\n    Icon,\r\n    RegularShape,\r\n    AtlasManager\r\n} from 'ol/style.js';\r\nimport {\r\n    Circle,\r\n    LineString,\r\n    MultiLineString,\r\n    MultiPoint,\r\n    MultiPolygon,\r\n    Point,\r\n    Polygon\r\n} from 'ol/geom';\r\nimport {\r\n    Attribution,\r\n    FullScreen,\r\n    OverviewMap,\r\n    Rotate,\r\n    ScaleLine,\r\n    Zoom,\r\n    ZoomSlider,\r\n    ZoomToExtent\r\n} from 'ol/control'\r\nimport MousePosition from 'ol/control/MousePosition.js';\r\nimport Overlay from 'ol/Overlay'\r\nimport {transform as transformProjection, fromLonLat, toLonLat, transformExtent} from 'ol/proj'\r\nimport * as Sphere from 'ol/sphere'\r\nimport olData from \"./olData\";\r\n\r\nimport {saveAs} from 'file-saver';\r\nimport Constants from \"../plugins/plot/gispace/Constants\";\r\n\r\nexport function isDefined(x) {\r\n    return x !== undefined;\r\n}\r\n\r\nexport function isDefinedAndNotNull(x) {\r\n    return x !== null && x !== undefined;\r\n}\r\n\r\nexport function isFunction(x) {\r\n    return typeof x === \"function\";\r\n}\r\n\r\nexport function isObjectLike(value) {\r\n    return value != null && typeof value === 'object'\r\n}\r\n\r\nexport function isEqual(value, other) {\r\n    if (value === other) {\r\n        return true\r\n    }\r\n    if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\r\n        // eslint-disable-next-line no-self-compare\r\n        return value !== value && other !== other\r\n    }\r\n\r\n    let valueProps = Object.keys(value)\r\n    let otherProps = Object.keys(other)\r\n    if (valueProps.length !== otherProps.length) {\r\n        return false\r\n    }\r\n\r\n    let checked = []\r\n    let traverse = (valueProps, otherProps) => {\r\n        for (let i = 0, l = valueProps.length; i < l; i++) {\r\n            let valueProp = valueProps[i];\r\n\r\n            if (checked.includes(valueProp)) {\r\n                continue\r\n            }\r\n            if (other.hasOwnProperty(valueProp) === false) {\r\n                return false\r\n            }\r\n\r\n            let otherProp = otherProps[i]\r\n\r\n            if (!isEqual(value[valueProp], other[otherProp])) {\r\n                return false\r\n            }\r\n\r\n            checked.push(otherProp)\r\n        }\r\n\r\n        return true\r\n    }\r\n\r\n    if (traverse(valueProps, otherProps) === false) {\r\n        return false\r\n    }\r\n\r\n    return traverse(otherProps, valueProps)\r\n}\r\n\r\nexport function deepClone(obj) {\r\n    let objClone = Array.isArray(obj) ? [] : {};\r\n    if (obj && typeof obj === \"object\") {\r\n        for (let key in obj) {\r\n            if (obj.hasOwnProperty(key)) {\r\n                if (obj[key]) {\r\n                    //判断ojb子元素是否为对象，如果是，递归复制\r\n                    if (obj[key] && typeof obj[key] === \"object\") {\r\n                        objClone[key] = deepClone(obj[key]);\r\n                    } else {\r\n                        //如果不是，简单复制\r\n                        objClone[key] = obj[key];\r\n                    }\r\n                } else {\r\n                    objClone[key] = obj[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return objClone;\r\n}\r\n\r\n/**\r\n 　　* @description: canvas 导出图片\r\n 　　* @param canvas: 画布元素\r\n 　　* @author xrx\r\n 　　* @date 2019/4/23 13:23\r\n 　　*/\r\nexport function exportMap(canvas) {\r\n    if (navigator.msSaveBlob) {\r\n        navigator.msSaveBlob(canvas.msToBlob(), 'map.png');\r\n    } else {\r\n        canvas.toBlob(function (blob) {\r\n            saveAs(blob, 'map.png');\r\n        });\r\n    }\r\n}\r\n\r\n//判断经纬度是否有效\r\nexport function validCoords(longitude, latitude) {\r\n    const lon = /^-?((0|[1-9]\\d?|1[0-7]\\d)(\\.\\d+)?|180(\\.0+)?)?$/;\r\n    const lat = /^-?((0|[1-8]?\\d|)(\\.\\d+)?|90(\\.0+)?)?$/;\r\n    const lonRe = new RegExp(lon);\r\n    const latRe = new RegExp(lat);\r\n    if (lonRe.test(longitude) && latRe.test(latitude)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n//时间戳转换成自定义字符串\r\nexport function dateFormat(date, fmt) {\r\n    if (!date) {\r\n        return null;\r\n    }\r\n    if (!(date instanceof Date)) {\r\n        date = new Date(date);\r\n    }\r\n\r\n    let dateList = {\r\n        \"M+\": date.getMonth() + 1,\r\n        \"d+\": date.getDate(),\r\n        \"H+\": date.getHours(),\r\n        \"m+\": date.getMinutes(),\r\n        \"s+\": date.getSeconds(),\r\n        \"q+\": Math.floor((date.getMonth() + 3) / 3),\r\n        \"S+\": date.getMilliseconds()\r\n    };\r\n    if (/(y+)/i.test(fmt)) {\r\n        fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\r\n    }\r\n    for (let k in dateList) {\r\n        if (new RegExp(\"(\" + k + \")\").test(fmt)) {\r\n            fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? dateList[k] : (\"00\" + dateList[k]).substr((\"\" + dateList[k]).length));\r\n        }\r\n    }\r\n    return fmt;\r\n}\r\n\r\n/**\r\n *  @description: 字符串转时间戳\r\n *  @param dateStr：时间字符串；separator1: 年月日的分隔符；separator2：时分秒的分隔符\r\n *  @return number\r\n *  @author xrx\r\n *  @date 2019/5/10 10:12\r\n */\r\nexport function stringToStamp(dateStr, separator1 = \"-\", separator2 = \":\") {\r\n    if (!dateStr) {\r\n        return null;\r\n    }\r\n\r\n    let dateArr = dateStr.split(\" \");\r\n    if (dateArr.length != 2) {\r\n        return null;\r\n    }\r\n\r\n    let arr1 = dateArr[0].split(separator1);\r\n    let year = parseInt(arr1[0]);\r\n    let month;\r\n    //处理月份为04这样的情况\r\n    if (arr1[1].indexOf(\"0\") == 0) {\r\n        month = parseInt(arr1[1].substring(1));\r\n    } else {\r\n        month = parseInt(arr1[1]);\r\n    }\r\n    let day = parseInt(arr1[2]);\r\n\r\n    let arr2 = dateArr[1].split(separator2);\r\n    let hour = parseInt(arr2[0]);\r\n    let min = parseInt(arr2[1]);\r\n    let sec = parseInt(arr2[2]);\r\n\r\n    let date = new Date(year, month - 1, day, hour, min, sec);\r\n    return date.getTime();\r\n}\r\n\r\n/*16进制颜色转为RGB格式*/\r\nexport function colorRgb(color) {\r\n    if (color instanceof Array) {\r\n        return color.join(\",\");\r\n    }\r\n\r\n    //十六进制颜色值的正则表达式\r\n    const reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;\r\n    let sColor = color.toLowerCase();\r\n    if (sColor && reg.test(sColor)) {\r\n        if (sColor.length === 4) {\r\n            let sColorNew = \"#\";\r\n            for (let i = 1; i < 4; i += 1) {\r\n                sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\r\n            }\r\n            sColor = sColorNew;\r\n        }\r\n\r\n        //处理六位的颜色值\r\n        let sColorChange = [];\r\n        for (let i = 1; i < 7; i += 2) {\r\n            sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\r\n        }\r\n        return sColorChange.join(\",\");\r\n    } else if (sColor && sColor.indexOf(\"rgb\") != -1) {\r\n        let temp = sColor.split(\"(\")[1];\r\n        temp = temp.slice(0, temp.length - 1);\r\n        sColor = temp;\r\n        return sColor;\r\n    } else {\r\n        return null;\r\n    }\r\n};\r\n\r\n//坐标系转换\r\nexport function coordinateTransform(coord, coordinate1, coordinate2) {\r\n    return transformProjection(coord, coordinate1, coordinate2);\r\n}\r\n\r\n//坐标系转换\r\nexport function extentTransform(extent, coordinate1, coordinate2) {\r\n    return transformExtent(extent, coordinate1, coordinate2);\r\n}\r\n\r\n/**\r\n *  @description: 已知一个经纬度点位和像素距离数组，求另一个点位\r\n *  @param {Array} LonLat\r\n *  @param {Array} pixel\r\n *  @return {Array} LonLat\r\n *  @author xrx\r\n *  @date 2019/6/5 14:36\r\n */\r\nexport function getLonLatFromPixelDis(mapId, LonLat, pixel) {\r\n    olData.getMap(mapId).then(map => {\r\n        let ps = map.getPixelFromCoordinate(fromLonLat(LonLat));\r\n        let ps2 = [ps[0] + pixel[0], ps[1] + pixel[1]];\r\n        return map.getCoordinateFromPixel(ps2);\r\n    })\r\n}\r\n\r\n//创建矢量图层\r\nexport function createVectorLayer(name = 'default') {\r\n    let layer = new VectorLayer({\r\n        source: new VectorSource(),\r\n        zIndex: arguments[0] || 0\r\n    });\r\n    layer.set(\"name\", name);\r\n    return layer;\r\n}\r\n\r\n//创建样式\r\nconst styleMap = {\r\n    'style': Style,\r\n    'fill': Fill,\r\n    'stroke': Stroke,\r\n    'circle': CircleStyle,\r\n    'icon': Icon,\r\n    'image': ImageStyle,\r\n    'regularshape': RegularShape,\r\n    'text': Text,\r\n    'atlasManager': AtlasManager\r\n};\r\n\r\nconst optionalFactory = function (style, Constructor) {\r\n    if (Constructor && style instanceof Constructor) {\r\n        return style;\r\n    } else if (Constructor) {\r\n        return new Constructor(style);\r\n    } else {\r\n        return style;\r\n    }\r\n};\r\nexport const createStyle = function recursiveStyle(data, styleName) {\r\n    let style;\r\n    if (!styleName) {\r\n        styleName = 'style';\r\n        style = data;\r\n    } else {\r\n        style = data[styleName];\r\n    }\r\n    //Instead of defining one style for the layer, we've been given a style function\r\n    //to apply to each feature.\r\n    if (styleName === 'style' && data instanceof Function) {\r\n        return data;\r\n    }\r\n\r\n    if (!(style instanceof Object)) {\r\n        return style;\r\n    }\r\n\r\n    var styleObject;\r\n    if (Object.prototype.toString.call(style) === '[object Object]') {\r\n        styleObject = {};\r\n        var styleConstructor = styleMap[styleName];\r\n        if (styleConstructor && style instanceof styleConstructor) {\r\n            return style;\r\n        }\r\n        Object.keys(style).forEach(function (val, idx, array) {\r\n            //Consider the case\r\n            //image: {\r\n            //  circle: {\r\n            //     fill: {\r\n            //       color: 'red'\r\n            //     }\r\n            //   }\r\n            //\r\n            //An ol.style.Circle is an instance of ol.style.Image, so we do not want to construct\r\n            //an Image and then construct a Circle.  We assume that if we have an instanceof\r\n            //relationship, that the JSON parent has exactly one child.\r\n            //We check to see if an inheritance relationship exists.\r\n            //If it does, then for the parent we create an instance of the child.\r\n            var valConstructor = styleMap[val];\r\n            if (styleConstructor && valConstructor &&\r\n                valConstructor.prototype instanceof styleMap[styleName]) {\r\n                console.assert(array.length === 1, 'Extra parameters for ' + styleName);\r\n                styleObject = recursiveStyle(style, val);\r\n                return optionalFactory(styleObject, valConstructor);\r\n            } else {\r\n                styleObject[val] = recursiveStyle(style, val);\r\n\r\n                // if the value is 'text' and it contains a String, then it should be interpreted\r\n                // as such, 'cause the text style might effectively contain a text to display\r\n                if (val !== 'text' && typeof styleObject[val] !== 'string') {\r\n                    styleObject[val] = optionalFactory(styleObject[val], styleMap[val]);\r\n                }\r\n            }\r\n        });\r\n    } else {\r\n        styleObject = style;\r\n    }\r\n    return optionalFactory(styleObject, styleMap[styleName]);\r\n}\r\n\r\n/**\r\n *  @description: 获取扇形弧线上的坐标点\r\n *  @param {Number} startAngle  开始弧度\r\n *  @param {Number} endAngle    结束弧度\r\n *  @return {Array}\r\n *  @author xrx\r\n *  @date 2019/5/29 16:25\r\n */\r\nexport function getArcPoints(center, radius, startAngle, endAngle) {\r\n    let x, y, pnts = [];\r\n    let angleDiff = endAngle - startAngle;\r\n    angleDiff = angleDiff < 0 ? angleDiff + Math.PI * 2 : angleDiff;\r\n    const COUNT = 100;\r\n    for (let i = 0; i <= COUNT; i++) {\r\n        let angle = startAngle + angleDiff * (i / COUNT);\r\n        x = center[0] + radius * Math.cos(angle);\r\n        y = center[1] + radius * Math.sin(angle);\r\n\r\n        pnts.push([x, y]);\r\n    }\r\n    return pnts;\r\n}\r\n\r\n/**\r\n *  @description: 米换算成当前坐标系下的单位\r\n *  @param {String} projection 当前地图的坐标系\r\n *  @param {Number} radiusMeter   长度（米）\r\n *  @param {Array} coords   当前坐标系下的坐标数组\r\n *  @return {Number}\r\n *  @author xrx\r\n *  @date 2019/5/20 19:00\r\n */\r\nexport function calcRadius(projection, radiusMeter, coords) {\r\n    if (radiusMeter) {\r\n        if (projection != \"pixel\") {\r\n            const perDegree = getGeodesicDistance(projection, coords, [coords[0] + 1, coords[1]]);\r\n            const radius = radiusMeter / perDegree;\r\n            return radius;\r\n        }\r\n\r\n        return radiusMeter;\r\n    }\r\n    return 0;\r\n}\r\n\r\n//创建feature\r\nexport function createFeature(data, viewProjection) {\r\n    let geometry;\r\n\r\n    switch (data.type) {\r\n        case 'Polygon':\r\n            geometry = new Polygon(data.coords);\r\n            break;\r\n        case 'MultiPolygon':\r\n            geometry = new MultiPolygon(data.coords);\r\n            break;\r\n        case 'LineString':\r\n            geometry = new LineString(data.coords);\r\n            break;\r\n        case 'MultiLineString':\r\n            geometry = new MultiLineString(data.coords);\r\n            break;\r\n        case 'Point':\r\n            geometry = new Point(data.coords);\r\n            break;\r\n        case 'MultiPoint':\r\n            geometry = new MultiPoint(data.coords);\r\n            break;\r\n        case 'Circle':\r\n            geometry = new Circle(data.coords, data.radius);\r\n            break;\r\n        case 'Sector':  //扇形  ol扩展\r\n            let coords = getArcPoints(data.coords, data.radius, data.startAngle, data.endAngle);\r\n            coords.push(data.coords, coords[0]);\r\n            geometry = new Polygon([coords]);\r\n            break;\r\n        default:\r\n            if (data.coords) {\r\n                geometry = new Point(data.coords);\r\n            } else if ((data.lat || data.lat == 0) && (data.lon || data.lon == 0)) {\r\n                geometry = new Point([data.lon, data.lat]);\r\n            }\r\n            break;\r\n    }\r\n\r\n    if (isDefined(data.projection) && data.projection !== 'pixel') {\r\n        geometry = geometry.transform(data.projection, viewProjection);\r\n    }\r\n\r\n    const feature = new Feature({\r\n        id: data.id,\r\n        name: data.name,\r\n        geometry: geometry\r\n    });\r\n\r\n    let style = [];\r\n\r\n    if (isDefined(data.style)) {\r\n        if (data.style instanceof Array) {\r\n            let len = data.style.length;\r\n            for (let i = 0; i < len; i++) {\r\n                style[i] = createStyle(data.style[i]);\r\n            }\r\n        } else {\r\n            style = createStyle(data.style);\r\n        }\r\n\r\n        feature.setStyle(style);\r\n    }\r\n    return feature;\r\n}\r\n\r\n//控件\r\nexport function getControlClasses() {\r\n    return {\r\n        attribution: Attribution,\r\n        fullscreen: FullScreen,\r\n        mouseposition: MousePosition,\r\n        overviewmap: OverviewMap,\r\n        rotate: Rotate,\r\n        scaleline: ScaleLine,\r\n        zoom: Zoom,\r\n        zoomslider: ZoomSlider,\r\n        zoomtoextent: ZoomToExtent\r\n    };\r\n}\r\n\r\nexport function detectControls(controls) {\r\n    let actualControls = {};\r\n    let controlClasses = getControlClasses();\r\n\r\n    controls.forEach(function (control) {\r\n        for (let i in controlClasses) {\r\n            if (control instanceof controlClasses[i]) {\r\n                actualControls[i] = control;\r\n            }\r\n        }\r\n    });\r\n\r\n    return actualControls;\r\n}\r\n\r\n//弹框\r\nexport function createOverlay(element, pos, id, stopEvent) {\r\n    // element.style.display = 'block';\r\n    let ov = new Overlay({\r\n        id: id,\r\n        element: element,\r\n        positioning: 'top-left',\r\n        insertFirst: false,\r\n        stopEvent: stopEvent == undefined ? true : stopEvent\r\n    });\r\n\r\n    ov.setPosition(pos);\r\n    return ov;\r\n};\r\n\r\nexport function removeOverlay(map, id, property) {\r\n    let layArr = map.getOverlays();\r\n    const len = layArr.getLength();\r\n    if (!id && !property) { //移除所有\r\n        layArr.clear();\r\n    } else if (id) {\r\n        for (let i = len - 1; i >= 0; i--) {\r\n            if (layArr.item(i).getId() == id) {\r\n                layArr.removeAt(i);\r\n            }\r\n        }\r\n    } else {\r\n        for (let i = len - 1; i >= 0; i--) {\r\n            if (layArr.item(i).get(property)) {\r\n                layArr.removeAt(i);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function setLabelEvent(feature, map, data) {\r\n    const viewProjection = map.getView().getProjection().getCode();\r\n    let pos;\r\n    if (data.coord && data.coord.length == 2) {\r\n        pos = transformProjection(data.coord, data.projection, viewProjection);\r\n    } else if (data.lon && data.lat) {\r\n        pos = transformProjection([data.lon, data.lat], data.projection, viewProjection);\r\n    }\r\n    //如果没有内容，就不产生弹出框\r\n    if (!data.label && !data.label.message) {\r\n        return;\r\n    }\r\n\r\n    let layEle = document.createElement('div');\r\n    layEle.className = data.label.classNm;\r\n    layEle.innerHTML = data.label.message;\r\n\r\n    let label = createOverlay(layEle, pos, data.label.id, data.label.stopEvent);\r\n\r\n    map.addOverlay(label);\r\n\r\n    //关联起feature和overLay\r\n    if (feature) {\r\n        feature.set(\"overLay\", label);\r\n    }\r\n\r\n    return label;\r\n}\r\n\r\nexport function getGeodesicDistance(projection, point1, point2) {\r\n    if (projection == \"pixel\") {\r\n        return Math.sqrt((point1[0] - point2[0]) * (point1[0] - point2[0]) + (point1[1] - point2[1]) * (point1[1] - point2[1]));\r\n    }\r\n    let point11 = transformProjection(point1, projection, 'EPSG:4326'),\r\n        point21 = transformProjection(point2, projection, 'EPSG:4326');\r\n    let s = Sphere.getDistance(point11, point21, 6378137);\r\n    return s;\r\n}\r\n\r\nexport function normalize(type) {\r\n    const kernels = {\r\n        none: [1, 0, 0, 0, 1, 0, 0, 0, 1],\r\n        gray: [0.33, 0.34, 0.33, 0.33, 0.34, 0.33, 0.33, 0.34, 0.33],\r\n        sepia: [0.393, 0.769, 0.189, 0.349, 0.686, 0.168, 0.272, 0.534, 0.131],\r\n        test: [0.299, 0.587, 0.114, 0.299, 0.587, 0.114, 0.299, 0.587, 0.144]\r\n    };\r\n    let kernel = kernels[type];\r\n    const len = kernel.length;\r\n    const normal = new Array(len);\r\n\r\n    for (let i = 0; i < len; ++i) {\r\n        normal[i] = kernel[i] / 1;\r\n    }\r\n    return normal;\r\n}\r\n\r\nfunction grayfilter(r, g, b) {\r\n    const color = new Array(3);\r\n    const grayFilterColorBar = [[0, 12, 43, 1], [129, 150, 173, 1], [0, 28, 55, 1]];\r\n    const grayFilterPerBar = [0, 0.72, 1]; //设置瓦片图层的样式为DARKGREEN\r\n    const size = grayFilterPerBar.length;\r\n    for (let i = 0; i < size - 1; ++i) {\r\n        const minPer = grayFilterPerBar[i];\r\n        const minColor = grayFilterColorBar[i];\r\n        const maxPer = grayFilterPerBar[i + 1];\r\n        const maxColor = grayFilterColorBar[i + 1];\r\n        if (r <= maxPer * 255) {\r\n            color[0] = (r / 255 - minPer) / (maxPer - minPer) * (maxColor[0] - minColor[0]) + minColor[0];\r\n        }\r\n        if (g <= maxPer * 255) {\r\n            color[1] = (g / 255 - minPer) / (maxPer - minPer) * (maxColor[1] - minColor[1]) + minColor[1];\r\n        }\r\n        if (b <= maxPer * 255) {\r\n            color[2] = (b / 255 - minPer) / (maxPer - minPer) * (maxColor[2] - minColor[2]) + minColor[2];\r\n        }\r\n    }\r\n\r\n    return color;\r\n}\r\n\r\n/**\r\n * Apply a convolution kernel to canvas.  This works for any size kernel, but\r\n * performance starts degrading above 3 x 3.\r\n * @param {CanvasRenderingContext2D} context Canvas 2d context.\r\n * @param {Array<number>} kernel Kernel.\r\n */\r\nexport function convolve(context, kernel) {\r\n    const canvas = context.canvas;\r\n    const width = canvas.width;\r\n    const height = canvas.height;\r\n\r\n    const size = Math.sqrt(kernel.length);\r\n    const half = Math.floor(size / 2);\r\n\r\n    const inputData = context.getImageData(0, 0, width, height).data;\r\n\r\n    const output = context.createImageData(width, height);\r\n    const outputData = output.data;\r\n\r\n    for (let i = 0; i < outputData.length; i += 4) {\r\n        const r = inputData[i];\r\n        const g = inputData[i + 1];\r\n        const b = inputData[i + 2];\r\n        const a = inputData[i + 3];\r\n        let filtercolor = \"color\";\r\n\r\n        if (filtercolor) {\r\n            let color = grayfilter((r * kernel[0] + g * kernel[1] + b * kernel[2]),\r\n                (r * kernel[3] + g * kernel[4] + b * kernel[5]), (r * kernel[6] + g * kernel[7] + b * kernel[8]));\r\n            outputData[i] = color[0];\r\n            outputData[i + 1] = color[1];\r\n            outputData[i + 2] = color[2];\r\n        }\r\n        else {\r\n            outputData[i] = (r * kernel[0] + g * kernel[1] + b * kernel[2] + a * 0 + 0);\r\n            outputData[i + 1] = (r * kernel[3] + g * kernel[4] + b * kernel[5] + a * 0 + 0);\r\n            outputData[i + 2] = (r * kernel[6] + g * kernel[7] + b * kernel[8] + a * 0 + 0);\r\n        }\r\n        outputData[i + 3] = a;\r\n    }\r\n\r\n    //for (var pixelY = 0; pixelY < height; ++pixelY) {\r\n    //  var pixelsAbove = pixelY * width;\r\n    //  for (var pixelX = 0; pixelX < width; ++pixelX) {\r\n    //\tvar r = 0, g = 0, b = 0, a = 0;\r\n    //\tfor (var kernelY = 0; kernelY < size; ++kernelY) {\r\n    //\t  for (var kernelX = 0; kernelX < size; ++kernelX) {\r\n    //\t\tvar weight = kernel[kernelY * size + kernelX];\r\n    //\t\tvar neighborY = Math.min(\r\n    //\t\t  height - 1, Math.max(0, pixelY + kernelY - half));\r\n    //\t\tvar neighborX = Math.min(\r\n    //\t\t  width - 1, Math.max(0, pixelX + kernelX - half));\r\n    //\t\tvar inputIndex = (neighborY * width + neighborX) * 4;\r\n    //\t\tr += inputData[inputIndex] * weight;\r\n    //\t\tg += inputData[inputIndex + 1] * weight;\r\n    //\t\tb += inputData[inputIndex + 2] * weight;\r\n    //\t\ta += inputData[inputIndex + 3] * weight;\r\n    //\t  }\r\n    //\t}\r\n    //\tvar outputIndex = (pixelsAbove + pixelX) * 4;\r\n    //\toutputData[outputIndex] = r;\r\n    //\toutputData[outputIndex + 1] = g;\r\n    //\toutputData[outputIndex + 2] = b;\r\n    //\toutputData[outputIndex + 3] = kernel.normalized ? a : 255;\r\n    //  }\r\n    //}\r\n    context.putImageData(output, 0, 0);\r\n}\r\n\r\n//节流  比如触发点击事件，防止频繁误点操作，减少回调执行次数\r\nexport function throttle(fn, interval = 300) {\r\n    let canRun = true;\r\n    return function () {\r\n        if (!canRun) return;\r\n        canRun = false;\r\n        fn.apply(this, arguments);\r\n        setTimeout(() => {\r\n            canRun = true;\r\n        }, interval);\r\n    };\r\n}\r\n\r\n//消抖  比如输入联想这种，当停止输入的时候再搜索\r\nexport function debounce(fn, interval = 300) {\r\n    let timeout = null;\r\n    return function () {\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(() => {\r\n            fn.apply(this, arguments);\r\n        }, interval);\r\n    };\r\n}\r\n","<template>\r\n    <div class=\"vueol-view\" style=\"display: none !important;\">\r\n        {{handleCenter}}\r\n    </div>\r\n</template>\r\n<script>\r\n    import View from 'ol/View'\r\n    import {isEqual, coordinateTransform} from '../../util/helpers'\r\n    import Projection from 'ol/proj/Projection.js';\r\n\r\n    export default {\r\n        name: 'ol-view',\r\n        props: {\r\n            /**\r\n             * The center coordinate in the view projection.\r\n             * @type {number[]}\r\n             * @default [0, 0]\r\n             * @vueSync\r\n             */\r\n            center: {\r\n                type: Object,\r\n                default: () => ({\r\n                    'coord': [120, 30],\r\n                    'projection': 'EPSG:4326'\r\n                })\r\n            },\r\n            constrainRotation: {\r\n                type: [Boolean, Number],\r\n                default: true\r\n            },\r\n            enableRotation: {\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            /**\r\n             * The extent that constrains the center defined in the view projection,\r\n             * in other words, center cannot be set outside this extent.\r\n             * @default undefined\r\n             */\r\n            extent: {\r\n                type: Array,\r\n                validator: value => value.length === 4\r\n            },\r\n            maxResolution: Number,\r\n            minResolution: Number,\r\n            /**\r\n             * @default 28\r\n             */\r\n            maxZoom: {\r\n                type: Number,\r\n                default: 28\r\n            },\r\n            /**\r\n             * @default 0\r\n             */\r\n            minZoom: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            /**\r\n             * @default EPSG:3857\r\n             */\r\n            projection: {\r\n                type: [String, Object],\r\n                default: 'EPSG:3857'\r\n            },\r\n            resolution: Number,\r\n            resolutions: Array,\r\n            /**\r\n             * The initial rotation for the view in **radians** (positive rotation clockwise).\r\n             * @type {number}\r\n             * @vueSync\r\n             */\r\n            rotation: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            /**\r\n             * Zoom level used to calculate the resolution for the view as `int` value. Only used if `resolution` is not defined.\r\n             * @type {number}\r\n             * @default 0\r\n             * @vueSync\r\n             */\r\n            zoom: {\r\n                type: Number,\r\n                default: 6\r\n            },\r\n            /**\r\n             * @default 2\r\n             */\r\n            zoomFactor: {\r\n                type: Number,\r\n                default: 2\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                $view: null\r\n            }\r\n        },\r\n        created() {\r\n\r\n        },\r\n        watch: {\r\n            center: {\r\n                handler(value) {\r\n                    if (this.$view && !isEqual(value.coord, this.viewCenter)) {\r\n                        if (typeof this.projection == 'object') {\r\n                            /* 这里指pixel\r\n                            * {\r\n                                        code: 'xkcd-image',\r\n                                        units: 'pixels',\r\n                                        extent: [0, 0, 740, 832]\r\n                                    }\r\n                             */\r\n                            if (value.animate) {\r\n                                this.$view.animate({\r\n                                    center: value.coord\r\n                                })\r\n                            } else {\r\n                                this.$view.setCenter(value.coord);\r\n                            }\r\n                        } else {\r\n                            const coord = coordinateTransform(value.coord, value.projection || \"EPSG:4326\", this.projection);\r\n                            if (value.animate) {\r\n                                this.$view.animate({\r\n                                    center: coord\r\n                                },{zoom: this.zoom})\r\n                            } else {\r\n                                this.$view.setCenter(coord);\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                deep: true\r\n            },\r\n            resolution(value) {\r\n                if (this.$view && value !== this.viewResolution) {\r\n                    this.$view.setResolution(value);\r\n                }\r\n            },\r\n            zoom(value) {\r\n                value = Math.round(value);\r\n                if (this.$view && value !== this.viewZoom) {\r\n                    this.$view.setZoom(value);\r\n                }\r\n            },\r\n            rotation(value) {\r\n                if (this.$view && value !== this.viewRotation) {\r\n                    this.$view.setRotation(value);\r\n                }\r\n            },\r\n            minZoom(value) {\r\n                if (this.$view && value !== this.$view.getMinZoom()) {\r\n                    this.$view.setMinZoom(value);\r\n                }\r\n            },\r\n            maxZoom(value) {\r\n                if (this.$view && value !== this.$view.getMaxZoom()) {\r\n                    this.$view.setMaxZoom(value);\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            viewZoom() {\r\n                if (this.$view) {\r\n                    return Math.round(this.$view.getZoom());\r\n                }\r\n\r\n                return this.zoom;\r\n            },\r\n            viewRotation() {\r\n                if (this.$view) {\r\n                    return this.$view.getRotation();\r\n                }\r\n\r\n                return this.rotation;\r\n            },\r\n            viewResolution() {\r\n                if (this.$view) {\r\n                    return this.$view.getResolution();\r\n                }\r\n\r\n                return this.resolution;\r\n            },\r\n            viewCenter() {\r\n                if (this.$view) {\r\n                    return this.$view.getCenter();\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            handleCenter() {\r\n                if (typeof this.projection == 'object') {\r\n                    /* 这里指pixel\r\n                    * {\r\n                                code: 'xkcd-image',\r\n                                units: 'pixels',\r\n                                extent: [0, 0, 740, 832]\r\n                            }\r\n                     */\r\n                    return this.center.coord;\r\n                }\r\n                return coordinateTransform(this.center.coord, this.center.projection || \"EPSG:4326\", this.projection);\r\n            },\r\n            /**\r\n             * @return {ol.View}\r\n             * @protected\r\n             */\r\n            createView() {\r\n                let center = this.handleCenter();\r\n                return new View({\r\n                    center: center,\r\n                    constrainRotation: this.constrainRotation,\r\n                    enableRotation: this.enableRotation,\r\n                    extent: this.extent,\r\n                    maxResolution: this.maxResolution,\r\n                    minResolution: this.minResolution,\r\n                    maxZoom: this.maxZoom,\r\n                    minZoom: this.minZoom,\r\n                    projection: typeof this.projection == 'object' ? new Projection(this.projection) : this.projection,\r\n                    resolution: this.resolution,\r\n                    resolutions: this.resolutions,\r\n                    rotation: this.rotation,\r\n                    zoom: this.zoom,\r\n                    zoomFactor: this.zoomFactor,\r\n                });\r\n            },\r\n            listenViewChange(mapObject) {\r\n                const vm = this;\r\n                mapObject.on('moveend', function () {\r\n                    let coord = vm.$view.getCenter();\r\n                    if (typeof vm.projection != 'object') {\r\n                        coord = coordinateTransform(coord, vm.projection, vm.center.projection || \"EPSG:4326\");\r\n                    }\r\n                    let center = {\r\n                        coord\r\n                    }\r\n                    if (vm.center.projection) {\r\n                        center.projection = vm.center.projection;\r\n                    }\r\n                    vm.$emit('update:center', center);\r\n                    vm.$emit('update:zoom', vm.$view.getZoom());\r\n                });\r\n                vm.$view.on('change:rotation', function () {\r\n                    vm.$emit('update:rotation', vm.$view.getRotation());\r\n                });\r\n            }\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./view.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./view.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./view.vue?vue&type=template&id=1334e976&\"\nimport script from \"./view.vue?vue&type=script&lang=js&\"\nexport * from \"./view.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {\r\n    Tile as TileLayer,\r\n    Heatmap as HeatmapLayer,\r\n    Image as ImageLayer,\r\n    Vector as VectorLayer,\r\n    VectorTile as VectorTileLayer\r\n} from 'ol/layer.js';\r\nimport {\r\n    ImageArcGISRest,\r\n    ImageStatic,\r\n    ImageWMS,\r\n    TileArcGISRest,\r\n    TileWMS,\r\n    Vector as VectorSource,\r\n    VectorTile,\r\n    XYZ,\r\n    Cluster,\r\n    WMTS\r\n} from 'ol/source.js';\r\nimport Attribution from 'ol/control/Attribution.js';\r\nimport * as OlFormat from 'ol/format.js';\r\nimport {EsriJSON, GeoJSON, KML} from 'ol/format.js';\r\nimport {get as getProj, Projection, addProjection, addCoordinateTransforms} from 'ol/proj.js';\r\nimport * as loadingstrategy from 'ol/loadingstrategy.js';\r\nimport TileGrid from 'ol/tilegrid/TileGrid';\r\nimport WMTSTileGrid from 'ol/tilegrid/WMTS';\r\nimport {createXYZ} from 'ol/tilegrid.js';\r\nimport {applyTransform, getWidth, getTopLeft} from 'ol/extent';\r\nimport * as projzh from 'projzh'\r\n\r\nimport {isDefined, isDefinedAndNotNull, isFunction, createStyle} from './helpers';\r\n\r\nexport const layerMethods = {\r\n    detectLayerType(layer) {\r\n        if (layer.type) {\r\n            return layer.type;\r\n        } else {\r\n            if (!isDefined(layer.source)) {\r\n                console.error('[Vue - Openlayers] - layer needs valid source');\r\n                return;\r\n            }\r\n            switch (layer.source.type) {\r\n                case 'ImageWMS':\r\n                    return 'Image';\r\n                case 'ImageStatic':\r\n                case 'ImageArcGISRest':\r\n                    return 'Image';\r\n                case 'GeoJSON':\r\n                case 'JSONP':\r\n                case 'TopoJSON':\r\n                case 'KML':\r\n                case 'WKT':\r\n                case 'EsriJSON':\r\n                    return 'Vector';\r\n                case 'TileVector':\r\n                    return 'TileVector';\r\n                case 'Raster':\r\n                    return 'Image';\r\n                default:\r\n                    return 'Tile';\r\n            }\r\n        }\r\n    },\r\n    createAttribution(source) {\r\n        let attributions = [];\r\n        if (isDefined(source.attribution)) {\r\n            attributions.unshift(new Attribution({\r\n                html: source.attribution\r\n            }));\r\n        }\r\n        return attributions;\r\n    },\r\n    createXYZSource(source) {\r\n        if (!source.url && !source.tileUrlFunction) {\r\n            console.error('[Vue - Openlayers] - XYZ Layer needs valid url or tileUrlFunction properties');\r\n        }\r\n\r\n        let tileGrid = null;\r\n        if (source.tileGrid) {\r\n            const GRID = source.tileGrid;\r\n            let obj = {\r\n                tileSize: GRID.tileSize ? GRID.tileSize : [256, 256],\r\n                minZoom: GRID.minZoom||0\r\n            }\r\n            if(GRID.extent){\r\n                obj.extent = GRID.extent;\r\n            }\r\n            if(GRID.origin){\r\n                obj.origin = GRID.origin;\r\n            }\r\n            if(GRID.origins){\r\n                obj.origins = GRID.origins;\r\n            }\r\n            if(GRID.resolutions){\r\n                obj.resolutions = GRID.resolutions;\r\n            }\r\n            if(GRID.sizes){\r\n                obj.sizes = GRID.sizes;\r\n            }\r\n            if(GRID.tileSizes){\r\n                obj.tileSizes = GRID.tileSizes;\r\n            }\r\n\r\n            tileGrid = new TileGrid(obj);\r\n        }\r\n        let xyzOps = {\r\n            url: source.url,\r\n            attributions: this.createAttribution(source),\r\n            minZoom: source.minZoom,\r\n            maxZoom: source.maxZoom,\r\n            projection: source.projection||'EPSG:3857',\r\n            tileUrlFunction: source.tileUrlFunction,\r\n            tileLoadFunction: source.tileLoadFunction,\r\n            crossOrigin: source.crossOrigin || null\r\n        }\r\n        if(tileGrid){\r\n            xyzOps.tileGrid = tileGrid;\r\n        }\r\n\r\n        return new XYZ(xyzOps);\r\n    },\r\n    createImageStatic(source) {\r\n        if (!source.url || !Array.isArray(source.imageExtent) || source.imageExtent.length !== 4) {\r\n            console.error('[Vue - Openlayers] - You need a image URL to create a ImageStatic layer.');\r\n            return;\r\n        }\r\n        let projection = new Projection({\r\n            code: 'xkcd-image',\r\n            units: 'pixels',\r\n            extent: source.imageExtent\r\n        })\r\n\r\n        return new ImageStatic({\r\n            url: source.url,\r\n            attributions: this.createAttribution(source),\r\n            imageSize: source.imageSize,\r\n            projection: source.projection || projection,\r\n            imageExtent: source.imageExtent,\r\n            imageLoadFunction: source.imageLoadFunction\r\n        });\r\n    },\r\n    createTileArcGISRest(source) {\r\n        if (!source.url) {\r\n            console.error('[Vue - Openlayers] - TileArcGISRest Layer needs valid url');\r\n        }\r\n        let oSource;\r\n\r\n        if (source.params) {\r\n            oSource = new TileArcGISRest({\r\n                attributions: this.createAttribution(source),\r\n                tileLoadFunction: source.tileLoadFunction,\r\n                params: source.params,\r\n                url: source.url\r\n            });\r\n        } else {\r\n            oSource = new TileArcGISRest({\r\n                attributions: this.createAttribution(source),\r\n                tileLoadFunction: source.tileLoadFunction,\r\n                url: source.url\r\n            });\r\n        }\r\n\r\n        return oSource;\r\n    },\r\n    createImageArcGISRest(source) {\r\n        if (!source.url) {\r\n            console.error('[Vue - Openlayers] - ImageArcGISRest Layer needs valid url');\r\n        }\r\n        let oSource;\r\n\r\n        if (source.params) {\r\n            oSource = new ImageArcGISRest({\r\n                projection: source.projection ? source.projection : \"EPSG:4326\",\r\n                ratio: 1,\r\n                params: source.params,\r\n                url: source.url\r\n            })\r\n        } else {\r\n            oSource = new ImageArcGISRest({\r\n                projection: source.projection ? source.projection : \"EPSG:4326\",\r\n                ratio: 1,\r\n                url: source.url\r\n            })\r\n        }\r\n        return oSource;\r\n    },\r\n    handleJsonFeatures(features, source, type) {\r\n        /*\r\n        * esrijson/geojson\r\n        * 给feature加上样式和附属属性\r\n         */\r\n\r\n        features.forEach(function (feature) {\r\n            let style = [];\r\n            if (isDefined(source.style)) {\r\n                if (source.style instanceof Array) {\r\n                    let len = source.style.length;\r\n                    for (let i = 0; i < len; i++) {\r\n                        style[i] = createStyle(source.style[i]);\r\n                    }\r\n                } else if (isFunction(source.style)) {\r\n                    style = createStyle(source.style(feature));\r\n                } else {\r\n                    style = createStyle(source.style);\r\n                }\r\n\r\n                feature.setStyle(style);\r\n            }\r\n            if (source.moveStyle) {\r\n                feature.set(\"moveStyle\", source.moveStyle);\r\n            }\r\n            if (source.clickStyle) {\r\n                feature.set(\"clickStyle\", source.clickStyle);\r\n            }\r\n\r\n            feature.set(\"featureInfo\", {\r\n                type: type == \"esrijson\" ? \"esriFeature\" : \"geoFeature\",\r\n                data: {\r\n                    style: source.style,\r\n                    moveStyle: source.moveStyle,\r\n                    clickStyle: source.clickStyle\r\n                }\r\n            });\r\n        })\r\n    },\r\n    createObjJson(source, projection, onLayerCreatedFn, type) {\r\n        /*\r\n        * esrijson/geojson\r\n        * 拿到的数据是json对象\r\n         */\r\n        let jsonFormat;\r\n        if (type == \"esrijson\") {\r\n            jsonFormat = new EsriJSON();\r\n        } else {\r\n            jsonFormat = new GeoJSON();\r\n        }\r\n\r\n        let oSource = new VectorSource({\r\n            strategy: loadingstrategy.bbox\r\n        });\r\n\r\n        let projectionToUse = projection;\r\n        let dataProjection;\r\n        if (isDefined(source[type].projection)) {\r\n            dataProjection = getProj(source[type].projection);\r\n        } else {\r\n            dataProjection = projection;\r\n        }\r\n\r\n        let features = jsonFormat.readFeatures(source[type].object, {\r\n            featureProjection: projectionToUse.getCode(),\r\n            dataProjection: dataProjection.getCode()\r\n        });\r\n\r\n        //给feature加上样式和附属属性\r\n        this.handleJsonFeatures(features, source, type);\r\n\r\n        oSource.addFeatures(features);\r\n        if (onLayerCreatedFn) {\r\n            onLayerCreatedFn({\r\n                oSource: oSource\r\n            })\r\n        }\r\n        return oSource;\r\n    },\r\n    jsonp: function (url, data, callback) {\r\n        let flag = false;//用于标识是否成功返回\r\n        // 回调函数+时间戳\r\n        const cbName = 'callback_' + new Date().getTime()+Math.round(Math.random()*100);\r\n        // 暴露全局函数给window\r\n        // 判读查询字符串最后一位是否为?或者是&\r\n        let queryString = url.indexOf('?') == -1 ? '?' : '&';\r\n        // 遍历传进来的data实参赋值给查询字符串\r\n        for (let k in data) {\r\n            queryString += k + '=' + data[k] + '&';\r\n        }\r\n        // 查询字符串加上回调函数\r\n        queryString += 'callback=' + cbName;\r\n        // 创建script标签\r\n        let ele = document.createElement('script');\r\n        // 给script标签添加src属性值\r\n        ele.src = url + queryString;\r\n        window[cbName] = function (data) {\r\n            flag = true;  //成功返回\r\n            callback(data);\r\n\r\n            let scripts = document.body.getElementsByTagName(\"script\");\r\n            const len = scripts.length;\r\n            for(let i=len-1;i>-1;i--){\r\n                if(scripts[i].src.indexOf(cbName)!=-1){\r\n                    document.body.removeChild(scripts[i]);\r\n                    window[cbName] = undefined;\r\n                    try { delete window[cbName]; } catch(e) {} //删除\r\n                }\r\n            }\r\n\r\n        };\r\n        window[cbName+\"_err\"] = function(){\r\n            if(!flag){   //30s之后还未成功返回 控制台打印失败信息\r\n                console.error(\"跨域script请求失败或者请求超时！\", ele.src)\r\n            }\r\n        };\r\n        setTimeout(function () {\r\n            if(window[cbName+\"_err\"]){\r\n                window[cbName+\"_err\"]();\r\n            }\r\n        },30000)\r\n        // 添加到body尾部\r\n        document.body.appendChild(ele);\r\n    },\r\n    createUrlJson(source, projection, onLayerCreatedFn, type) {\r\n        const vm = this;\r\n        let jsonFormat;\r\n        /*\r\n        * esrijson/geojson\r\n        * 拿到的数据是 url 路径\r\n         */\r\n        if (type == \"esrijson\") {\r\n            jsonFormat = new EsriJSON();\r\n        } else {\r\n            jsonFormat = new GeoJSON();\r\n        }\r\n\r\n        let oSource = new VectorSource({\r\n            strategy: loadingstrategy.bbox\r\n        });\r\n\r\n        const url = source.url;\r\n\r\n        let successCallback = function (data) {\r\n            let response = data;\r\n            if (response.error) {\r\n                alert(response.error.message + '\\n' +\r\n                    response.error.details.join('\\n'));\r\n            } else {\r\n                let features = jsonFormat.readFeatures(response, {\r\n                    featureProjection: projection\r\n                });\r\n\r\n                //给feature加上样式和附属属性\r\n                vm.handleJsonFeatures(features, source, type);\r\n\r\n                if (features.length > 0) {\r\n                    oSource.addFeatures(features);\r\n                    if (onLayerCreatedFn) {\r\n                        onLayerCreatedFn({\r\n                            oSource: oSource\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (source.local) {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.open('GET', url);\r\n            xhr.send();\r\n            xhr.onerror = function () {\r\n                oSource.clear();\r\n            };\r\n            xhr.onload = function () {\r\n                successCallback(JSON.parse(xhr.responseText));\r\n            }\r\n        } else {\r\n            vm.jsonp(url, null, successCallback);\r\n        }\r\n\r\n        return oSource;\r\n    },\r\n    createJson(source, projection, onLayerCreatedFn, type) {\r\n        if (!(source.url || source[type])) {\r\n            console.error('[Vue - Openlayers] - You need a ' + type +\r\n                ' property to add a ' + type + ' layer.');\r\n            return;\r\n        }\r\n\r\n        if (!isDefined(source.url)) {\r\n            return this.createObjJson(source, projection, onLayerCreatedFn, type);\r\n        }\r\n\r\n        return this.createUrlJson(source, projection, onLayerCreatedFn, type);\r\n    },\r\n    createGeoJSON(source, projection, onLayerCreatedFn) {\r\n        return this.createJson(source, projection, onLayerCreatedFn, \"geojson\");\r\n    },\r\n    createEsriJSON(source, projection, onLayerCreatedFn) {\r\n        return this.createJson(source, projection, onLayerCreatedFn, \"esrijson\");\r\n    },\r\n    createImageWMS(source) {\r\n        if (!source.url || !source.params) {\r\n            console.error('[Vue - Openlayers] - ImageWMS Layer needs ' +\r\n                'valid server url and params properties');\r\n        }\r\n        return new ImageWMS({\r\n            url: source.url,\r\n            imageLoadFunction: source.imageLoadFunction,\r\n            attributions: this.createAttribution(source),\r\n            crossOrigin: (typeof source.crossOrigin === 'undefined') ? 'anonymous' : source.crossOrigin,\r\n            params: source.params,\r\n            ratio: source.ratio\r\n        });\r\n    },\r\n    createTileWMS(source) {\r\n        if ((!source.url && !source.urls) || !source.params) {\r\n            console.error('[Vue - Openlayers] - TileWMS Layer needs ' +\r\n                'valid url (or urls) and params properties');\r\n        }\r\n\r\n        var wmsConfiguration = {\r\n            tileLoadFunction: source.tileLoadFunction,\r\n            crossOrigin: (typeof source.crossOrigin === 'undefined') ? 'anonymous' : source.crossOrigin,\r\n            params: source.params,\r\n            attributions: this.createAttribution(source)\r\n        };\r\n\r\n        if (source.serverType) {\r\n            wmsConfiguration.serverType = source.serverType;\r\n        }\r\n\r\n        if (source.url) {\r\n            wmsConfiguration.url = source.url;\r\n        }\r\n\r\n        if (source.urls) {\r\n            wmsConfiguration.urls = source.urls;\r\n        }\r\n\r\n        return new TileWMS(wmsConfiguration);\r\n    },\r\n    createBdTileImage(source) {\r\n        const extent = [72.004, 0.8293, 137.8347, 55.8271];\r\n\r\n        const baiduMercator = new Projection({\r\n            code: 'baidu',\r\n            extent: applyTransform(extent, projzh.ll2bmerc),\r\n            units: 'm'\r\n        });\r\n\r\n        addProjection(baiduMercator);\r\n        addCoordinateTransforms('EPSG:4326', baiduMercator, projzh.ll2bmerc, projzh.bmerc2ll);\r\n        addCoordinateTransforms('EPSG:3857', baiduMercator, projzh.smerc2bmerc, projzh.bmerc2smerc);\r\n\r\n        let bmercResolutions = new Array(19);\r\n        for (let i = 0; i < 19; ++i) {\r\n            bmercResolutions[i] = Math.pow(2, 18 - i);\r\n        }\r\n\r\n        let urls = [0, 1, 2, 3, 4].map(function (sub) {\r\n            return 'http://online' + sub +\r\n                '.map.bdimg.com/onlinelabel/qt=tile&x={x}&y={y}&z={z}&v=009&styles=pl&udt=20170301&scaler=1&p=1';\r\n        });\r\n\r\n        return new XYZ({\r\n            projection: 'baidu',\r\n            maxZoom: 18,\r\n            tileUrlFunction: function (tileCoord) {\r\n                var x = tileCoord[1];\r\n                var y = tileCoord[2];\r\n                var z = tileCoord[0];\r\n                var hash = (x << z) + y;\r\n                var index = hash % urls.length;\r\n                index = index < 0 ? index + urls.length : index;\r\n                if (source.intranet) {\r\n                    //内网\r\n                    return source.url + '?qt=tile&x=' + x + '&y=' + y + '&z=' + z + '&styles=pl&udt=20170620&scaler=1&p=1';\r\n                }\r\n                return urls[index].replace('{x}', x).replace('{y}', y).replace('{z}', z);\r\n            },\r\n            tileGrid: new TileGrid({\r\n                resolutions: bmercResolutions,\r\n                origin: [0, 0],\r\n                extent: applyTransform(extent, projzh.ll2bmerc),\r\n                tileSize: [256, 256]\r\n            }),\r\n            crossOrigin: source.crossOrigin || null\r\n        })\r\n    },\r\n    createWmts(source, projection) {\r\n        if (!source.url && !source.urls) {\r\n            console.error('[Vue - Openlayers] - WMTS Layer needs valid url ' +\r\n                '(or urls)');\r\n        }\r\n\r\n        let projection2 = getProj(source.projection || projection);\r\n        let projectionExtent = projection2.getExtent();\r\n        let size = getWidth(projectionExtent) / 256;\r\n        let zoomRange = source.zoomRange || [0, 19];\r\n        let maxZoom = zoomRange[1];\r\n        let resolutions = new Array(maxZoom);\r\n        let matrixIds = new Array(maxZoom);\r\n        for (let z = zoomRange[0]; z < maxZoom; ++z) {\r\n            // generate resolutions and matrixIds arrays for this WMTS\r\n            resolutions[z] = size / Math.pow(2, z);\r\n            matrixIds[z] = z;\r\n        }\r\n\r\n        let wmtsConfiguration = {\r\n            tileLoadFunction: source.tileLoadFunction,\r\n            projection: source.projection || projection,\r\n            layer: source.layer,\r\n            attributions: this.createAttribution(source),\r\n            matrixSet: (source.matrixSet === 'undefined') ? projection : source.matrixSet,\r\n            format: (source.format === 'undefined') ? 'image/jpeg' : source.format,\r\n            requestEncoding: (source.requestEncoding === 'undefined') ? 'KVP' : source.requestEncoding,\r\n            tileGrid: new WMTSTileGrid({\r\n                origin: source.tileGrid ? source.tileGrid.origin : getTopLeft(projectionExtent),\r\n                resolutions: source.tileGrid ? source.tileGrid.resolutions : resolutions,\r\n                matrixIds: source.tileGrid ? source.tileGrid.matrixIds : matrixIds\r\n            }),\r\n            style: (source.style === 'undefined') ? 'normal' : source.style,\r\n            wrapX: source.wrapX || false\r\n        };\r\n\r\n        if (isDefined(source.url)) {\r\n            wmtsConfiguration.url = source.url;\r\n        }\r\n\r\n        if (isDefined(source.urls)) {\r\n            wmtsConfiguration.urls = source.urls;\r\n        }\r\n\r\n        return new WMTS(wmtsConfiguration);\r\n    },\r\n    createTileVector(source, projection) {\r\n        if ((!source.url&&!source.tileUrlFunction) || !source.format) {\r\n            console.error('[Vue - Openlayers] - TileVector Layer needs valid url and format properties');\r\n        }\r\n\r\n        let tileGrid = null;\r\n        if (source.tileGrid) {\r\n            const GRID = source.tileGrid;\r\n            let obj = {\r\n                tileSize: GRID.tileSize ? GRID.tileSize : [256, 256],\r\n                minZoom: GRID.minZoom||0\r\n            }\r\n            if(GRID.extent){\r\n                obj.extent = GRID.extent;\r\n            }\r\n            if(GRID.origin){\r\n                obj.origin = GRID.origin;\r\n            }\r\n            if(GRID.origins){\r\n                obj.origins = GRID.origins;\r\n            }\r\n            if(GRID.resolutions){\r\n                obj.resolutions = GRID.resolutions;\r\n            }\r\n            if(GRID.sizes){\r\n                obj.sizes = GRID.sizes;\r\n            }\r\n            if(GRID.tileSizes){\r\n                obj.tileSizes = GRID.tileSizes;\r\n            }\r\n\r\n            tileGrid = new TileGrid(obj);\r\n        }\r\n        let ops = {\r\n            url: source.url,\r\n            projection: source.projection || projection,\r\n            attributions: this.createAttribution(source),\r\n            tileLoadFunction: source.tileLoadFunction,\r\n            tileUrlFunction: source.tileUrlFunction,\r\n            format: new OlFormat[source.format](),\r\n        }\r\n        if(tileGrid){\r\n            ops.tileGrid = tileGrid;\r\n        }\r\n        return new VectorTile(ops);\r\n    },\r\n    createSource(source, projection, onLayerCreatedFn) {\r\n        let oSource;\r\n\r\n        switch (source.type) {\r\n            case 'ImageStatic':\r\n                oSource = this.createImageStatic(source);\r\n                break;\r\n            case 'XYZ':\r\n                oSource = this.createXYZSource(source);\r\n                break;\r\n            case 'TileArcGISRest':\r\n                oSource = this.createTileArcGISRest(source);\r\n                break;\r\n            case 'ImageArcGISRest':\r\n                oSource = this.createImageArcGISRest(source);\r\n                break;\r\n            case 'GeoJSON':\r\n                oSource = this.createGeoJSON(source, projection, onLayerCreatedFn);\r\n                break;\r\n            case 'EsriJSON':\r\n                oSource = this.createEsriJSON(source, projection, onLayerCreatedFn);\r\n                break;\r\n            case 'ImageWMS':\r\n                oSource = this.createImageWMS(source);\r\n                break;\r\n            case 'TileWMS':\r\n                oSource = this.createTileWMS(source);\r\n                break;\r\n            case 'bdTileImage':\r\n                oSource = this.createBdTileImage(source);\r\n                break;\r\n            case 'WMTS':\r\n                oSource = this.createWmts(source, projection);\r\n                break;\r\n            case 'KML':\r\n                let extractStyles = source.extractStyles || false;\r\n                oSource = new VectorSource({\r\n                    url: source.url,\r\n                    format: new KML({\r\n                        extractStyles: extractStyles\r\n                    })\r\n                });\r\n                break;\r\n            case 'TileVector':\r\n                oSource = this.createTileVector(source, projection);\r\n                break;\r\n        }\r\n\r\n        // log a warning when no source could be created for the given type\r\n        if (!oSource) {\r\n            console.warn('[Vue - Openlayers] - No source could be found for type \"' + source.type + '\"');\r\n        }\r\n\r\n        return oSource;\r\n    },\r\n    createLayer(layer, projection, name, onLayerCreatedFn) {\r\n        let oLayer;\r\n        const type = this.detectLayerType(layer);\r\n\r\n        // handle function overloading. 'name' argument may be\r\n        // our onLayerCreateFn since name is optional\r\n        if (typeof (name) === 'function' && !onLayerCreatedFn) {\r\n            onLayerCreatedFn = name;\r\n            name = undefined; // reset, otherwise it'll be used later on\r\n        }\r\n        let oSource = this.createSource(layer.source, projection, onLayerCreatedFn);\r\n        if (!oSource) {\r\n            return;\r\n        }\r\n\r\n        // Manage clustering\r\n        if ((type === 'Vector') && layer.clustering) {\r\n            oSource = new Cluster({\r\n                source: oSource,\r\n                distance: layer.clusteringDistance\r\n            });\r\n        }\r\n\r\n        let layerConfig = {\r\n            source: oSource\r\n        };\r\n\r\n        // ol.layer.Layer configuration options\r\n        if (isDefinedAndNotNull(layer.opacity)) {\r\n            layerConfig.opacity = layer.opacity;\r\n        }\r\n        if (isDefinedAndNotNull(layer.visible)) {\r\n            layerConfig.visible = layer.visible;\r\n        }\r\n        if (isDefinedAndNotNull(layer.extent)) {\r\n            layerConfig.extent = layer.extent;\r\n        }\r\n        if (isDefinedAndNotNull(layer.zIndex)) {\r\n            layerConfig.zIndex = layer.zIndex;\r\n        }\r\n        if (isDefinedAndNotNull(layer.minResolution)) {\r\n            layerConfig.minResolution = layer.minResolution;\r\n        }\r\n        if (isDefinedAndNotNull(layer.maxResolution)) {\r\n            layerConfig.maxResolution = layer.maxResolution;\r\n        }\r\n        if (isDefinedAndNotNull(layer.updateWhileAnimating)) {\r\n            layerConfig.updateWhileAnimating = layer.updateWhileAnimating;\r\n        }\r\n        if (isDefinedAndNotNull(layer.updateWhileInteracting)) {\r\n            layerConfig.updateWhileInteracting = layer.updateWhileInteracting;\r\n        }\r\n        if (isDefinedAndNotNull(layer.radius)) {\r\n            layerConfig.radius = layer.radius;\r\n        }\r\n        if (isDefinedAndNotNull(layer.blur)) {\r\n            layerConfig.blur = layer.blur;\r\n        }\r\n        if (isDefinedAndNotNull(layer.declutter)) {\r\n            layerConfig.declutter = layer.declutter;\r\n        }\r\n\r\n        switch (type) {\r\n            case 'Image':\r\n                oLayer = new ImageLayer(layerConfig);\r\n                break;\r\n            case 'Tile':\r\n                oLayer = new TileLayer(layerConfig);\r\n                break;\r\n            case 'Heatmap':\r\n                oLayer = new HeatmapLayer(layerConfig);\r\n                break;\r\n            case 'Vector':\r\n                oLayer = new VectorLayer(layerConfig);\r\n                break;\r\n            case 'TileVector':\r\n                oLayer = new VectorTileLayer(layerConfig);\r\n                break;\r\n        }\r\n\r\n        // set a layer name if given\r\n        if (isDefined(name)) {\r\n            oLayer.set('name', name);\r\n        } else if (isDefined(layer.name)) {\r\n            oLayer.set('name', layer.name);\r\n        }\r\n\r\n        let style;\r\n        if (isDefinedAndNotNull(layer.style)) {\r\n            if (!isFunction(layer.style)) {\r\n                style = createStyle(layer.style);\r\n            } else {\r\n                style = layer.style;\r\n            }\r\n            // not every layer has a setStyle method\r\n            if (oLayer.setStyle && isFunction(oLayer.setStyle)) {\r\n                oLayer.setStyle(style);\r\n            }\r\n        }\r\n\r\n        // set custom layer properties if given\r\n        if (isDefined(layer.customAttributes)) {\r\n            for (let key in layer.customAttributes) {\r\n                oLayer.set(key, layer.customAttributes[key]);\r\n            }\r\n        }\r\n\r\n        // invoke the onSourceCreated callback\r\n        if (onLayerCreatedFn) {\r\n            onLayerCreatedFn({\r\n                oLayer: oLayer\r\n            });\r\n        }\r\n\r\n        return oLayer;\r\n    }\r\n}\r\n","import Vue from 'vue'\r\n\r\nexport default new Vue()","<template>\r\n    <div class=\"vueol-map\" :id=\"options.id\" style=\"height: 100%;\">\r\n        <slot></slot>\r\n    </div>\r\n</template>\r\n<script>\r\n    import Map from 'ol/Map';\r\n    import OlView from './view.vue'\r\n    import {layerMethods} from '../../util/layer';\r\n    import {getControlClasses, coordinateTransform} from \"../../util/helpers\";\r\n\r\n    import olData from \"../../util/olData\";\r\n    import Bus from '../../util/bus'\r\n\r\n    export default {\r\n        name: 'suc-map',\r\n        mixins: [OlView],\r\n        props: {\r\n            options: {\r\n                type: Object,\r\n                default: function () {\r\n                    return {\r\n                        id: 'default',\r\n                        controls: [{ //全屏\r\n                            name: \"fullscreen\"\r\n                        }, { //鹰眼\r\n                            name: \"overviewmap\",\r\n                            collapsed: false,\r\n                            label: \"«\",\r\n                            collapseLabel: \"»\",\r\n                            tipLabel: \"鹰眼\"\r\n                        }]\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                mapObject: null,\r\n                promise: null\r\n            }\r\n        },\r\n        watch: {\r\n            projection: {\r\n                handler(value) {\r\n                    //pixel\r\n                    if (this.$view && this.$view.getProjection().getExtent() && value.extent && value.extent !== this.$view.getProjection().getExtent()) {\r\n                        this.$view = this.createView();\r\n                        this.mapObject.setView(this.$view);\r\n                    }\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        created() {\r\n            const vm = this;\r\n            vm.promise = new Promise(function (resolve, reject) {\r\n                vm.resolve = resolve;\r\n            })\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        provide: function () {\r\n            return {\r\n                getMap: this.getMap\r\n            }\r\n        },\r\n        methods: {\r\n            init() {\r\n                const vm = this;\r\n                vm.mapObject = this.createMap();\r\n                vm.$view = vm.createView();\r\n                vm.mapObject.setView(vm.$view);\r\n\r\n                //view 改变事件监听\r\n                vm.listenViewChange(vm.mapObject);\r\n                vm.createControls();\r\n\r\n                vm.resolve(vm.mapObject);   //getMap\r\n                olData.setMap(vm.mapObject, vm.options.id);\r\n                /*olData.getMap(vm.options.id).then(function (map) {\r\n                    console.log(map)\r\n                })*/\r\n\r\n                //监听事件\r\n                vm.options.events.forEach((event) => {\r\n                    vm.listenEvent(vm.mapObject, event);\r\n                })\r\n\r\n                window.onresize = function () {\r\n                    vm.mapObject.updateSize();\r\n                }\r\n\r\n            },\r\n            createMap() {\r\n                const map = new Map({\r\n                    target: this.$el\r\n                });\r\n\r\n                return map;\r\n            },\r\n            getMap() {   //异步 子组件访问map对象\r\n                return this.promise;\r\n            },\r\n            createControls() {\r\n                const vm = this;\r\n                const controls = vm.options.controls || [];\r\n                const controlClasses = getControlClasses();\r\n                const olControls = [];\r\n\r\n                //去除默认control\r\n                let ctrls = vm.mapObject.getControls();\r\n                ctrls.forEach(c => {\r\n                        vm.mapObject.removeControl(c);\r\n                })\r\n\r\n                controls.forEach(item => {\r\n                    if (item.name == \"overviewmap\") {\r\n                        const layers = [];\r\n                        if (item.layers) {\r\n                            item.layers.forEach(function (layer) {\r\n                                const olLayer = layerMethods.createLayer(layer, vm.$view.getProjection(), null);\r\n                                layers.push(olLayer);\r\n                            });\r\n                            item.layers = layers;\r\n                        }\r\n                        item.view = vm.createView();\r\n                    }\r\n\r\n                    const olControl = new controlClasses[item.name](item);\r\n                    olControls.push(olControl);\r\n                    vm.mapObject.addControl(olControl);\r\n                })\r\n                return olControls;\r\n            },\r\n\r\n            /**\r\n             *  @description: 地图事件监听 并向组件（marker图层、聚集图层、esrijson 或 geojson 矢量图层、海量点位、轨迹图层）发送信息\r\n             *  @param {String} eventType 事件类型 pointermove\\singleclick\r\n             *  @param {String} proj  坐标系\r\n             *  @param {Array} coord  坐标数组\r\n             *  @param {Array} layerFeature 事件发生处的[layer, feature]\r\n             *  @return void\r\n             *  @author xrx\r\n             *  @date 2019/5/22 10:17\r\n            */\r\n            emitEvent(eventType, proj, coord, layerFeature){\r\n                const vm = this;\r\n\r\n                if (layerFeature && layerFeature[1]) {\r\n                    const olLayer = layerFeature[0],\r\n                        feature = layerFeature[1];\r\n                    let tempInfo = feature.get(\"featureInfo\"),\r\n                        featureType;\r\n                    if (tempInfo) {\r\n                        featureType = tempInfo.type;\r\n                    }\r\n\r\n                    if (feature.get(\"features\")) { //汇聚而成的点位\r\n                        featureType = \"clusterFeature\";\r\n                    }\r\n\r\n                    if (featureType === \"marker\") { //marker图层矢量对象\r\n                        Bus.$emit((vm.options.id || \"default\") + \".marker.\" + eventType, {\r\n                            feature: feature\r\n                        })\r\n                    } else if (feature.get(\"features\")) {  //聚集图层矢量对象\r\n                        Bus.$emit((vm.options.id || \"default\") + \".cluster.\" + eventType, {\r\n                            feature,\r\n                            olLayer\r\n                        })\r\n                    } else if (featureType === \"esriFeature\"||featureType === \"geoFeature\") {    // esrijson 或 geojson 矢量图层\r\n                        Bus.$emit((vm.options.id || \"default\") + \".vectorLayer.\" + eventType, {\r\n                            feature,\r\n                            olLayer,\r\n                            coord,\r\n                            info: tempInfo.data\r\n                        })\r\n                    }else if(olLayer&&olLayer.get(\"collectionLayer\")){   //海量点位\r\n                        Bus.$emit((vm.options.id || \"default\") + \".collection.\" + eventType, {\r\n                            feature,\r\n                            olLayer\r\n                        })\r\n                    }else if(olLayer&&olLayer.get(\"trackLayer\")){    //轨迹图层\r\n                        Bus.$emit((vm.options.id || \"default\") + \".track.\" + eventType, {\r\n                            feature,\r\n                            olLayer\r\n                        })\r\n                    }\r\n\r\n                } else {\r\n                    //空白地图\r\n                    Bus.$emit((vm.options.id || \"default\") + \".\" + eventType + \".blank\");\r\n                }\r\n            },\r\n            listenEvent(map, eventType) {\r\n                const vm = this;\r\n                map.on(eventType, function (event) {\r\n                    let proj = map.getView().getProjection().getCode();\r\n\r\n                    //地理坐标\r\n                    let coord = event.coordinate;\r\n                    if (proj === \"pixel\" || proj === \"xkcd-image\") {\r\n                        coord = coord.map(function (v) {\r\n                            return parseInt(v, 10);\r\n                        });\r\n                    }\r\n\r\n                    //像素坐标\r\n                    let pixel;\r\n                    if (eventType == \"singleclick\") {\r\n                        pixel = event.pixel;\r\n                    } else if (eventType == \"pointermove\") {\r\n                        pixel = map.getEventPixel(event.originalEvent);\r\n                    }\r\n\r\n                    //向下级组件非定向性传递消息\r\n                    Bus.$emit((vm.options.id || \"default\") + \".\" + eventType, event);\r\n\r\n                    //如果事件不是发生在openlayers画布上（这里主要是考虑二三维融合的情况），则退出事件回调\r\n                    if(event.originalEvent.srcElement.className==\"ol-cesium\"){\r\n                        return false;\r\n                    }\r\n\r\n                    let layerFeature = map.forEachFeatureAtPixel(pixel, function (feature, olLayer) {\r\n                        return [olLayer, feature];\r\n                    });\r\n\r\n                    //自定义事件 向父级发送消息\r\n                    if (layerFeature && layerFeature[1]) {\r\n                        const olLayer = layerFeature[0],\r\n                            feature = layerFeature[1];\r\n\r\n                        //矢量对象点击\r\n                        let outCoord = coord;\r\n                        if (proj != \"pixel\" && proj != \"xkcd-image\") {\r\n                            //确保输出坐标的坐标系为4326\r\n                            outCoord = coordinateTransform(coord, proj, \"EPSG:4326\");\r\n                        }\r\n                        vm.$emit(eventType, {\r\n                            coord: outCoord,\r\n                            projection: (proj === \"pixel\" || proj === \"xkcd-image\") ? proj : \"EPSG:4326\",\r\n                            event: event,\r\n                            layer: olLayer,\r\n                            feature: feature\r\n                        })\r\n                    } else{\r\n                        //空白处点击\r\n                        let outCoord = coord;\r\n                        if (proj != \"pixel\" && proj != \"xkcd-image\") {\r\n                            //确保输出坐标的坐标系为4326\r\n                            outCoord = coordinateTransform(coord, proj, \"EPSG:4326\");\r\n                        }\r\n                        vm.$emit(eventType + \"-blank\", {\r\n                            coord: outCoord,\r\n                            projection: (proj === \"pixel\" || proj === \"xkcd-image\") ? proj : \"EPSG:4326\"\r\n                        })\r\n                    }\r\n\r\n                    //向下级组件定向性传递消息\r\n                    vm.emitEvent(eventType, proj, coord, layerFeature);\r\n                });\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            olData.resetMap(vm.options.id);\r\n        }\r\n    }\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./map.vue?vue&type=template&id=d8aa6f88&\"\nimport script from \"./map.vue?vue&type=script&lang=js&\"\nexport * from \"./map.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Map from './map.vue'\r\nimport View from './view.vue'\r\n\r\nfunction plugin (Vue) {\r\n    if (plugin.installed) {\r\n        return\r\n    }\r\n    plugin.installed = true;\r\n\r\n    Vue.component(Map.name, Map);\r\n\r\n    Vue.component(View.name, View);\r\n}\r\n\r\nexport default plugin;\r\n\r\nexport {\r\n    Map,\r\n    View,\r\n    plugin as install\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-baselayer\",staticStyle:{\"display\":\"none !important\"}},[_vm._t(\"default\",null,{\"select\":_vm.selectFeature,\"move\":_vm.moveFeature})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-baselayer\" style=\"display: none !important;\">\r\n        <slot :select=\"selectFeature\" :move=\"moveFeature\"></slot>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {layerMethods} from '../../util/layer';\r\n    import {\r\n        isDefined, isDefinedAndNotNull, isFunction, createStyle,\r\n        deepClone, convolve, normalize, coordinateTransform\r\n    } from '../../util/helpers';\r\n    import Bus from '../../util/bus'\r\n\r\n    export default {\r\n        name: 'ol-layer',\r\n        inject: ['getMap'],\r\n        props: {\r\n            options: {\r\n                type: Object,\r\n                default: function () {\r\n                    return {\r\n                        name: \"satelliteMap_base\",\r\n                        source: {\r\n                            type: \"XYZ\",\r\n                            url: \"http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}\"\r\n                        },\r\n                        onLayerCreated(layer) {\r\n                            console.log(layer);\r\n                        },\r\n                        visible: true\r\n                    }\r\n                }\r\n            },\r\n            params: Object,   //source.params 主要用于arcgis服务的配置\r\n            filter: {    //图片图层滤镜\r\n                type: String,\r\n                default: \"\"\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                layer: null,\r\n                selectFeature: null,   //选中的矢量的属性  用于向外传递参数\r\n                moveFeature: null,   //悬浮的矢量的属性  用于向外传递参数\r\n                curClickFeature: null,  //点击的矢量\r\n                curMoveFeature: null,  //悬浮的矢量\r\n                curMoveNormalStyle: null  //悬浮的矢量样式\r\n            }\r\n        },\r\n        created() {\r\n            this.init();\r\n        },\r\n        watch: {\r\n            options: {\r\n                handler(nval) {\r\n                    let vm = this;\r\n                    vm.selectFeature = null;\r\n                    vm.getMap().then((mapObject) => {\r\n                        vm.updateLayer(mapObject, deepClone(this.options));\r\n                    })\r\n                },\r\n                deep: true\r\n            },\r\n            params: {\r\n                handler(nval) {\r\n                    if (this.layer && this.layer.getSource().updateParams) {\r\n                        this.layer.getSource().updateParams();\r\n                    }\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        methods: {\r\n            init() {\r\n                let vm = this;\r\n                vm.getMap().then((mapObject) => {\r\n                    vm.map = mapObject;\r\n                    let options = deepClone(this.options);\r\n                    if (this.params) {\r\n                        options.source.params = this.params;\r\n                    }\r\n                    vm.updateLayer(mapObject, options);\r\n                    vm.handleEvent(mapObject);\r\n                })\r\n            },\r\n            updateLayer(mapObject, options) {\r\n                let projection = mapObject.getView().getProjection();\r\n                if (this.layer && options.refresh) {\r\n                    if (this.layer.getSource().clear) {\r\n                        this.layer.getSource().clear();\r\n                    }\r\n                    let oSource = layerMethods.createSource(options.source, projection, options.onLayerCreated);\r\n                    this.layer.setSource(oSource);\r\n                    if (options.opacity) {\r\n                        this.layer.setOpacity(options.opacity);\r\n                    }\r\n                    if (options.visible) {\r\n                        this.layer.setVisible(options.visible);\r\n                    }\r\n\r\n                    let style;\r\n                    if (isDefinedAndNotNull(this.layer.style)) {\r\n                        if (!isFunction(options.style)) {\r\n                            style = createStyle(options.style);\r\n                        } else {\r\n                            style = options.style;\r\n                        }\r\n                        // not every layer has a setStyle method\r\n                        if (this.layer.setStyle && isFunction(this.layer.setStyle)) {\r\n                            this.layer.setStyle(style);\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (this.layer) {\r\n                        if (this.layer.getSource().clear) {\r\n                            this.layer.getSource().clear();\r\n                        }\r\n                        mapObject.removeLayer(this.layer);\r\n                    }\r\n                    this.layer = layerMethods.createLayer(options, projection, options.name, options.onLayerCreated);\r\n                    mapObject.addLayer(this.layer);\r\n\r\n                    const vm = this;\r\n                    if (vm.filter) {\r\n                        vm.layer.on('postcompose', function (event) {\r\n                            convolve(event.context, normalize(vm.filter));\r\n                            mapObject.render();\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            handleStyle(style, feature) {\r\n                let styleResult = [];\r\n                if (isDefined(style)) {\r\n                    if (style instanceof Array) {\r\n                        let len = source.style.length;\r\n                        for (let i = 0; i < len; i++) {\r\n                            styleResult[i] = createStyle(style[i]);\r\n                        }\r\n                    } else if (isFunction(style)) {\r\n                        styleResult = createStyle(style(feature));\r\n                    } else {\r\n                        styleResult = createStyle(style);\r\n                    }\r\n                }\r\n\r\n                if (styleResult instanceof Array && styleResult.length == 0) {\r\n                    return undefined;\r\n                }\r\n                return styleResult;\r\n            },\r\n            listenerMove(data) {\r\n                const vm = this;\r\n                //矢量 悬浮样式\r\n                const feature = data.feature;\r\n                let style = data.info.style;\r\n                vm.curMoveNormalStyle = vm.handleStyle(style, feature);\r\n\r\n                let selectStyle = null;\r\n                if (data.info.moveStyle) {\r\n                    if (vm.curMoveFeature && vm.curMoveFeature != vm.curClickFeature) {\r\n                        //恢复前次标记的feature的样式\r\n                        vm.curMoveFeature.setStyle(vm.handleStyle(style, vm.curMoveFeature));\r\n                        vm.curMoveFeature = null;\r\n                    }\r\n                    if (feature != vm.curClickFeature) {\r\n                        selectStyle = vm.handleStyle(data.info.moveStyle, feature);\r\n                        feature.setStyle(selectStyle);\r\n\r\n                        vm.curMoveFeature = feature;\r\n                    }\r\n                }\r\n\r\n                let outCoord = data.coord;\r\n                const proj = vm.map.getView().getProjection();\r\n                if (proj != \"pixel\") {\r\n                    //确保输出坐标的坐标系为4326\r\n                    outCoord = coordinateTransform(data.coord, proj, \"EPSG:4326\");\r\n                }\r\n                vm.moveFeature = {\r\n                    coord: outCoord,\r\n                    projection: proj === \"pixel\" ? proj : \"EPSG:4326\",\r\n                    ...feature.getProperties()\r\n                };\r\n            },\r\n            listenerMove_blank() {\r\n                const vm = this;\r\n                if (vm.curMoveFeature && vm.curMoveFeature != vm.curClickFeature) {\r\n                    //恢复前次标记的feature的样式\r\n                    vm.curMoveFeature.setStyle(vm.curMoveNormalStyle);\r\n                }\r\n                vm.curMoveFeature = null;\r\n\r\n                vm.moveFeature = null;\r\n            },\r\n            listenerClick(data) {\r\n                const vm = this;\r\n                //矢量 点击样式\r\n                const feature = data.feature;\r\n                let style = data.info.style;\r\n\r\n                let selectStyle = null;\r\n                if (data.info.clickStyle) {\r\n                    if (vm.curClickFeature) {\r\n                        //恢复前次标记的feature的样式\r\n                        vm.curClickFeature.setStyle(vm.curClickStyle);\r\n                    }\r\n\r\n                    vm.curClickStyle = vm.curMoveNormalStyle;\r\n                    selectStyle = vm.handleStyle(data.info.clickStyle, feature);\r\n                    feature.setStyle(selectStyle);\r\n\r\n                    vm.curClickFeature = feature;\r\n                }\r\n\r\n                let outCoord = data.coord;\r\n                const proj = vm.map.getView().getProjection();\r\n                if (proj != \"pixel\") {\r\n                    //确保输出坐标的坐标系为4326\r\n                    outCoord = coordinateTransform(data.coord, proj, \"EPSG:4326\");\r\n                }\r\n                vm.selectFeature = {\r\n                    coord: outCoord,\r\n                    projection: proj === \"pixel\" ? proj : \"EPSG:4326\",\r\n                    ...feature.getProperties()\r\n                };\r\n            },\r\n            listenerClick_blank() {\r\n                const vm = this;\r\n                if (vm.curClickFeature) {\r\n                    //恢复前次标记的feature的样式\r\n                    vm.curClickFeature.setStyle(vm.curClickStyle);\r\n                    vm.curClickFeature = null;\r\n                }\r\n\r\n                vm.selectFeature = null;\r\n            },\r\n            handleEvent(mapObject) {\r\n                const vm = this;\r\n                const mapId = mapObject.getTarget().id || \"default\";\r\n                Bus.$on(mapId + \".vectorLayer.pointermove\", vm.listenerMove)\r\n\r\n                //地图空白处悬浮\r\n                Bus.$on(mapId + \".pointermove.blank\", vm.listenerMove_blank)\r\n\r\n                Bus.$on(mapId + \".vectorLayer.singleclick\", vm.listenerClick)\r\n\r\n                //地图空白处 点击\r\n                Bus.$on(mapId + \".singleclick.blank\", vm.listenerClick_blank)\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            let vm = this;\r\n            vm.getMap().then((mapObject) => {\r\n                let source = vm.layer.getSource();\r\n                if (source.clear&&source.getFeatures) {\r\n                    source.getFeatures().forEach(function (f) {\r\n                        let s = f.getStyle();\r\n                        s = null;\r\n                        f.setStyle(null);\r\n                        f = null;\r\n                    })\r\n                    source.clear();\r\n                }\r\n                source = null;\r\n                vm.layer.setSource(undefined);\r\n                mapObject.removeLayer(this.layer);\r\n\r\n                const mapId = mapObject.getTarget().id || \"default\";\r\n                Bus.$off(mapId + \".vectorLayer.pointermove\", vm.listenerMove);\r\n                Bus.$off(mapId + \".pointermove.blank\", vm.listenerMove_blank)\r\n                Bus.$off(mapId + \".vectorLayer.singleclick\", vm.listenerClick);\r\n                Bus.$off(mapId + \".singleclick.blank\", vm.listenerClick_blank);\r\n            });\r\n            this.selectFeature = null;\r\n            this.moveFeature = null;\r\n            this.curClickFeature = null;\r\n            this.curMoveFeature = null;\r\n            this.curMoveNormalStyle = null;\r\n        }\r\n    }\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./basicLayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./basicLayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./basicLayer.vue?vue&type=template&id=93e97b20&\"\nimport script from \"./basicLayer.vue?vue&type=script&lang=js&\"\nexport * from \"./basicLayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import basicLayer from './basicLayer.vue'\r\n\r\nfunction plugin (Vue) {\r\n    if (plugin.installed) {\r\n        return\r\n    }\r\n    plugin.installed = true;\r\n\r\n    Vue.component(basicLayer.name, basicLayer);\r\n}\r\n\r\nexport default plugin;\r\n\r\nexport {\r\n    basicLayer,\r\n    plugin as install\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-markerLayer\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-markerLayer\">\r\n        <slot/>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import * as loadingstrategy from 'ol/loadingstrategy.js';\r\n\r\n    export default {\r\n        name: 'ol-markers',\r\n        provide: function () {\r\n            return {\r\n                getLayer: this.getLayer\r\n            }\r\n        },\r\n        inject: ['getMap'],\r\n        props: {\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                layer: null\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((mapObject) => {\r\n                let source = vm.layer.getSource();\r\n                source.getFeatures().forEach(function (f) {\r\n                    let s = f.getStyle();\r\n                    s = null;\r\n                    f.setStyle(null);\r\n                    f = null;\r\n                })\r\n                source.clear();\r\n                mapObject.removeLayer(vm.layer);\r\n            })\r\n        },\r\n        created() {\r\n            const vm = this;\r\n            vm.getMap().then((mapObject) => {\r\n                vm.createLayer(mapObject);\r\n            })\r\n            vm.promise = new Promise(function (resolve, reject) {\r\n                vm.resolve = resolve;\r\n            })\r\n        },\r\n        methods: {\r\n            createLayer(mapObject) {\r\n                this.layer = new VectorLayer({\r\n                    source: new VectorSource({\r\n                        strategy: loadingstrategy.bbox\r\n                    }),\r\n                    zIndex: this.zIndex\r\n                });\r\n                this.layer.set(\"markers\", true);\r\n                mapObject.addLayer(this.layer);\r\n                this.resolve(this.layer);\r\n            },\r\n            getLayer() {\r\n                let vm = this;\r\n\r\n                return vm.promise;\r\n            }\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./markerGroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./markerGroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./markerGroup.vue?vue&type=template&id=6486dbfb&\"\nimport script from \"./markerGroup.vue?vue&type=script&lang=js&\"\nexport * from \"./markerGroup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-marker\",staticStyle:{\"display\":\"none\"}},[_vm._t(\"default\",null,{\"selectPoint\":_vm.selectPoint})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import {isDefined, deepClone} from \"./helpers\";\r\nimport {\r\n    Circle as CircleStyle,\r\n    Fill,\r\n    Stroke,\r\n    Icon\r\n} from 'ol/style.js';\r\n\r\nconst base64icon = 'data:image/png;base64,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';\r\n\r\nconst defaults = {\r\n    view: {\r\n        projection: 'EPSG:3857',\r\n        minZoom: undefined,\r\n        maxZoom: undefined,\r\n        rotation: 0,\r\n        extent: undefined\r\n    },\r\n    center: {\r\n        lat: 0,\r\n        lon: 0,\r\n        zoom: 1,\r\n        autodiscover: false,\r\n        bounds: [],\r\n        centerUrlHash: false,\r\n        projection: 'EPSG:4326'\r\n    },\r\n    styles: {\r\n        path: {\r\n            fill: {\r\n                color: \"rgba(255,0,0,0.2)\"\r\n            },\r\n            stroke: {\r\n                color: 'blue',\r\n                width: 4\r\n            }\r\n        },\r\n        marker: {\r\n            image: new Icon({\r\n                anchor: [0.5, 1],\r\n                anchorXUnits: 'fraction',\r\n                anchorYUnits: 'fraction',\r\n                opacity: 0.90,\r\n                src: base64icon\r\n            })\r\n        },\r\n        feature: {\r\n            fill: new Fill({\r\n                color: \"#0099ff\"\r\n            }),\r\n            stroke: new Stroke({\r\n                color: \"#1F497D\",\r\n                width: 1\r\n            }),\r\n            image: new CircleStyle({\r\n                radius: 7,\r\n                fill: new Fill({\r\n                    color: \"#0099ff\"\r\n                }),\r\n                stroke: new Stroke({\r\n                    color: \"#1F497D\",\r\n                    width: 1\r\n                })\r\n            })\r\n        }\r\n    },\r\n    events: {\r\n        map: [],\r\n        markers: [],\r\n        layers: []\r\n    },\r\n    controls: {\r\n        attribution: true,\r\n        rotate: false,\r\n        zoom: true\r\n    },\r\n    interactions: {\r\n        mouseWheelZoom: false\r\n    },\r\n    renderer: 'canvas'\r\n};\r\n\r\nexport const olMapDefaults = {\r\n    getDefaults() {\r\n        return defaults;\r\n    }\r\n}","<template>\r\n    <div class=\"vueol-marker\" style=\"display: none;\">\r\n        <slot :selectPoint=\"selectPoint\"></slot>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {Point} from 'ol/geom';\r\n    import {transform as transformProjection} from 'ol/proj'\r\n    import {olMapDefaults} from '../../util/olMapDefaults';\r\n    import {\r\n        isDefined,\r\n        isEqual,\r\n        createFeature,\r\n        removeOverlay,\r\n        setLabelEvent,\r\n        createStyle,\r\n        deepClone,\r\n        validCoords\r\n    } from '../../util/helpers';\r\n\r\n    import Bus from '../../util/bus'\r\n\r\n    export default {\r\n        name: 'ol-marker',\r\n        inject: ['getMap', 'getLayer'],\r\n        props: {\r\n            options: {\r\n                type: Object,\r\n                default: function () {\r\n                    return {\r\n                        id: 'default',\r\n                        lat: 30,\r\n                        lon: 120,\r\n                        projection: 'EPSG:4326',\r\n                        info: \"\",\r\n                        overLabel: 'name',\r\n                        style: {\r\n                            image: {\r\n                                circle: {\r\n                                    radius: 10,\r\n                                    fill: {\r\n                                        color: 'rgba(103, 58, 183, 0.5)'\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            blankClear: {\r\n                type: Boolean,\r\n                default: true\r\n            }  //点击空白处是否设置selectPoint=null\r\n        },\r\n        data() {\r\n            return {\r\n                marker: null,\r\n                markerLayer: null,\r\n                defaultProperties: {\r\n                    id: \"\",\r\n                    projection: 'EPSG:4326',\r\n                    lat: 0,\r\n                    lon: 0,\r\n                    show: true,\r\n                    showOnMouseOver: false,\r\n                    showOnMouseClick: false,\r\n                    keepOneOverlayVisible: true,\r\n                    ngClick: false,\r\n                    clickLabel: {},\r\n                    overLabel: {},\r\n                    info: {}\r\n                },\r\n                resultData: {},\r\n                selectPoint: null\r\n            }\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        watch: {\r\n            options: {\r\n                async handler(nval) {\r\n                    const vm = this;\r\n                    let mapObject = await vm.getMap();\r\n                    vm.updateMarker(mapObject, nval);\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        methods: {\r\n            listenerMove(data) {\r\n                const vm = this;\r\n                if (data.feature == vm.marker) {\r\n                    vm.$emit(\"pointermove\");\r\n                    vm.label = vm.showNameOverlay(vm.map, data.feature);\r\n                } else {\r\n                    if (vm.label) {   //默认name悬浮弹框\r\n                        vm.map.removeOverlay(vm.label);\r\n                    }\r\n                }\r\n            },\r\n            listenerMove_blank() {\r\n                const vm = this;\r\n                if (vm.label) {   //默认name悬浮弹框\r\n                    vm.map.removeOverlay(vm.label);\r\n                }\r\n            },\r\n            listenerClick(data) {\r\n                const vm = this;\r\n                if (data.feature == vm.marker) {\r\n                    vm.$emit(\"singleclick\");\r\n\r\n                    //获取选中图标的信息\r\n                    vm.selectPoint = Object.assign({}, deepClone(vm.options), {\r\n                        coord: [vm.options.lon, vm.options.lat]\r\n                    });\r\n                } else {\r\n                    vm.selectPoint = null;   //选中图标为空\r\n                }\r\n            },\r\n            listenerClick_blank() {\r\n                const vm = this;\r\n                if (vm.blankClear) {\r\n                    vm.selectPoint = null;   //选中图标为空\r\n                }\r\n            },\r\n            init() {\r\n                const vm = this;\r\n                let label; //悬浮弹框\r\n                vm.getMap().then((mapObject) => {\r\n                    if (!vm.getLayer) {\r\n                        console.error('[Vue - Openlayers] 缺少ol-markers');\r\n                        return false;\r\n                    }\r\n                    vm.map = mapObject;\r\n                    vm.getLayer().then((layer) => {\r\n                        this.markerLayer = layer;\r\n                        vm.updateMarker(mapObject, vm.options);\r\n                    })\r\n\r\n                    const mapId = mapObject.getTarget().id || \"default\";\r\n                    Bus.$on(mapId + \".marker.pointermove\", vm.listenerMove);\r\n\r\n                    //地图空白处悬浮\r\n                    Bus.$on(mapId + \".pointermove.blank\", vm.listenerMove_blank);\r\n\r\n                    Bus.$on(mapId + \".marker.singleclick\", vm.listenerClick);\r\n\r\n                    //地图空白处 点击\r\n                    Bus.$on(mapId + \".singleclick.blank\", vm.listenerClick_blank);\r\n\r\n                })\r\n            },\r\n            updateMarker(mapObject, properties) {\r\n                const vm = this;\r\n                let marker = vm.marker;\r\n                const data = vm.defaultProperties;\r\n                const viewProjection = mapObject.getView().getProjection().getCode();\r\n                const mapDefaults = olMapDefaults.getDefaults();\r\n\r\n                properties.lon = parseFloat(properties.lon);\r\n                properties.lat = parseFloat(properties.lat);\r\n\r\n                if (!marker) {\r\n                    //生成新的marker\r\n                    data.id = properties.id ? properties.id : data.id;\r\n                    data.projection = properties.projection ? properties.projection :\r\n                        data.projection;\r\n                    data.lat = !isNaN(properties.lat) ? properties.lat : data.lat;\r\n                    data.lon = !isNaN(properties.lon) ? properties.lon : data.lon;\r\n                    data.name = properties.name;\r\n                    data.info = properties.info ? properties.info : data.info;\r\n                    if ((!data.lat && data.lat != 0) || (!data.lon && data.lon != 0)) {\r\n                        console.log(\"缺失经纬度\");\r\n                        return false;\r\n                    }\r\n                    if(data.projection==\"EPSG:4326\"){\r\n                        if (!validCoords(data.lon, data.lat)) {\r\n                            console.error(\"marker 经纬度不规范！\", data);\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n                    //鼠标悬浮事件 标签\r\n                    if (isDefined(properties.overLabel)) {\r\n                        data.overLabel = properties.overLabel;\r\n                    }\r\n\r\n                    if (isDefined(properties.style)) {\r\n                        data.style = properties.style;\r\n                    } else {\r\n                        data.style = mapDefaults.styles.marker;\r\n                    }\r\n\r\n                    marker = createFeature(data, viewProjection);\r\n                    if (!isDefined(marker)) {\r\n                        console.error('[Vue - Openlayers] Received invalid data on ' +\r\n                            'the marker.');\r\n                    }\r\n\r\n                    // Add a link between the feature and the marker properties\r\n                    marker.set('featureInfo', {\r\n                        type: 'marker',\r\n                        data: data\r\n                    });\r\n\r\n                    vm.markerLayer.getSource().addFeature(marker);\r\n                    vm.marker = marker;\r\n                } else {\r\n                    let requestedPosition;\r\n                    if (properties.projection === 'pixel') {\r\n                        requestedPosition = properties.coord || [properties.lon, properties.lat];\r\n                    } else {\r\n                        requestedPosition = transformProjection([properties.lon, properties.lat], data.projection,\r\n                            mapObject.getView().getProjection());\r\n                    }\r\n\r\n                    if (!isEqual(vm.marker.getGeometry().getCoordinates(), requestedPosition)) {\r\n                        let geometry = new Point(requestedPosition);\r\n                        marker.setGeometry(geometry);\r\n                    }\r\n                    if (isDefined(properties.style)) {\r\n                        let requestedStyle = [];\r\n                        if (properties.style instanceof Array) {\r\n                            let len = properties.style.length;\r\n                            for (let i = 0; i < len; i++) {\r\n                                requestedStyle[i] = createStyle(properties.style[i]);\r\n                            }\r\n                        } else {\r\n                            requestedStyle = createStyle(properties.style);\r\n                        }\r\n                        marker.setStyle(requestedStyle);\r\n                    }\r\n\r\n                    //显示着的overlay随着marker的移动而移动\r\n                    if (marker.get(\"overLay\") && marker.get(\"overLay\").getMap()) {\r\n                        marker.get(\"overLay\").setPosition(requestedPosition);\r\n                    }\r\n\r\n                    //更新存储的属性\r\n                    data.lat = properties.lat ? properties.lat : data.lat;\r\n                    data.lon = properties.lon ? properties.lon : data.lon;\r\n                    data.info = properties.info ? properties.info : data.info;\r\n                    data.name = properties.name;\r\n\r\n                    if (isDefined(properties.style)) {\r\n                        data.style = properties.style;\r\n                    }\r\n                }\r\n\r\n                vm.resultData = data;\r\n            },\r\n            showNameOverlay(map, feature) {\r\n                const vm = this;\r\n                //悬浮时，先移除其它的弹出框\r\n                removeOverlay(map, null, \"overLabel\");\r\n\r\n                let label = null;\r\n                if (vm.options.overLabel == \"none\") {\r\n                    return false;\r\n                }\r\n                if (!vm.options.overLabel || vm.options.overLabel == \"name\") {\r\n                    if (vm.options.name) {\r\n                        let data = {\r\n                            lat: this.resultData.lat,\r\n                            lon: this.resultData.lon,\r\n                            projection: this.resultData.projection,\r\n                            label: {\r\n                                classNm: \"featureOver\",\r\n                                message: this.resultData.name\r\n                            }\r\n                        }\r\n                        label = setLabelEvent(feature, map, data);\r\n                    }\r\n                }\r\n                if (label) {\r\n                    label.set(\"overLabel\", \"true\"); //与其他的弹出框区分\r\n                }\r\n                return label;\r\n            },\r\n\r\n            /**\r\n             *  @description: 清除选中\r\n             *  @author: xiarx\r\n             *  @date 2019/6/17 15:53\r\n             */\r\n            clearSelect() {\r\n                this.selectPoint = null;   //选中图标为空\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.selectPoint = null;  //选中为空\r\n            if (vm.marker) {\r\n                vm.markerLayer.getSource().removeFeature(vm.marker);\r\n            }\r\n\r\n            if (vm.map) {\r\n                const mapId = vm.map.getTarget().id || \"default\";\r\n                Bus.$off(mapId + \".marker.pointermove\", vm.listenerMove);\r\n                Bus.$off(mapId + \".pointermove.blank\", vm.listenerMove_blank)\r\n                Bus.$off(mapId + \".marker.singleclick\", vm.listenerClick);\r\n                Bus.$off(mapId + \".singleclick.blank\", vm.listenerClick_blank);\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./marker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./marker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./marker.vue?vue&type=template&id=ad60c268&\"\nimport script from \"./marker.vue?vue&type=script&lang=js&\"\nexport * from \"./marker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import markerGroup from './markerGroup.vue';\r\nimport marker from './marker.vue';\r\n\r\nfunction plugin (Vue) {\r\n    if (plugin.installed) {\r\n        return\r\n    }\r\n    plugin.installed = true;\r\n\r\n    Vue.component(markerGroup.name, markerGroup);\r\n    Vue.component(marker.name, marker);\r\n}\r\n\r\nexport default plugin;\r\n\r\nexport {\r\n    markerGroup,\r\n    marker,\r\n    plugin as install\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-overlay-container\",staticStyle:{\"display\":\"none\"}},[_c('div',{staticClass:\"vueol-overlay\"},[_vm._t(\"default\",null,{\"id\":_vm.id,\"position\":_vm.position,\"offset\":_vm.offset,\"positioning\":_vm.positioning})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function uuid() {\r\n    let s = [];\r\n    let hexDigits = \"0123456789abcdef\";\r\n    for (let i = 0; i < 36; i++) {\r\n        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n    }\r\n    s[14] = \"4\";  // bits 12-15 of the time_hi_and_version field to 0010\r\n    s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01\r\n    s[8] = s[13] = s[18] = s[23] = \"-\";\r\n\r\n    let uuid = s.join(\"\");\r\n    return uuid;\r\n}","<template>\r\n    <div class=\"vueol-overlay-container\" style=\"display: none;\">\r\n        <div class=\"vueol-overlay\">\r\n            <slot :id=\"id\" :position=\"position\" :offset=\"offset\" :positioning=\"positioning\"/>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import Overlay from 'ol/Overlay'\r\n    import {uuid} from '../../util/uuid'\r\n    import {isEqual, removeOverlay, coordinateTransform} from \"../../util/helpers\";\r\n\r\n    export default {\r\n        name: 'ol-overlay',\r\n        inject: ['getMap'],\r\n        props: {\r\n            id: {\r\n                type: [String, Number],\r\n                default: () => uuid(),\r\n            },\r\n            category: String,\r\n            offset: {\r\n                type: Array,\r\n                default: () => [0, 0],\r\n                validator: value => value.length === 2,\r\n            },\r\n            /**\r\n             * Coordinates in the map view projection.\r\n             * @type {number[]}\r\n             */\r\n            position: {\r\n                type: Array,\r\n                validator: value => value.length === 2,\r\n                required: true,\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            },\r\n            positioning: {\r\n                type: String,\r\n                default: 'top-left'\r\n            },\r\n            stopEvent: {\r\n                type: Boolean,\r\n                default: true,\r\n            },\r\n            insertFirst: {\r\n                type: Boolean,\r\n                default: true,\r\n            },\r\n            autoPan: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            autoPanMargin: {\r\n                type: Number,\r\n                default: 20,\r\n            },\r\n            autoPanAnimation: Object,\r\n            single: {   //是否是单独存在的overlay\r\n                type: Boolean,\r\n                default: true\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                $overlay: null\r\n            }\r\n        },\r\n        watch: {\r\n            offset(value) {\r\n                if (this.$overlay && !isEqual(value, this.$overlay.getOffset())) {\r\n                    this.$overlay.setOffset(value);\r\n                }\r\n            },\r\n            position: {\r\n                handler(value) {\r\n                    const vm = this;\r\n                    vm.getMap().then(function (map) {\r\n                        let position = value;\r\n                        if (vm.projection != \"pixel\") {\r\n                            position = coordinateTransform(value, vm.projection, map.getView().getProjection().getCode());\r\n                        }\r\n                        if (vm.$overlay && !isEqual(position, vm.$overlay.getPosition())) {\r\n                            vm.$overlay.setPosition(position);\r\n                        }\r\n                    })\r\n                },\r\n                deep: true\r\n            },\r\n            positioning(value) {\r\n                if (this.$overlay && value !== this.$overlay.getPositioning()) {\r\n                    this.$overlay.setPositioning(value)\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            init() {\r\n                const vm = this;\r\n                vm.getMap().then(function (map) {\r\n                    removeOverlay(map, null, \"single\");   //清除不与其他弹框共存的overlay\r\n\r\n                    vm.$overlay = vm.createObj(map);\r\n\r\n                    vm.$overlay.set(\"single\", vm.single);\r\n                    vm.$overlay.set(vm.category, true);\r\n                    map.addOverlay(vm.$overlay);\r\n\r\n                    let position = vm.position;\r\n                    if (position[0] && position[1]) {\r\n                        if (vm.projection != \"pixel\") {\r\n                            position = coordinateTransform(vm.position, vm.projection, map.getView().getProjection().getCode());\r\n                        }\r\n                        vm.$overlay.setPosition(position);\r\n                    }\r\n                })\r\n            },\r\n            createObj(map) {\r\n                let classes = this.$el.className;\r\n                let arr = classes.split(\" \").slice(1);\r\n                let ele = this.$el.children[0];\r\n                ele.className = \"vueol-overlay\"+\" \"+arr.join(\" \");\r\n                this.$el.className = \"vueol-overlay-container\";\r\n                return new Overlay({\r\n                    id: this.id,\r\n                    element: this.$el.children[0],\r\n                    offset: this.offset,\r\n                    positioning: this.positioning,\r\n                    stopEvent: this.stopEvent,\r\n                    insertFirst: this.insertFirst,\r\n                    autoPan: this.autoPan,\r\n                    autoPanMargin: this.autoPanMargin,\r\n                    autoPanAnimation: this.autoPanAnimation\r\n                })\r\n            }\r\n        },\r\n        mounted() {\r\n            this.$nextTick(()=>{\r\n                this.init();\r\n            })\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                vm.$overlay.setElement(undefined);\r\n                map.removeOverlay(vm.$overlay);\r\n            })\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./overlay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./overlay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./overlay.vue?vue&type=template&id=3de91d7e&\"\nimport script from \"./overlay.vue?vue&type=script&lang=js&\"\nexport * from \"./overlay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import overlay from './overlay.vue';\r\n\r\nfunction plugin (Vue) {\r\n    if (plugin.installed) {\r\n        return\r\n    }\r\n    plugin.installed = true;\r\n\r\n    Vue.component(overlay.name, overlay);\r\n}\r\n\r\nexport default plugin;\r\n\r\nexport {\r\n    overlay,\r\n    plugin as install\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-cluster\",staticStyle:{\"display\":\"none\"}},[_c('div',{staticClass:\"featureOver clusterMulOver\"},[_c('ul',{staticClass:\"featureList\",attrs:{\"id\":\"clusterList\"}},_vm._l((_vm.clusterList),function(item){return _c('li',{on:{\"click\":function($event){return _vm.locateFeature(item.id,item.coord)}}},[_vm._v(_vm._s(item.name))])}),0)]),_vm._t(\"default\",null,{\"points\":_vm.points,\"selectPoint\":_vm.selectPoint})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-cluster\" style=\"display: none;\">\r\n        <div class=\"featureOver clusterMulOver\">\r\n            <ul class=\"featureList\" id=\"clusterList\">\r\n                <li v-for=\"item in clusterList\" @click=\"locateFeature(item.id,item.coord)\">{{item.name}}</li>\r\n            </ul>\r\n        </div>\r\n        <slot :points=\"points\" :selectPoint=\"selectPoint\"></slot>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource, Cluster as ClusterSource} from 'ol/source';\r\n    import {\r\n        isDefined,\r\n        deepClone,\r\n        createFeature,\r\n        createOverlay,\r\n        removeOverlay,\r\n        setLabelEvent,\r\n        createStyle,\r\n        isEqual,\r\n        validCoords\r\n    } from '../../util/helpers';\r\n    import {unByKey} from 'ol/Observable'\r\n    import * as loadingstrategy from 'ol/loadingstrategy.js';\r\n\r\n    import Bus from '../../util/bus';\r\n\r\n    export default {\r\n        name: 'ol-cluster',\r\n        inject: ['getMap'],\r\n        props: {\r\n            points: {\r\n                type: Array,\r\n                required: true,\r\n                default() {\r\n                    return []\r\n                }\r\n            },\r\n            clusterStyle: {\r\n                type: Object,\r\n                default() {\r\n                    return {\r\n                        image: {\r\n                            circle: {\r\n                                radius: 10,\r\n                                stroke: {\r\n                                    color: '#fff'\r\n                                },\r\n                                fill: {\r\n                                    color: '#3399CC'\r\n                                },\r\n                                atlasManager: {\r\n                                    initialSize: 512\r\n                                }\r\n                            }\r\n                        },\r\n                        text: {\r\n                            text: \"\",\r\n                            fill: {\r\n                                color: '#fff'\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            pointStyle: [Object, Array],   //用作统一的单个图标样式\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            distance: {\r\n                type: Number,\r\n                default: 20\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            },\r\n            overLabel: {   //设置为‘none’，可屏蔽默认名称弹框\r\n                type: String\r\n            },\r\n            blankClear: {    //点击空白处是否设置selectPoint=null\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            selectPointId: [String, Number],\r\n\r\n        },\r\n        data() {\r\n            let gatherStyle = createStyle(this.clusterStyle);\r\n            let commonStyle = [];\r\n            if (this.pointStyle instanceof Array) {\r\n                let len = this.pointStyle.length;\r\n                for (let i = 0; i < len; i++) {\r\n                    commonStyle[i] = createStyle(this.pointStyle[i]);\r\n                }\r\n            } else {\r\n                commonStyle = createStyle(this.pointStyle);\r\n            }\r\n            return {\r\n                layer: null,\r\n                gatherStyle,\r\n                commonStyle,\r\n                nameLabel: null,  //单个图标的悬浮弹框\r\n                clusterLabel: null,\r\n                clusterList: [],   //事件触发时的聚集数组\r\n                exoticId: this.selectPointId,\r\n                selectPoint: null   //选中的点位\r\n            }\r\n        },\r\n        watch: {\r\n            points: {\r\n                handler(nval) {\r\n                    //console.log(\"聚集组件接收到数据0：\"+new Date().getTime());\r\n                    const vm = this;\r\n                    vm.selectPoint = null;\r\n                    vm.getMap().then((mapObject) => {\r\n                        vm.updateCluster(mapObject);\r\n                    })\r\n                },\r\n                deep: true\r\n            },\r\n            clusterStyle: {\r\n                handler(nval) {\r\n                    const vm = this;\r\n                    vm.gatherStyle = createStyle(this.clusterStyle);\r\n                },\r\n                deep: true\r\n            },\r\n            pointStyle: {\r\n                handler(nval) {\r\n                    const vm = this;\r\n                    let commonStyle = [];\r\n                    if (nval instanceof Array) {\r\n                        let len = nval.length;\r\n                        for (let i = 0; i < len; i++) {\r\n                            commonStyle[i] = createStyle(nval[i]);\r\n                        }\r\n                    } else {\r\n                        commonStyle = createStyle(nval);\r\n                    }\r\n                    vm.commonStyle = commonStyle;\r\n                },\r\n                deep: true\r\n            },\r\n            selectPointId: {\r\n                handler(nval) {\r\n                    const vm = this;\r\n                    if (!nval) {\r\n                        vm.selectPoint = null;\r\n                        return false;\r\n                    }\r\n\r\n                    //获取选中图标的信息并赋值给vm.selectPoint\r\n                    vm.checkPoint(nval);\r\n                }\r\n            },\r\n            selectPoint(nval) {\r\n                //双向数据绑定\r\n                // 应用场景：点击列表，地图相应点位点击弹框显示；反之，点击点位，列表对应数据选中\r\n                if (!nval) {\r\n                    this.$emit('update:selectPointId', \"\");\r\n                } else {\r\n                    this.$emit('update:selectPointId', nval.id);\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init() {\r\n                const vm = this;\r\n\r\n                let resolutionEventKey;  //地图缩放事件 悬浮弹框消失\r\n\r\n                vm.getMap().then((mapObject) => {\r\n                    vm.map = mapObject;\r\n                    vm.createLayer(mapObject);\r\n                    vm.updateCluster(mapObject);\r\n\r\n                    //缩放地图，聚集弹框隐藏\r\n                    const view = mapObject.getView();\r\n                    if (resolutionEventKey) {\r\n                        unByKey(resolutionEventKey);\r\n                    }\r\n                    resolutionEventKey = view.on(\"change:resolution\", () => {\r\n                        if (vm.clusterLabel) {\r\n                            vm.clusterLabel.setPosition(undefined);\r\n                        }\r\n                    });\r\n\r\n                    //事件监听\r\n                    const mapId = mapObject.getTarget().id || \"default\";\r\n                    vm.listen(mapObject, mapId);\r\n\r\n                    //默认选中点位\r\n                    if (vm.selectPointId) {\r\n                        vm.checkPoint(vm.selectPointId);\r\n                    }\r\n                })\r\n            },\r\n            createLayer(map) {\r\n                this.layer = new VectorLayer({\r\n                    source: new ClusterSource({\r\n                        distance: this.distance,\r\n                        source: new VectorSource({\r\n                            strategy: loadingstrategy.bbox\r\n                        })\r\n                    }),\r\n                    zIndex: this.zIndex\r\n                })\r\n                ;\r\n                this.layer.set(\"cluster\", true);\r\n                map.addLayer(this.layer);\r\n            },\r\n            styleFunction(feature) {\r\n                const size = feature.get('features').length;\r\n                let style;\r\n                if (size > 1) {\r\n                    style = this.gatherStyle;\r\n                    style.setZIndex(size);\r\n                    if (style && style.getText()) {\r\n                        let str = size.toString();\r\n                        if (size > 99) {\r\n                            str = '99+';\r\n                        }\r\n                        style.getText().setText(str);\r\n                    }\r\n                } else {\r\n                    let pointStyle = feature.get('features')[0].get(\"pointStyle\");\r\n                    if (this.commonStyle) {\r\n                        style = this.commonStyle;\r\n                    } else {\r\n                        let requestedStyle = [];\r\n                        if (pointStyle instanceof Array) {\r\n                            let len = pointStyle.length;\r\n                            for (let i = 0; i < len; i++) {\r\n                                requestedStyle[i] = createStyle(pointStyle[i]);\r\n                            }\r\n                        } else {\r\n                            requestedStyle = createStyle(pointStyle);\r\n                        }\r\n                        style = createStyle(requestedStyle);\r\n                    }\r\n                }\r\n                return style;\r\n            },\r\n            isRepeatId(points) {\r\n                let arr = [];\r\n                for (let value of points) {\r\n                    if (!value.id) {\r\n                        console.log(\"id缺失：\" + JSON.stringify(value));\r\n                        return true;\r\n                    }\r\n                    if (arr.indexOf(value.id) != -1) {\r\n                        let result = points.filter(item => item.id == value.id);\r\n                        console.log(\"id重复：\" + JSON.stringify(result));\r\n                        return true;\r\n                    }\r\n                    arr.push(value.id);\r\n                }\r\n                return false;\r\n            },\r\n            updateCluster(map) {\r\n                // console.log(\"聚集组件接收到数据：\"+new Date().getTime());\r\n                const nVal = this.points;\r\n\r\n                //每个point必须有唯一的id\r\n                if (this.isRepeatId(nVal)) {\r\n                    console.error(\"聚集点位必须有唯一的id值\");\r\n                    return false;\r\n                }\r\n                //console.log(\"聚集组件接收到数据2：\"+new Date().getTime());\r\n\r\n                const count = nVal.length;\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                let features = new Array();\r\n                this.storeObject = {};   //以id为键值，存储数据\r\n\r\n                let setData = {\r\n                    projection: this.projection,\r\n                    label: {\r\n                        title: \"\",\r\n                        message: \"\",\r\n                        classNm: \"\",\r\n                        placement: \"top\"\r\n                    },\r\n                    coord: [0, 0],\r\n                    lat: 0,\r\n                    lon: 0,\r\n                    keepOneOverlayVisible: true,\r\n                    clickLabel: {},\r\n                    overLabel: {}\r\n                }\r\n\r\n                // console.log(\"聚集组件接收到数据3：\"+new Date().getTime()+\" \"+count);\r\n                for (let i = 0; i < count; i++) {\r\n                    let point = nVal[i];\r\n                    if (point.lon && point.lat) {\r\n                        if (this.projection == \"EPSG:4326\") {\r\n                            if (!validCoords(point.lon, point.lat)) {\r\n                                console.error(\"经纬度不规范！\" + point.lon + \", \" + point.lat);\r\n                                continue;\r\n                            }\r\n                        }\r\n                        let feature = createFeature({\r\n                            projection: this.projection,\r\n                            lat: parseFloat(point.lat),\r\n                            lon: parseFloat(point.lon),\r\n                            id: point.id,\r\n                            name: point.name\r\n                        }, viewProjection);\r\n                        features.push(feature);\r\n                        const dataTemp = deepClone(setData);\r\n                        dataTemp.coord = [parseFloat(nVal[i].lon), parseFloat(nVal[i].lat)];\r\n                        dataTemp.lon = dataTemp.coord[0];\r\n                        dataTemp.lat = dataTemp.coord[1];\r\n                        dataTemp.info = nVal[i].info;\r\n\r\n                        feature.set(\"featureInfo\", {\r\n                            type: \"clusterFeature\",\r\n                            data: dataTemp\r\n                        });\r\n                        if (isDefined(point.style)) {\r\n                            feature.set(\"pointStyle\", point.style);\r\n                        }\r\n\r\n                        this.storeObject[point.id] = point;\r\n                    } else {\r\n                        console.error(\"经纬度缺失！\");\r\n                    }\r\n                }\r\n\r\n                this.layer.getSource().getSource().clear(true);\r\n                this.layer.getSource().getSource().addFeatures(features);\r\n\r\n                this.layer.setStyle(this.styleFunction);\r\n                //console.log(\"聚集组件渲染成功：\"+new Date().getTime());\r\n\r\n                this.$once('hook:beforeDestroy', function () {\r\n                    features = [];\r\n                })\r\n            },\r\n            showNameOverlay(map, feature, data) {\r\n                const vm = this;\r\n                //悬浮时，先移除其它的弹出框\r\n                removeOverlay(map, null, \"overLabel\");\r\n\r\n                let label = null;\r\n                if (vm.overLabel == \"none\") {\r\n                    return false;\r\n                }\r\n                if (!vm.overLabel || vm.overLabel == \"name\") {\r\n                    label = setLabelEvent(feature, map, data);\r\n                }\r\n                if (label) {\r\n                    label.set(\"overLabel\", \"true\"); //与其他的弹出框区分\r\n                }\r\n                return label;\r\n            },\r\n            setMoveLay(map, feature) {    //鼠标悬浮聚集图标，生成聚集弹框\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                let features = feature.get(\"features\");\r\n                const len = features.length;\r\n\r\n                if (len == 1) { //单点\r\n                    const coords = features[0].getGeometry().getCoordinates();\r\n                    let data = {\r\n                        lat: coords[1],\r\n                        lon: coords[0],\r\n                        projection: viewProjection,\r\n                        label: {\r\n                            classNm: \"featureOver\",\r\n                            message: features[0].get(\"name\") || \"空\"\r\n                        }\r\n                    }\r\n                    this.nameLabel = this.showNameOverlay(map, features[0], data);\r\n                } else {\r\n                    let coords = feature.getGeometry().getCoordinates();\r\n\r\n                    //聚集图标上有点击弹框，则不会再生成悬浮弹框\r\n                    if (this.clusterLabel && this.clusterLabel.get(\"clusterClickLabel\")\r\n                        && this.clusterLabel.getPosition()) {\r\n                        return;\r\n                    }\r\n\r\n                    this.clusterList = features.map(f => ({\r\n                        id: f.get(\"id\"),\r\n                        name: f.get(\"name\") || \"空\",\r\n                        coord: f.getGeometry().getCoordinates()\r\n                    }))\r\n\r\n                    //悬浮时，先移除其它的弹出框（主要是名称弹框）\r\n                    removeOverlay(map, null, \"overLabel\");\r\n\r\n                    if (!this.clusterLabel) {\r\n                        this.clusterLabel = createOverlay(this.$el.children[0], coords);\r\n                        map.addOverlay(this.clusterLabel);\r\n\r\n                        if (this.clusterLabel) {\r\n                            this.clusterLabel.set(\"clusterMoveLabel\", \"true\"); //与其他的弹出框区分\r\n                        }\r\n                    } else {\r\n                        this.clusterLabel.setPosition(coords);\r\n                        if (this.clusterLabel.get(\"clusterClickLabel\")) { //如果已经悬浮产生列表\r\n                            this.clusterLabel.unset(\"clusterClickLabel\");\r\n                            this.clusterLabel.getElement().classList.remove(\"clusterMulClick\");\r\n                            this.clusterLabel.set(\"clusterMoveLabel\", \"true\"); //悬浮弹框变点击弹框\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            listenerMove(data) {\r\n                const vm = this;\r\n                if (data.olLayer == vm.layer) {\r\n                    vm.$emit(\"pointermove\", data);\r\n\r\n                    vm.setMoveLay(vm.map, data.feature);\r\n                }\r\n            },\r\n            listenerMove_blank() {\r\n                const vm = this;\r\n                removeOverlay(vm.map, null, \"overLabel\");   //移除名称弹框\r\n                if (vm.clusterLabel && vm.clusterLabel.get(\"clusterMoveLabel\") && vm.clusterLabel.getPosition()) {   //聚集列表弹框还是悬浮状态\r\n                    vm.clusterLabel.setPosition(undefined);\r\n                    //console.log(\"3: \" + new Date().getTime());\r\n                }\r\n            },\r\n            listenerClick(data) {\r\n                const vm = this;\r\n                if (data.olLayer == vm.layer) {\r\n                    vm.$emit(\"singleclick\", data);\r\n\r\n                    const feature = data.feature;\r\n                    let features = feature.get(\"features\");\r\n                    const len = features.length;\r\n\r\n                    if (len > 1) {\r\n                        if (vm.clusterLabel && vm.clusterLabel.get(\"clusterMoveLabel\")) { //如果已经悬浮产生列表\r\n                            vm.clusterLabel.unset(\"clusterMoveLabel\");\r\n                            vm.clusterLabel.set(\"clusterClickLabel\", \"true\"); //悬浮弹框变点击弹框\r\n                            vm.clusterLabel.getElement().classList.add(\"clusterMulClick\");\r\n\r\n                            vm.selectPoint = null;\r\n                        }\r\n                    } else {\r\n                        if (vm.clusterLabel){\r\n                            vm.clusterLabel.setPosition(undefined);\r\n                        }\r\n\r\n                        //获取选中图标的信息并赋值给vm.selectPoint\r\n                        vm.checkPoint(features[0].get(\"id\"));\r\n                    }\r\n                }\r\n            },\r\n            listenerClick_blank() {\r\n                const vm = this;\r\n                if (vm.blankClear) {\r\n                    vm.selectPoint = null;   //选中图标为空\r\n                }\r\n\r\n                if (vm.clusterLabel && vm.clusterLabel.get(\"clusterClickLabel\")) {   //聚集列表弹框是点击固定状态\r\n                    vm.clusterLabel.setPosition(undefined);\r\n                }\r\n            },\r\n            listen(mapObject, mapId) {\r\n                const vm = this;\r\n                /*\r\n                    *   聚集图标悬浮生成列表弹框，鼠标移至空白处弹框隐藏\r\n                    *   聚集图标点击，列表悬浮弹框变成点击固定弹框，鼠标点击空白处隐藏\r\n                    *   生成点击固定弹框之后，鼠标再次悬浮在对应图标上，不会再生成悬浮弹框，\r\n                    *   若是悬浮在其他图标上，则弹框再次变为悬浮弹框，并重新设定位置\r\n                    */\r\n                Bus.$on(mapId + \".cluster.pointermove\", vm.listenerMove);\r\n\r\n                //地图空白处悬浮\r\n                Bus.$on(mapId + \".pointermove.blank\", vm.listenerMove_blank);\r\n\r\n                Bus.$on(mapId + \".cluster.singleclick\", vm.listenerClick);\r\n\r\n                //地图空白处 点击\r\n                Bus.$on(mapId + \".singleclick.blank\", vm.listenerClick_blank);\r\n            },\r\n            locateFeature(id, coord) {    //聚集点 列表元素点击之后，地图放大并定位\r\n                const vm = this;\r\n                vm.getMap().then((map) => {\r\n                    //移除弹框\r\n                    vm.clusterLabel.setPosition(undefined);\r\n\r\n                    const view = map.getView();\r\n                    const curZoom = view.getZoom();\r\n                    const maxZoom = view.getMaxZoom() || 18;\r\n                    const zoom = Math.max(maxZoom, curZoom + 2);\r\n                    view.animate({\r\n                        center: coord\r\n                    }, {\r\n                        zoom: zoom\r\n                    }, function () {\r\n                        //获取选中图标的信息并赋值给vm.selectPoint\r\n                        vm.checkPoint(id);\r\n                    });\r\n                });\r\n            },\r\n            checkPoint(id) {\r\n                const vm = this;\r\n                let point = vm.storeObject[id];\r\n                if (point) {\r\n                    vm.selectPoint = Object.assign({}, deepClone(point), {\r\n                        coord: [point.lon, point.lat]\r\n                    });\r\n                }\r\n            },\r\n\r\n            /**\r\n             *  @description: 清除选中\r\n             *  @author: xiarx\r\n             *  @date 2019/6/17 15:53\r\n             */\r\n            clearSelect() {\r\n                this.selectPoint = null;   //选中图标为空\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                let source = vm.layer.getSource();\r\n                if (source.clear) {\r\n                    source.getFeatures().forEach(function (f) {\r\n                        let s = f.getStyle();\r\n                        s = null;\r\n                        f.setStyle(null);\r\n                        f = null;\r\n                    })\r\n                    source.clear();\r\n                }\r\n                source = null;\r\n                vm.layer.setSource(undefined);\r\n                map.removeLayer(vm.layer);\r\n                if (vm.clusterLabel) {\r\n                    map.removeOverlay(vm.clusterLabel);\r\n                }\r\n\r\n                vm.selectPoint = null;  //选中为空\r\n\r\n                const mapId = map.getTarget().id || \"default\";\r\n                Bus.$off(mapId + \".cluster.pointermove\", vm.listenerMove);\r\n                Bus.$off(mapId + \".pointermove.blank\", vm.listenerMove_blank);\r\n                Bus.$off(mapId + \".cluster.singleclick\", vm.listenerClick);\r\n                Bus.$off(mapId + \".singleclick.blank\", vm.listenerClick_blank);\r\n            })\r\n        }\r\n    }\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cluster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cluster.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./cluster.vue?vue&type=template&id=90903ad4&\"\nimport script from \"./cluster.vue?vue&type=script&lang=js&\"\nexport * from \"./cluster.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import cluster from './cluster.vue'\r\n\r\nfunction plugin (Vue) {\r\n    if (plugin.installed) {\r\n        return\r\n    }\r\n    plugin.installed = true;\r\n\r\n    Vue.component(cluster.name, cluster);\r\n}\r\n\r\nexport default plugin;\r\n\r\nexport {\r\n    cluster,\r\n    plugin as install\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-interaction-point\",staticStyle:{\"display\":\"none\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-interaction-point\" style=\"display: none;\"></div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import {Draw, Modify, Snap} from 'ol/interaction';\r\n    import {transform as transformProjection} from 'ol/proj';\r\n    import {toContext} from 'ol/render.js';\r\n    import LineString from 'ol/geom/LineString';\r\n    import {Fill, Icon, Stroke, Style} from 'ol/style.js';\r\n    import {DEVICE_PIXEL_RATIO} from 'ol/has.js';\r\n    import {createStyle, createFeature, isDefined, validCoords} from \"../../util/helpers\";\r\n\r\n    export default {\r\n        name: 'ol-draw-point',\r\n        inject: ['getMap'],\r\n        props: {\r\n            hasPoints: {\r\n                type: Array\r\n            },\r\n            isModify: {\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            },\r\n            pixelTolerance: {   //图标热点区域半径，应该为图标最大宽度的一半\r\n                type: Number,\r\n                default: 20\r\n            },\r\n            icon: {   //图标样式\r\n                type: Object,\r\n                default: function () {\r\n                    return {\r\n                        image: {\r\n                            circle: {\r\n                                radius: 6,\r\n                                fill: {\r\n                                    color: \"#0099ff\"\r\n                                },\r\n                                stroke: {\r\n                                    color: \"#fff\",\r\n                                    width: 1\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            newId: [String, Number]   //新增触发器，用作新增feature的id\r\n        },\r\n        data() {\r\n            return {\r\n                layer: null,\r\n                source: null,\r\n                draw: null,\r\n                snap: null,\r\n                modify: null,\r\n                style: null\r\n            }\r\n        },\r\n        watch: {\r\n            hasPoints() {\r\n                this.source.clear();\r\n                this.getMap().then((map) => {\r\n                    this.loadPoints(map);\r\n                })\r\n            },\r\n            isModify(nval) {\r\n                this.modify.setActive(nval);\r\n            },\r\n            newId() {\r\n                this.getMap().then((map) => {\r\n                    this.addPoint(map);\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.style = createStyle(this.icon);\r\n\r\n                this.getMap().then((map) => {\r\n                    this.createLayer(map);\r\n\r\n                    //加载已有的点位\r\n                    this.loadPoints(map);\r\n                })\r\n            },\r\n            createCornerLine(radius) {\r\n                let pixelRatio = DEVICE_PIXEL_RATIO;\r\n                let canvas = document.createElement('canvas');\r\n                let vectorContext = toContext(canvas.getContext('2d'),\r\n                    {size: [2 * radius / pixelRatio, 2 * radius / pixelRatio], pixelRatio: pixelRatio});\r\n                vectorContext.setStyle(new Style({\r\n                    fill: new Fill({color: 'blue'}),\r\n                    stroke: new Stroke({width: 4 / pixelRatio, color: '#333'})\r\n                }));\r\n                const LENGTH = 5 / pixelRatio;\r\n                let w = 2 * radius / pixelRatio;\r\n                let cornerLines = [[[0, 0], [LENGTH, 0]],\r\n                    [[w - LENGTH, 0], [w, 0]],\r\n                    [[w, 0], [w, LENGTH]],\r\n                    [[w, w - LENGTH], [w, w]],\r\n                    [[w, w], [w - LENGTH, w]],\r\n                    [[LENGTH, w], [0, w]],\r\n                    [[0, w], [0, w - LENGTH]],\r\n                    [[0, LENGTH], [0, 0]]\r\n                ];\r\n\r\n                cornerLines.forEach(pixel => {\r\n                    let line = new LineString(pixel);\r\n                    vectorContext.drawGeometry(line);\r\n                })\r\n                return canvas;\r\n            },\r\n            createLayer(map) {\r\n                const vm = this;\r\n                vm.source = new VectorSource();\r\n                vm.layer = new VectorLayer({\r\n                    source: vm.source,\r\n                    zIndex: vm.zIndex\r\n                });\r\n                vm.layer.set(\"drawLayer\", true);\r\n                map.addLayer(this.layer);\r\n\r\n                this.modify = new Modify({\r\n                    source: vm.source,\r\n                    style: function (f) {\r\n                        let r = vm.pixelTolerance;\r\n                        /*if(!r){\r\n                            const size = vm.style.getImage().getSize();\r\n                            r = Math.max(size[0], size[1])/2;\r\n                        }*/\r\n                        let canvas = vm.createCornerLine(r);\r\n                        return new Style({\r\n                            image: new Icon({\r\n                                anchor:[0.5, 0.5],\r\n                                img: canvas,\r\n                                imgSize: [canvas.width, canvas.height]\r\n                            })\r\n                        });\r\n                    },\r\n                    pixelTolerance: this.pixelTolerance\r\n                });\r\n                map.addInteraction(this.modify);\r\n                this.modify.setActive(vm.isModify);\r\n\r\n                this.modify.on('modifyend', evt => {\r\n                    let fs = vm.source.getFeatures();\r\n                    let results = fs.map(f => {\r\n                        const coord = f.getGeometry().getCoordinates();\r\n                        let requestedPosition;\r\n                        if (vm.projection === 'pixel') {\r\n                            requestedPosition = coord;\r\n                        } else {\r\n                            requestedPosition = transformProjection(coord,\r\n                                map.getView().getProjection(), vm.projection);\r\n                        }\r\n\r\n                        return {\r\n                            coord: requestedPosition,\r\n                            fId: f.get(\"id\")\r\n                        }\r\n                    })\r\n                    vm.$emit(\"drawend\", results);\r\n                })\r\n            },\r\n            addInteractions(map) {\r\n                this.draw = new Draw({\r\n                    source: this.source,\r\n                    type: 'Point',\r\n                    style: this.style\r\n                });\r\n                map.addInteraction(this.draw);\r\n                this.snap = new Snap({source: this.source});\r\n                map.addInteraction(this.snap);\r\n\r\n                this.draw.on('drawend', evt => {\r\n                    let feature = evt.feature;\r\n                    feature.setStyle(this.style);\r\n                    feature.set(\"id\", this.newId);\r\n                    map.removeInteraction(this.draw);\r\n\r\n                    let requestedPosition;\r\n                    if (this.projection === 'pixel') {\r\n                        requestedPosition = feature.getGeometry().getCoordinates();\r\n                    } else {\r\n                        requestedPosition = transformProjection(feature.getGeometry().getCoordinates(),\r\n                            map.getView().getProjection(), this.projection);\r\n                    }\r\n                    this.$emit(\"drawend\", [{\r\n                        coord: requestedPosition,\r\n                        fId: feature.get(\"id\")\r\n                    }])\r\n                })\r\n            },\r\n            addPoint(map) {\r\n                if (this.draw) {\r\n                    map.removeInteraction(this.draw);\r\n                }\r\n\r\n                map.removeInteraction(this.snap);\r\n\r\n                this.style = createStyle(this.icon);\r\n                this.addInteractions(map);\r\n            },\r\n            loadPoints(map) {\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                let features = new Array();\r\n                const count = this.hasPoints.length;\r\n                for (let i = 0; i < count; i++) {\r\n                    let point = this.hasPoints[i];\r\n                    if (point.lon && point.lat) {\r\n                        point.lon = parseFloat(point.lon);\r\n                        point.lat = parseFloat(point.lat);\r\n                        if (this.projection == \"EPSG:4326\") {\r\n                            if (!validCoords(point.lon, point.lat)) {\r\n                                console.error(\"经纬度不规范！\");\r\n                                continue;\r\n                            }\r\n                        }\r\n\r\n                        let feature = createFeature({\r\n                            projection: this.projection,\r\n                            lat: parseFloat(point.lat),\r\n                            lon: parseFloat(point.lon),\r\n                            id: point.id,\r\n                            name: point.name\r\n                        }, viewProjection);\r\n                        if (isDefined(point.style)) {\r\n                            if (!point.style.zIndex || point.style.zIndex < 2) {\r\n                                point.style.zIndex = 2;\r\n                            }\r\n\r\n                            let style = createStyle(point.style);\r\n                            feature.setStyle(style);\r\n                        }else{\r\n                            feature.setStyle(this.style);\r\n                        }\r\n\r\n                        features.push(feature);\r\n                    }\r\n                }\r\n\r\n                this.layer.getSource().addFeatures(features);\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                this.source.clear();\r\n                map.removeLayer(vm.layer);\r\n\r\n                if (this.draw) {\r\n                    map.removeInteraction(this.draw);\r\n                }\r\n                map.removeInteraction(this.snap);\r\n                map.removeInteraction(this.modify);\r\n            })\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./point.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./point.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./point.vue?vue&type=template&id=f3c1b128&\"\nimport script from \"./point.vue?vue&type=script&lang=js&\"\nexport * from \"./point.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-interaction-shape\",staticStyle:{\"display\":\"none\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-interaction-shape\" style=\"display: none;\"></div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import {Draw, Modify, Snap} from 'ol/interaction';\r\n    import {createRegularPolygon, createBox} from 'ol/interaction/Draw.js';\r\n    import {transform as transformProjection} from 'ol/proj';\r\n    import {toContext} from 'ol/render.js';\r\n    import {LineString, Polygon} from 'ol/geom';\r\n    import {createStyle, createFeature, isDefined, getGeodesicDistance} from \"../../util/helpers\";\r\n\r\n    export default {\r\n        name: 'ol-draw-shape',\r\n        inject: ['getMap'],\r\n        props: {\r\n            type: {\r\n                type: String,\r\n                required: true,\r\n                default: \"Point\"\r\n            },\r\n            hasFeatures: {\r\n                type: Array,\r\n                default() {\r\n                    return [];\r\n                }\r\n            },\r\n            isModify: {\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            },\r\n            olStyle: {   //图标样式\r\n                type: Object,\r\n                default: function () {\r\n                    return {\r\n                        fill: {\r\n                            color: [32, 88, 165, 0.4]\r\n                        },\r\n                        stroke: {\r\n                            color: '#2058A5',\r\n                            width: 2\r\n                        },\r\n                        image: {\r\n                            circle: {\r\n                                radius: 6,\r\n                                fill: {\r\n                                    color: \"#0099ff\"\r\n                                },\r\n                                stroke: {\r\n                                    color: \"#fff\",\r\n                                    width: 1\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            newId: [String, Number],   //新增触发器，用作新增feature的id\r\n            isSingle: {\r\n                type: Boolean,\r\n                default: false\r\n            }\r\n        },\r\n        data() {\r\n            return {}\r\n        },\r\n        watch: {\r\n            hasFeatures() {\r\n                this.source.clear();\r\n                this.getMap().then((map) => {\r\n                    this.loadFeatures(map);\r\n                })\r\n            },\r\n            isModify(nval) {\r\n                this.modify.setActive(nval);\r\n            },\r\n            newId() {\r\n                this.getMap().then((map) => {\r\n                    this.addFeature(map);\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            initData() {\r\n                this.map = null;\r\n                this.layer = null;\r\n                this.source = null;\r\n                this.draw = null;\r\n                this.snap = null;\r\n                this.modify = null;\r\n                this.style = null;\r\n            },\r\n            init() {\r\n                this.initData();\r\n                this.style = createStyle(this.olStyle);\r\n\r\n                this.getMap().then((map) => {\r\n                    this.map = map;\r\n                    this.createLayer(map);\r\n\r\n                    //加载已有的点位\r\n                    this.loadFeatures(map);\r\n                })\r\n            },\r\n            addModify() {\r\n                const vm = this;\r\n                let modify = new Modify({\r\n                    source: vm.source\r\n                });\r\n                modify.setActive(vm.isModify);\r\n\r\n                modify.on('modifyend', evt => {\r\n                    let fs = vm.source.getFeatures();\r\n                    let results = fs.map(f => {\r\n                        let geo = f.getGeometry();\r\n                        if (vm.projection != 'pixel') {\r\n                            geo = geo.clone().transform(vm.map.getView().getProjection(), vm.projection);\r\n                        }\r\n                        let requestedPosition, centerPoint;\r\n                        if (vm.type != \"Circle\") {\r\n                            requestedPosition = geo.getCoordinates();\r\n                        } else {\r\n                            requestedPosition = geo.getRadius();   //Circle  半径\r\n                        }\r\n                        if (vm.type == \"Point\") {\r\n                            centerPoint = requestedPosition;\r\n                        } else if (vm.type == \"LineString\") {\r\n                            centerPoint = geo.getCoordinateAt(0.5);\r\n                        } else if (vm.type == \"Circle\") {\r\n                            centerPoint = geo.getCenter();\r\n                        } else if (vm.type == \"Polygon\") {\r\n                            let coord = geo.getInteriorPoint().getCoordinates();\r\n                            centerPoint = [coord[0], coord[1]];\r\n                        } else {\r\n                            if (geo.getCenter) {\r\n                                centerPoint = geo.getCenter();\r\n                            } else {\r\n                                let coord = geo.getInteriorPoint().getCoordinates();\r\n                                centerPoint = [coord[0], coord[1]];\r\n                            }\r\n                        }\r\n\r\n                        return {\r\n                            coord: requestedPosition,\r\n                            center: centerPoint,\r\n                            fId: f.get(\"id\")\r\n                        }\r\n                    })\r\n                    vm.$emit(\"drawend\", results);\r\n                })\r\n\r\n                return modify;\r\n            },\r\n            createLayer(map) {\r\n                const vm = this;\r\n                vm.source = new VectorSource();\r\n                vm.layer = new VectorLayer({\r\n                    source: vm.source,\r\n                    zIndex: vm.zIndex\r\n                });\r\n                vm.layer.set(\"shapeLayer\", true);\r\n                map.addLayer(this.layer);\r\n\r\n                vm.modify = vm.addModify();\r\n                map.addInteraction(vm.modify);\r\n            },\r\n            starGeo(coordinates, geometry) {\r\n                let center = coordinates[0];\r\n                let last = coordinates[1];\r\n                let dx = center[0] - last[0];\r\n                let dy = center[1] - last[1];\r\n                let radius = Math.sqrt(dx * dx + dy * dy);\r\n                let rotation = Math.atan2(dy, dx);\r\n                let newCoordinates = [];\r\n                let numPoints = 12;\r\n                for (let i = 0; i < numPoints; ++i) {\r\n                    let angle = rotation + i * 2 * Math.PI / numPoints;\r\n                    let fraction = i % 2 === 0 ? 1 : 0.5;\r\n                    let offsetX = radius * fraction * Math.cos(angle);\r\n                    let offsetY = radius * fraction * Math.sin(angle);\r\n                    newCoordinates.push([center[0] + offsetX, center[1] + offsetY]);\r\n                }\r\n                newCoordinates.push(newCoordinates[0].slice());\r\n                if (!geometry) {\r\n                    geometry = new Polygon([newCoordinates]);\r\n                } else {\r\n                    geometry.setCoordinates([newCoordinates]);\r\n                }\r\n                return geometry;\r\n            },\r\n            drawEnd(evt) {\r\n                const vm = this;\r\n                let feature = evt.feature;\r\n                feature.setStyle(vm.style);\r\n                feature.set(\"id\", vm.newId);\r\n                vm.map.removeInteraction(vm.draw);\r\n\r\n                let geo = feature.getGeometry();\r\n                if (vm.projection != 'pixel') {\r\n                    geo = geo.clone().transform(vm.map.getView().getProjection(), vm.projection);\r\n                }\r\n                let requestedPosition, centerPoint;\r\n                if (vm.type != \"Circle\") {\r\n                    requestedPosition = geo.getCoordinates();\r\n                } else {\r\n                    requestedPosition = geo.getRadius();   //Circle  半径\r\n                }\r\n                if (vm.type == \"Point\") {\r\n                    centerPoint = requestedPosition;\r\n                } else if (vm.type == \"LineString\") {\r\n                    centerPoint = geo.getCoordinateAt(0.5);\r\n                } else if (vm.type == \"Circle\") {\r\n                    centerPoint = geo.getCenter();\r\n                } else if (vm.type == \"Polygon\") {\r\n                    let coord = geo.getInteriorPoint().getCoordinates();\r\n                    centerPoint = [coord[0], coord[1]];\r\n                } else {\r\n                    if (geo.getCenter) {\r\n                        centerPoint = geo.getCenter();\r\n                    } else {\r\n                        let coord = geo.getInteriorPoint().getCoordinates();\r\n                        centerPoint = [coord[0], coord[1]];\r\n                    }\r\n                }\r\n\r\n                this.$emit(\"drawend\", [{\r\n                    coord: requestedPosition,\r\n                    center: centerPoint,\r\n                    fId: feature.get(\"id\")\r\n                }])\r\n            },\r\n            addInteractions(map) {\r\n                const vm = this;\r\n                let type = vm.type;\r\n                let geometryFunction = null;\r\n                if (type == \"Box\") {\r\n                    type = 'Circle';\r\n                    geometryFunction = createBox();\r\n                } else if (type == \"Square\") {\r\n                    type = 'Circle';\r\n                    geometryFunction = createRegularPolygon(4);\r\n                } else if (type === 'Star') {\r\n                    type = 'Circle';\r\n                    geometryFunction = vm.starGeo;\r\n                }\r\n                vm.draw = new Draw({\r\n                    source: vm.source,\r\n                    type,\r\n                    style: vm.style,\r\n                    geometryFunction\r\n                });\r\n                map.addInteraction(vm.draw);\r\n                this.snap = new Snap({source: vm.source});\r\n                map.addInteraction(vm.snap);\r\n\r\n                vm.draw.on('drawend', vm.drawEnd);\r\n            },\r\n            addFeature(map) {\r\n                if (this.draw) {\r\n                    map.removeInteraction(this.draw);\r\n                }\r\n                map.removeInteraction(this.snap);\r\n\r\n                if (this.isSingle) {\r\n                    //清除其他feature\r\n                    this.source.clear();\r\n                }\r\n\r\n                this.style = createStyle(this.olStyle);\r\n                this.addInteractions(map);\r\n            },\r\n            calcRadius(r, coords) {\r\n                if (r) {\r\n                    if (this.projection != \"pixel\") {\r\n                        const perDegree = getGeodesicDistance(this.projection, coords, [coords[0] + 1, coords[1]]);\r\n                        const radius = r / perDegree;\r\n                        return radius;\r\n                    }\r\n\r\n                    return r;\r\n                }\r\n\r\n                return 0;\r\n            },\r\n            loadFeatures(map) {\r\n                const vm = this;\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                let features = new Array();\r\n                const count = vm.hasFeatures.length;\r\n                for (let i = 0; i < count; i++) {\r\n                    let featureData = vm.hasFeatures[i];\r\n                    if (featureData.coords) {\r\n                        let type = featureData.type;\r\n                        if (type == \"Box\" || type == \"Square\" || type == \"Star\") {\r\n                            type = \"Polygon\";\r\n                        }\r\n                        let data = {\r\n                            type,\r\n                            projection: vm.projection,\r\n                            coords: featureData.coords,\r\n                            id: featureData.id,\r\n                            name: featureData.name\r\n                        };\r\n                        if (type == \"Circle\") {\r\n                            data.radius = featureData.radius;\r\n                        }\r\n                        let feature = createFeature(data, viewProjection);\r\n                        if (isDefined(featureData.style)) {\r\n                            let style = createStyle(featureData.style);\r\n                            feature.setStyle(style);\r\n                        } else {\r\n                            feature.setStyle(vm.style);\r\n                        }\r\n\r\n                        features.push(feature);\r\n                    }\r\n                }\r\n\r\n                this.layer.getSource().addFeatures(features);\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                this.source.clear();\r\n                map.removeLayer(vm.layer);\r\n\r\n                if (this.draw) {\r\n                    map.removeInteraction(this.draw);\r\n                }\r\n                map.removeInteraction(this.snap);\r\n                map.removeInteraction(this.modify);\r\n            })\r\n        }\r\n    }\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shape.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shape.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./shape.vue?vue&type=template&id=6a12e106&\"\nimport script from \"./shape.vue?vue&type=script&lang=js&\"\nexport * from \"./shape.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-interaction-route\",staticStyle:{\"display\":\"none\"}},[_vm._t(\"default\",null,{\"selectPoint\":_vm.selectPoint})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-interaction-route\" style=\"display: none;\">\r\n        <slot :selectPoint=\"selectPoint\"></slot>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import {Point, LineString} from 'ol/geom';\r\n    import {Draw, Modify, Snap} from 'ol/interaction';\r\n    import {transform as transformProjection} from 'ol/proj';\r\n    import {unByKey} from 'ol/Observable';\r\n    import {Style, Circle, Fill, Stroke, Icon} from 'ol/style';\r\n    import {altKeyOnly, doubleClick} from 'ol/events/condition';\r\n    import {DoubleClickZoom} from 'ol/interaction';\r\n    import {DEVICE_PIXEL_RATIO} from 'ol/has.js';\r\n    import {toContext} from 'ol/render.js';\r\n\r\n    import {createFeature, createOverlay, createStyle} from \"../../util/helpers\";\r\n    import Bus from '../../util/bus';\r\n\r\n    export default {\r\n        name: \"ol-draw-route\",\r\n        inject: ['getMap'],\r\n        props: {\r\n            isModify: {\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            icon: {   //图标样式\r\n                type: Object,\r\n                default: function () {\r\n                    return {\r\n                        image: {\r\n                            circle: {\r\n                                radius: 6,\r\n                                fill: {\r\n                                    color: \"#0099ff\"\r\n                                },\r\n                                stroke: {\r\n                                    color: \"#fff\",\r\n                                    width: 1\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            lineStyle: {   //轨迹线样式\r\n                type: Object,\r\n                default() {\r\n                    return {\r\n                        stroke: {\r\n                            color: '#2058A5',\r\n                            width: 2\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            modifyColor: String | Array,\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            },\r\n            hasFeatures: {\r\n                type: Array,\r\n                default() {\r\n                    return [];\r\n                }\r\n            },\r\n            newId: [String, Number],   //新增触发器，用作新增feature的id\r\n            isSingle: {\r\n                type: Boolean,\r\n                default: true\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                selectPoint: null\r\n            }\r\n        },\r\n        watch: {\r\n            hasFeatures() {\r\n                this.source.clear();\r\n                this.getMap().then((map) => {\r\n                    this.loadFeatures(map);\r\n                })\r\n            },\r\n            isModify(nval) {\r\n                this.modify.setActive(nval);\r\n            },\r\n            newId() {\r\n                this.getMap().then((map) => {\r\n                    this.addFeature(map);\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.initData();\r\n                this.getMap().then((map) => {\r\n                    this.map = map;\r\n                    this.viewProjection = map.getView().getProjection().getCode();\r\n                    this.layer = this.createLayer(map);\r\n                    this.pointLayer = this.createPointLayer(map);\r\n\r\n                    this.modify = this.addModify();\r\n                    map.addInteraction(this.modify);\r\n\r\n                    //加载已有数据\r\n                    this.loadFeatures();\r\n\r\n                    this.listenEvent();\r\n                })\r\n            },\r\n            initData() {\r\n                this.layer = null;\r\n                this.source = null;\r\n                this.pointLayer = null;\r\n                this.pointSource = null;\r\n                this.draw = null;\r\n                this.snap = null;\r\n                this.modify = null;\r\n                this.curFeature = null;  //当前绘制的线段矢量\r\n                this.style = null;   //线样式\r\n                this.drawing = false;  //是否正在绘制\r\n                this.listenChanges = [];   //feature的change事件监听器\r\n                this.listener = null;  //地图点击事件监听器\r\n            },\r\n\r\n            //去掉双击放大交互\r\n            removeDblZoom() {\r\n                let result = this.map.getInteractions();\r\n                result.forEach(r => {\r\n                    if (r instanceof DoubleClickZoom) {\r\n                        this.map.removeInteraction(r);\r\n                    }\r\n                });\r\n            },\r\n            //添加双击放大交互\r\n            addDblZoom() {\r\n                let result = this.map.getInteractions(), flag = false;\r\n                result.forEach(r => {\r\n                    if (r instanceof DoubleClickZoom) {\r\n                        flag = true;\r\n                    }\r\n                });\r\n                if (!flag) {\r\n                    this.map.addInteraction(new DoubleClickZoom());\r\n                }\r\n            },\r\n            modifyEnd(evt) {\r\n                const vm = this;\r\n                vm.drawing = false;\r\n                let fs = vm.source.getFeatures();\r\n                let arr = fs.filter(f => {\r\n                    let geo = f.getGeometry();\r\n                    return geo instanceof LineString;\r\n                });\r\n                let results = arr.map(f => {\r\n                    let geo = f.getGeometry();\r\n                    if (vm.projection != 'pixel') {\r\n                        geo = geo.clone().transform(vm.map.getView().getProjection(), vm.projection);\r\n                    }\r\n                    let requestedPosition = geo.getCoordinates();\r\n\r\n                    return {\r\n                        coord: requestedPosition,\r\n                        fId: f.get(\"id\")\r\n                    }\r\n                })\r\n                vm.$emit(\"drawend\", results);  //把线的坐标数据传出\r\n            },\r\n            addModify() {\r\n                const vm = this;\r\n                let modify = new Modify({\r\n                    source: vm.pointSource,\r\n                    deleteCondition: function (e) {\r\n                        /*if (doubleClick(e)) {\r\n                            return true;\r\n                        }*/\r\n                        return false;\r\n                    },\r\n                    insertVertexCondition() {\r\n                        return false;\r\n                    },\r\n                    style: new Style({\r\n                        image: new Circle({\r\n                            radius: 5,\r\n                            fill: new Fill({\r\n                                color: vm.modifyColor || '#1d94f7'\r\n                            }),\r\n                            stroke: new Stroke({\r\n                                width: 1,\r\n                                color: 'white'\r\n                            })\r\n                        })\r\n                    })\r\n                });\r\n                modify.setActive(vm.isModify);\r\n                modify.on('modifystart', e => {\r\n                    vm.drawing = true;\r\n                    vm.selectPoint = null;\r\n                });\r\n                modify.on('modifyend', vm.modifyEnd);\r\n\r\n                return modify;\r\n            },\r\n            createLayer(map) {\r\n                const vm = this;\r\n                vm.source = new VectorSource();\r\n                let layer = new VectorLayer({\r\n                    source: vm.source,\r\n                    style: createStyle(Object.assign({}, vm.lineStyle, vm.icon)),\r\n                    zIndex: vm.zIndex\r\n                });\r\n                layer.set(\"routeLayer\", true);\r\n                map.addLayer(layer);\r\n\r\n                return layer;\r\n            },\r\n            createPointLayer(map) {\r\n                const vm = this;\r\n                vm.pointSource = new VectorSource();\r\n                let layer = new VectorLayer({\r\n                    source: vm.pointSource,\r\n                    style: createStyle(Object.assign({zIndex: 2}, this.icon)),\r\n                    zIndex: vm.zIndex\r\n                });\r\n                layer.set(\"routeLayer\", true);\r\n                map.addLayer(layer);\r\n                return layer;\r\n            },\r\n            createNode(coord, id) {\r\n                let data = {\r\n                    id,\r\n                    coords: coord\r\n                };\r\n                let feature = createFeature(data, this.viewProjection);\r\n                feature.set(\"name\", \"drawNode\");\r\n                feature.set(\"nodeIndex\", id.split(\"-\")[1]);\r\n                feature.setId(id);\r\n                this.pointSource.addFeature(feature);\r\n\r\n                //监听节点变化 更新线坐标\r\n                let listenChange = feature.on(\"change\", (evt) => {\r\n                    let {target} = evt;\r\n                    let fidArr = target.getId().split(\"-\");\r\n                    let lineId = fidArr[0], nodeIndex = target.get(\"nodeIndex\");\r\n                    let line = this.source.getFeatureById(lineId).getGeometry();\r\n                    let lineCoords = line.getCoordinates();\r\n                    let nodeCoords = target.getGeometry().getCoordinates();\r\n                    lineCoords[nodeIndex] = nodeCoords;  //更新线节点坐标\r\n                    line.setCoordinates(lineCoords);\r\n                })\r\n                this.listenChanges.push(listenChange);\r\n            },\r\n            drawStart(evt) {\r\n                const vm = this;\r\n                vm.drawing = true;\r\n                vm.curFeature = evt.feature; //绘制的要素\r\n                vm.curFeature.set(\"id\", vm.newId);\r\n                vm.curFeature.setId(vm.newId);\r\n            },\r\n            drawEnd() {\r\n                const vm = this;\r\n                let feature = vm.curFeature;\r\n                let geo = feature.getGeometry();\r\n                let coords = geo.getCoordinates();\r\n                coords.forEach((p, index) => {\r\n                    vm.createNode(p, `${vm.newId}-${index}`);\r\n                })\r\n                vm.map.removeInteraction(vm.draw);\r\n\r\n                if (vm.projection != 'pixel') {\r\n                    geo = geo.clone().transform(vm.map.getView().getProjection(), vm.projection);\r\n                }\r\n                let requestedPosition = geo.getCoordinates();\r\n\r\n                vm.$emit(\"drawend\", [{   //向外传送线的坐标数据\r\n                    coord: requestedPosition,\r\n                    fId: feature.get(\"id\")\r\n                }])\r\n\r\n                vm.curFeature = null;  //清除\r\n                if (vm.isModify) {\r\n                    vm.modify.setActive(true);\r\n                }\r\n                vm.drawing = false;\r\n                setTimeout(function () {\r\n                    vm.addDblZoom();   //添加双击放大交互\r\n                })\r\n            },\r\n            styleFunction(feature) {   //绘制过程中的样式\r\n                const vm = this;\r\n                let lineStyle = Object.assign({lineDash: [10, 5]}, vm.lineStyle.stroke || {});\r\n                let drawStyle = createStyle(Object.assign({stroke: lineStyle}, vm.icon));\r\n\r\n                let styles = [drawStyle];\r\n                let geometry = feature.getGeometry();\r\n                if (geometry instanceof LineString) {\r\n                    let first = false, index = 0;\r\n                    geometry.forEachSegment(function (start, end) {\r\n                        if (!first) {\r\n                            styles.push(new Style({\r\n                                geometry: new Point(start),\r\n                                image: createStyle(vm.icon, \"image\")\r\n                            }));\r\n                            first = true;\r\n                        }\r\n                        styles.push(new Style({\r\n                            geometry: new Point(end),\r\n                            image: createStyle(vm.icon, \"image\")\r\n                        }));\r\n                    })\r\n                }\r\n\r\n                return styles;\r\n            },\r\n            addInteractions(map) {\r\n                const vm = this;\r\n                vm.draw = new Draw({\r\n                    source: vm.source,\r\n                    type: 'LineString',\r\n                    style: vm.styleFunction\r\n                });\r\n                map.addInteraction(vm.draw);\r\n                vm.draw.on(\"drawstart\", vm.drawStart);\r\n                vm.draw.on('drawend', vm.drawEnd);\r\n\r\n                this.snap = new Snap({source: vm.source});\r\n                map.addInteraction(vm.snap);\r\n                this.removeDblZoom();\r\n\r\n                if (vm.isModify) {\r\n                    vm.modify.setActive(false);\r\n                }\r\n            },\r\n            addFeature(map) {\r\n                if (this.draw) {\r\n                    map.removeInteraction(this.draw);\r\n                }\r\n                map.removeInteraction(this.snap);\r\n\r\n                if (this.isSingle) {\r\n                    //清除其他feature\r\n                    this.source.clear();\r\n                    this.pointSource.clear();\r\n                }\r\n\r\n                this.addInteractions(map);\r\n            },\r\n            loadFeatures() {\r\n                const vm = this;\r\n                let features = new Array();\r\n                const count = vm.hasFeatures.length;\r\n                for (let i = 0; i < count; i++) {\r\n                    let featureData = vm.hasFeatures[i];\r\n                    if (featureData.coord) {\r\n                        let data = {\r\n                            type: 'LineString',\r\n                            projection: vm.projection,\r\n                            coords: featureData.coord,\r\n                            id: featureData.fId,\r\n                        }\r\n                        let feature = createFeature(data, vm.viewProjection);\r\n                        features.push(feature);\r\n                    }\r\n                }\r\n\r\n                this.source.addFeatures(features);\r\n            },\r\n            listenClick(e) {\r\n                if (this.drawing) {\r\n                    return false;\r\n                }\r\n                let layerFeature = [], isNode = false;\r\n                this.map.forEachFeatureAtPixel(e.pixel, function (feature, olLayer) {\r\n                    layerFeature.push([olLayer, feature]);\r\n                });\r\n                layerFeature.forEach((item) => {\r\n                    if (item[0] && item[1]) {\r\n                        if (item[1].get(\"name\") == \"drawNode\") {\r\n                            const olLayer = item[0],\r\n                                feature = item[1];\r\n                            if (olLayer.get(\"routeLayer\")) {\r\n                                isNode = true;\r\n                                if (feature.getGeometry() instanceof Point) {\r\n                                    let coord = feature.getGeometry().getCoordinates();\r\n                                    if (this.projection != 'pixel') {\r\n                                        coord = transformProjection(coord, this.viewProjection, this.projection)\r\n                                    }\r\n                                    this.selectPoint = {\r\n                                        coord,\r\n                                        id: feature.get(\"id\")\r\n                                    };\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n                if (!isNode) {\r\n                    //其他地方 点击\r\n                    this.selectPoint = null;\r\n                }\r\n            },\r\n            listenEvent() {\r\n                this.listener = this.map.on(\"click\", this.listenClick);\r\n            },\r\n\r\n            /**\r\n             *  @description: 改变节点的样式\r\n             *  @param nodeId 节点id\r\n             *  @param style  节点样式\r\n             *  @author xrx\r\n             *  @date 2019/9/25 10:17\r\n             */\r\n            changeNodeStyle(nodeId, style) {\r\n                let feature = this.pointSource.getFeatureById(nodeId);\r\n                if (feature) {\r\n                    feature.setStyle(createStyle(style));\r\n                    this.selectPoint = null;\r\n                } else {\r\n                    console.error('id 不存在');\r\n                }\r\n            },\r\n\r\n            /**\r\n             *  @description: 删除某一节点\r\n             *  @param id 要删除节点的linestring的id\r\n             *  @param nodeId 要删除的节点的id\r\n             *  @author xrx\r\n             *  @date 2019/9/23 16:11\r\n             */\r\n            deleteNode(id, nodeId) {\r\n                let feature = this.source.getFeatureById(id),\r\n                    node = this.pointSource.getFeatureById(nodeId);\r\n                if (feature) {\r\n                    let coords = feature.getGeometry().getCoordinates(),\r\n                        nodeCoord = node.getGeometry().getCoordinates();\r\n                    coords.forEach((c, index) => {\r\n                        if (c[0] === nodeCoord[0] && c[1] === nodeCoord[1]) {\r\n                            coords.splice(index, 1);\r\n                        }\r\n                    })\r\n                    if (coords.length < 2) {\r\n                        alert(\"节点不能少于两个！\");\r\n                    } else {\r\n                        feature.getGeometry().setCoordinates(coords);\r\n\r\n                        if (node) {\r\n                            this.pointSource.removeFeature(node);\r\n                            let nodes = this.pointSource.getFeatures();\r\n                            let delIndex = node.get(\"nodeIndex\");\r\n                            nodes.forEach(n=>{\r\n                                let index = n.get(\"nodeIndex\");\r\n                                if(index>delIndex) {\r\n                                    n.set(\"nodeIndex\", index-1);\r\n                                }\r\n                            })\r\n                        }\r\n                    }\r\n\r\n                    this.selectPoint = null;\r\n                } else {\r\n                    console.error('id 不存在');\r\n                }\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                vm.source.clear();\r\n                map.removeLayer(vm.layer);\r\n                vm.pointSource.clear();\r\n                map.removeLayer(vm.pointLayer);\r\n\r\n                if (vm.draw) {\r\n                    map.removeInteraction(vm.draw);\r\n                }\r\n                map.removeInteraction(vm.snap);\r\n                map.removeInteraction(vm.modify);\r\n\r\n                vm.listenChanges.forEach(l => {\r\n                    if (l) {\r\n                        unByKey(l);\r\n                    }\r\n                })\r\n                if (vm.listener) {\r\n                    unByKey(vm.listener);\r\n                }\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./route.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./route.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./route.vue?vue&type=template&id=0ed449f9&scoped=true&\"\nimport script from \"./route.vue?vue&type=script&lang=js&\"\nexport * from \"./route.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ed449f9\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-measure\"},[_vm._l((_vm.deleteIcons),function(item){return [_c('div',{staticClass:\"tooltip-close\",attrs:{\"id\":item.id}},[_c('img',{attrs:{\"title\":\"删除\",\"src\":require(\"../../assets/del.png\")},on:{\"click\":function($event){return _vm.delObj(item.id)}}})])]})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-measure\">\r\n        <template v-for=\"item in deleteIcons\">\r\n            <div class=\"tooltip-close\" :id=\"item.id\">\r\n                <img title=\"删除\" src=\"../../assets/del.png\" @click=\"delObj(item.id)\">\r\n            </div>\r\n        </template>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import {Draw} from 'ol/interaction';\r\n    import {\r\n        LineString,\r\n        Polygon\r\n    } from 'ol/geom';\r\n    import {unByKey} from 'ol/Observable';\r\n    import {getLength, getArea} from \"ol/sphere\";\r\n    import {createFeature, createOverlay, createStyle} from \"../../util/helpers\";\r\n\r\n    import Bus from '../../util/bus';\r\n\r\n    export default {\r\n        name: 'ol-measure',\r\n        inject: ['getMap'],\r\n        props: {\r\n            type: {\r\n                type: String,\r\n                required: true,\r\n                default: \"LineString\"\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            }\r\n        },\r\n        data(){\r\n            return {\r\n                layer: null,\r\n                source: null,\r\n                sketch: null,   //当前绘制的要素\r\n                helpTooltipElement: null,  //帮助提示框对象\r\n                helpTooltip: null,    //帮助提示框显示的信息\r\n                measureTooltipElement: null,   //测量工具提示框对象\r\n                measureTooltip: null,    //测量工具中显示的测量值\r\n                distanceTooltipElement: null,   //距离提示框对象\r\n                distanceTooltip: null,      //距离提示框显示的测量值\r\n                movePos: null,   //鼠标当前位置\r\n                draw: null,   //interaction 对象\r\n                featureNum: 0,\r\n                listenerClick: null,\r\n                listenerChange: null,\r\n                deleteIcons: []   //删除按钮\r\n            }\r\n        },\r\n        watch: {\r\n            type(){\r\n                this.getMap().then((map) => {\r\n                    map.removeInteraction(this.draw);\r\n                    this.addInteraction(map);\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init(){\r\n                this.getMap().then((map) => {\r\n                    this.projection = map.getView().getProjection().getCode();\r\n                    this.createLayer(map);\r\n                    this.listenEvent(map);\r\n                    this.addInteraction(map);\r\n                })\r\n            },\r\n            createLayer(map){\r\n                this.source = new VectorSource(); //图层数据源\r\n                let finishedStyle = createStyle({\r\n                    fill: {\r\n                        color: [142, 77, 209, 0.3]\r\n                    },\r\n                    stroke: {\r\n                        color: '#8e4dd1', //边框颜色\r\n                        width: 2 // 边框宽度\r\n                    }\r\n                });\r\n\r\n                this.layer = new VectorLayer({\r\n                    source: this.source,\r\n                    style: finishedStyle,\r\n                    zIndex: this.zIndex\r\n                });\r\n                this.layer.set(\"measureLayer\", true);\r\n                map.addLayer(this.layer);\r\n            },\r\n            createHelpTooltip(map, name){   //创建一个新的帮助提示框\r\n                if (this.helpTooltipElement) {\r\n                    this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement);\r\n                }\r\n\r\n                this.helpTooltipElement = document.createElement('div');\r\n                this.helpTooltipElement.className = 'tooltip hidden';\r\n                this.helpTooltip = createOverlay(this.helpTooltipElement, undefined, 'helpTooltip', false);\r\n                this.helpTooltip.set(\"name\", name);\r\n                this.helpTooltip.setOffset([15, 30]);\r\n\r\n                map.addOverlay(this.helpTooltip);\r\n            },\r\n            createMeasureTooltip(map, name) {    //创建一个新的测量工具提示框\r\n                if (this.measureTooltipElement) {\r\n                    this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement);\r\n                }\r\n\r\n                this.measureTooltipElement = document.createElement('div');\r\n                this.measureTooltipElement.className = 'tooltip tooltip-measure';\r\n                this.measureTooltip = createOverlay(this.measureTooltipElement, undefined, 'helpTooltip', false);\r\n                this.measureTooltip.set(\"name\", name);\r\n                this.measureTooltip.setOffset([15, 30]);\r\n\r\n                map.addOverlay(this.measureTooltip);\r\n            },\r\n            createDistanceTooltip(map, name){   //创建一个新的节点距起点距离的提示框\r\n                /*if (this.distanceTooltipElement) {\r\n                    this.distanceTooltipElement.parentNode.removeChild(this.distanceTooltipElement);\r\n                }*/\r\n\r\n                this.distanceTooltipElement = document.createElement('div');\r\n                this.distanceTooltipElement.className = 'tooltip tooltip-distance';\r\n                this.distanceTooltip = createOverlay(this.distanceTooltipElement, undefined, 'distanceNum', false);\r\n                this.distanceTooltip.set(\"name\", name);\r\n                this.distanceTooltip.setOffset([10, 0]);\r\n\r\n                map.addOverlay(this.distanceTooltip);\r\n            },\r\n            createDelTooltip(map, name, position, coords){    //创建删除提示框\r\n                this.$nextTick(() => {\r\n                    let toolTip = createOverlay(document.getElementById(name), position, name, true);\r\n\r\n                    //根据最后一个点和倒数第二点之间的左右位置，来决定删除按钮显示位置\r\n                    let len = coords.length;\r\n                    if (coords[len - 1][0] > coords[len - 2][0]) {\r\n                        toolTip.setOffset([10, 0]);\r\n                    } else {\r\n                        toolTip.setOffset([-30, 0]);\r\n                    }\r\n                    toolTip.set(\"name\", name);\r\n\r\n                    map.addOverlay(toolTip);\r\n                });\r\n            },\r\n            formatLength(line, proj) {   //测量长度输出\r\n                const length = Math.round(getLength(line, {projection: proj}) * 100) / 100; //直接得到线的长度\r\n                let output;\r\n                if (length > 100) {\r\n                    output = '<span>' + (Math.round(length / 1000 * 100) / 100) + '</span> ' + 'km'; //换算成KM单位\r\n                } else {\r\n                    output = '<span>' + (Math.round(length * 100) / 100) + '</span> ' + 'm'; //m为单位\r\n                }\r\n                return output; //返回线的长度\r\n            },\r\n            formatArea(polygon, proj) {   //测量面积输出\r\n                const area = getArea(polygon, {projection: proj}); //直接获取多边形的面积\r\n                let output;\r\n                if (area > 10000) {\r\n                    output = '<span>' + (Math.round(area / 1000000 * 100) / 100) + '</span> ' + 'km<sup>2</sup>'; //换算成KM单位\r\n                } else {\r\n                    output = '<span>' + (Math.round(area * 100) / 100) + '</span> ' + 'm<sup>2</sup>'; //m为单位\r\n                }\r\n                return output; //返回多边形的面积\r\n            },\r\n\r\n            /**\r\n             *  @description: 鼠标移出地图\r\n             *  @author xrx\r\n             *  @date 2019/4/23 17:20\r\n             */\r\n            outEvent() {\r\n                const vm = this;\r\n                if(vm.helpTooltipElement.className.indexOf(\"hidden\")==-1){\r\n                    vm.helpTooltipElement.className+=\" hidden\";\r\n                }\r\n            },\r\n            listenerMove(evt){\r\n                const vm = this;\r\n                if (evt.dragging) {\r\n                    return;\r\n                }\r\n                vm.movePos = evt.coordinate;\r\n\r\n                //判断是否在绘制设置相应的帮助提示信息\r\n                if (vm.sketch) {\r\n                    vm.helpTooltipElement.className+=\" hidden\";\r\n                } else {\r\n                    vm.helpTooltipElement.innerHTML = \"单击确定起点\"; //将提示信息设置到对话框中显示\r\n                    vm.helpTooltip.setPosition(evt.coordinate); //设置帮助提示框的位置\r\n                    let classArr = vm.helpTooltipElement.className.split(\" \");\r\n                    const no = classArr.indexOf(\"hidden\");\r\n                    if(no!=-1){\r\n                        classArr.splice(no,1);\r\n                        vm.helpTooltipElement.className = classArr.join(\" \");\r\n                    }\r\n                }\r\n            },\r\n            listenEvent(map){\r\n                const vm = this;\r\n                const mapId = map.getTarget().id || \"default\";\r\n                Bus.$on(mapId + \".pointermove\", vm.listenerMove);\r\n                map.getViewport().addEventListener(\"mouseout\",vm.outEvent);\r\n            },\r\n            createPointStyle(map,coord, id) {\r\n                let viewProjection = map.getView().getProjection().getCode();\r\n                let data = {\r\n                    coords: coord,\r\n                    style: createStyle({\r\n                        image: {\r\n                            circle: {\r\n                                radius: 4,\r\n                                fill: {\r\n                                    color: 'white'\r\n                                },\r\n                                stroke: {\r\n                                    width: 2,\r\n                                    color: '#005699'\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                };\r\n                let feature = createFeature(data, viewProjection);\r\n                feature.set(\"id\", id);\r\n                this.source.addFeature(feature);\r\n            },\r\n            startDraw(map){\r\n                const vm = this;\r\n                //绑定交互绘制工具开始绘制的事件\r\n                this.draw.on(\"drawstart\", function(evt){\r\n                    vm.featureNum++;\r\n                    vm.sketch = evt.feature; //绘制的要素\r\n\r\n                    //给该feature以及其overlay一个唯一标识，以便于删除\r\n                    const id = \"measure\" + vm.featureNum;\r\n                    vm.sketch.set(\"id\", id);\r\n                    vm.createMeasureTooltip(map, id); //创建测量工具提示框\r\n\r\n                    vm.listenerClick = map.on(\"click\", function (evt) {\r\n                        const coord = vm.sketch.getGeometry().getLastCoordinate();\r\n                        if (vm.type == \"LineString\") {\r\n                            vm.distanceTooltipElement = null; //置空测量工具提示框对象\r\n                            vm.createDistanceTooltip(map, id);\r\n                            vm.distanceTooltipElement.innerHTML = \"起点\";\r\n                            vm.distanceTooltip.setPosition(coord);\r\n                        }\r\n\r\n                        vm.createPointStyle(map, coord, id);  //节点\r\n                    });\r\n\r\n                    //绑定change事件，根据绘制几何类型得到测量长度值或面积值，并将其设置到测量工具提示框中显示\r\n                    vm.listenerChange = vm.sketch.getGeometry().on('change', function (evt) {\r\n                        let geom = evt.target; //绘制几何要素\r\n                        let output = \"\",\r\n                            resultValue = \"\";\r\n                        if (geom instanceof Polygon) {\r\n                            resultValue = vm.formatArea(geom, vm.projection);\r\n                            output += \"<div>面积：\" + resultValue + \"</div><div>单击继续绘制，双击结束</div>\"; //面积值\r\n                        } else if (geom instanceof LineString) {\r\n                            resultValue = vm.formatLength(geom, vm.projection);\r\n                            output = \"<div>总长：\" + resultValue + \"</div><div>单击继续绘制，双击结束</div>\"; //长度值\r\n                        }\r\n                        vm.measureTooltipElement.innerHTML = output; //将测量值设置到测量工具提示框中显示\r\n                        vm.measureTooltip.setPosition(vm.movePos); //设置测量工具提示框的显示位置\r\n\r\n                        //添加多线段的中间点的距离信息\r\n                        if (vm.listenerClick) {\r\n                            unByKey(vm.listenerClick);\r\n                        }\r\n                        vm.listenerClick = map.on(\"click\", function (evt) {\r\n                            if (vm.type == \"LineString\") {\r\n                               // vm.distanceTooltipElement = null; //置空测量工具提示框对象\r\n                                vm.createDistanceTooltip(map, id);\r\n                                vm.distanceTooltipElement.innerHTML = resultValue;\r\n                                vm.distanceTooltip.setPosition(vm.movePos);\r\n                            }\r\n\r\n                            vm.createPointStyle(map, vm.movePos, id);\r\n                        });\r\n                    });\r\n                }, this);\r\n            },\r\n            endDraw(map){\r\n                const vm = this;\r\n                vm.draw.on(\"drawend\", function (evt) {\r\n\r\n                    //绘制结束，测量提示框的内容变成最后结果\r\n                    let geom = vm.sketch.getGeometry();\r\n                    let output = \"\",\r\n                        coords, len;\r\n                    if (geom instanceof Polygon) {\r\n                        output += \"<div>面积：\" + vm.formatArea(geom, vm.projection) + \"</div>\"; //面积值\r\n                        let tooltipCoord = geom.getInteriorPoint().getCoordinates();\r\n                        coords = geom.getCoordinates()[0]; //坐标\r\n                        len = coords.length;\r\n                        vm.measureTooltip.setPosition(tooltipCoord);\r\n                        vm.measureTooltip.setOffset([0, -7]);\r\n                    } else if (geom instanceof LineString) {\r\n                        coords = geom.getCoordinates(); //坐标\r\n                        len = coords.length;\r\n                        output = \"<div>总长：\" + vm.formatLength(geom, vm.projection) + \"</div>\"; //长度值\r\n\r\n                        //根据最后一个点和倒数第二点之间的上下位置，来决定测量值显示位置\r\n                        if (coords[len - 1][1] > coords[len - 2][1]) {\r\n                            vm.measureTooltip.setOffset([-5, -40]);\r\n                        } else {\r\n                            vm.measureTooltip.setOffset([-5, 20]);\r\n                        }\r\n                    }\r\n                    vm.measureTooltipElement.innerHTML = output; //将测量值设置到测量工具提示框中显示\r\n                    vm.measureTooltipElement.className = \"tooltip tooltip-static\"; //设置测量提示框的样式\r\n\r\n                    vm.deleteIcons.push({\r\n                        id: vm.sketch.get(\"id\")\r\n                    })\r\n                    vm.createDelTooltip(map, vm.deleteIcons[vm.deleteIcons.length-1].id, geom.getLastCoordinate(), coords);\r\n\r\n                    vm.sketch = null; //置空当前绘制的要素对象\r\n                    vm.measureTooltipElement = null; //置空测量工具提示框对象\r\n                    vm.distanceTooltipElement = null; //置空距离提示框对象\r\n                    map.removeOverlay(vm.distanceTooltip);   //删除最后一个距离提示框\r\n                    unByKey(vm.listenerChange);\r\n                    unByKey(vm.listenerClick);\r\n                }, this);\r\n            },\r\n            addInteraction(map) {\r\n                let styles = [];\r\n                let drawStyle = createStyle({ //绘制过程中的样式\r\n                    fill: {\r\n                        color: [142, 77, 209, 0.3]\r\n                    },\r\n                    stroke: {\r\n                        color: [142, 77, 209, 0.7],\r\n                        lineDash: [10, 5],\r\n                        width: 2\r\n                    },\r\n                    image: {\r\n                        circle: {\r\n                            radius: 2,\r\n                            fill: {\r\n                                color: 'white' //填充颜色\r\n                            },\r\n                            stroke: {\r\n                                width: 2,\r\n                                color: '#005699'\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                styles.push(drawStyle);\r\n                this.draw = new Draw({\r\n                    source: this.source, //测量绘制层数据源\r\n                    type: this.type, //几何图形类型\r\n                    style: drawStyle\r\n                });\r\n                map.addInteraction(this.draw);\r\n\r\n                this.createHelpTooltip(map, \"measure\"); //创建帮助提示框\r\n\r\n                //绑定交互绘制工具开始绘制的事件\r\n                this.startDraw(map);\r\n\r\n                //绑定交互绘制工具结束绘制的事件\r\n                this.endDraw(map);\r\n            },\r\n            delObj(id) {\r\n                const vm = this;\r\n\r\n                //feature 删除\r\n                let featureArr = vm.source.getFeatures();\r\n                let total = featureArr.length;\r\n                for (let i = total - 1; i >= 0; i--) {\r\n                    if (featureArr[i].get(\"id\") == id) {\r\n                        vm.source.removeFeature(featureArr[i]);\r\n                    }\r\n                }\r\n\r\n                vm.getMap().then((map) => {\r\n                    let layArr = map.getOverlays();\r\n                    const len = layArr.getLength();\r\n                    for (let i = len - 1; i >= 0; i--) {\r\n                        if (layArr.item(i).get(\"name\") == id) {\r\n                            layArr.removeAt(i);\r\n                        }\r\n                    }\r\n                })\r\n\r\n                //删除按钮元素清除\r\n                /*let no =  vm.deleteIcons.filter((item, no)=>{\r\n                    if(item.id==id){\r\n                        return no;\r\n                    }\r\n                })[0];\r\n                vm.deleteIcons.splice(no, 1);*/\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                this.source.clear();\r\n                map.removeLayer(vm.layer);\r\n\r\n                if(vm.draw){\r\n                    map.removeInteraction(vm.draw);\r\n                }\r\n\r\n                let ls = map.getOverlays();\r\n                let total = ls.getLength();\r\n                for(let i=total-1;i>-1;i--){\r\n                    if(ls.item(i).get(\"name\").indexOf(\"measure\")!=-1){\r\n                        map.removeOverlay(ls.item(i));\r\n                    }\r\n                }\r\n\r\n                map.getViewport().removeEventListener(\"mouseout\",vm.outEvent);\r\n\r\n                const mapId = map.getTarget().id || \"default\";\r\n                Bus.$off(mapId + \".pointermove\", vm.listenerMove);\r\n            })\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./measure.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./measure.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./measure.vue?vue&type=template&id=01a269a0&\"\nimport script from \"./measure.vue?vue&type=script&lang=js&\"\nexport * from \"./measure.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-plot\",staticStyle:{\"display\":\"none\"}},[_vm._t(\"default\",[(!_vm.noEdit)?[(_vm.selectedFeature.layPosition.length==2)?_c('ol-overlay',{staticClass:\"editLay\",attrs:{\"position\":_vm.selectedFeature.layPosition,\"projection\":_vm.viewProjection,\"offset\":_vm.layOffset}},[_c('edit-overlay',{attrs:{\"type\":_vm.selectedFeature.category,\"data\":_vm.selectedFeature.data},on:{\"change-stroke\":_vm.refreshStroke,\"change-line\":_vm.refreshLine,\"change-width\":_vm.refreshWidth,\"change-fill\":_vm.refreshFill,\"delete\":_vm.deleteFeature}})],1):_vm._e()]:_vm._e()],{\"selectedFeature\":_vm.selectedFeature})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","let EventType = {\r\n    MOUSEMOVE: 'mousemove',\r\n    MOUSEUP: 'mouseup',\r\n    MOUSEDOWN: 'mousedown'\r\n};\r\nexport default EventType;","\r\nexport default class GoogEvent {\r\n    constructor(type, opt_target){\r\n        this.type = type;\r\n        this.target = opt_target;\r\n        this.currentTarget = this.target;\r\n        this.propagationStopped_ = false;\r\n        this.defaultPrevented = false;\r\n        this.returnValue_ = true;\r\n    }\r\n\r\n    stopPropagation() {\r\n        this.propagationStopped_ = true;\r\n    }\r\n    preventDefault() {\r\n        this.defaultPrevented = true;\r\n        this.returnValue_ = false;\r\n    }\r\n    stopPropagation(e) {\r\n        e.stopPropagation();\r\n    }\r\n    preventDefault(e) {\r\n        e.preventDefault();\r\n    }\r\n}\r\n\r\n\r\n","import GoogEvent from \"../goog/event\";\r\n\r\nclass PlotDrawEvent extends GoogEvent{\r\n    constructor(type, feature){\r\n        super(type);\r\n        this.feature = feature;\r\n    }\r\n}\r\n\r\nPlotDrawEvent.DRAW_START = \"draw_start\";\r\nPlotDrawEvent.DRAW_END = \"draw_end\";\r\n\r\nexport default PlotDrawEvent;\r\n","import GoogEvent from \"../goog/event\";\r\n\r\nclass PlotEditEvent extends GoogEvent {\r\n    constructor(type, feature){\r\n        super(type);\r\n        this.feature = feature;\r\n    }\r\n}\r\nPlotEditEvent.EDIT_START = \"edit_start\";\r\nPlotEditEvent.EDIT_MOVE = \"edit_move\";\r\nPlotEditEvent.EDIT_END = \"edit_end\";\r\n\r\nexport default PlotEditEvent;","const BaseMixin = Sup => class extends Sup {\r\n    constructor(points) {\r\n        super(points);\r\n        this.setPoints(points);\r\n    }\r\n    \r\n    isPlot(){\r\n        return true;\r\n    }\r\n\r\n    setPoints(value){\r\n        this.points = value ? value : [];\r\n        if(this.points.length>=1)\r\n            this.generate();\r\n    }\r\n\r\n    getPoints(){\r\n        return this.points.slice(0);\r\n    }\r\n\r\n    getPointCount(){\r\n        return this.points.length;\r\n    }\r\n\r\n    updatePoint(point, index){\r\n        if(index>=0 && index<this.points.length){\r\n            this.points[index] = point;\r\n            this.generate();\r\n        }\r\n    }\r\n\r\n    updateLastPoint(point){\r\n        this.updatePoint(point, this.points.length-1);\r\n    }\r\n\r\n    generate(){\r\n    }\r\n\r\n    finishDrawing(){\r\n\r\n    }\r\n}\r\n\r\nexport default BaseMixin;","const PlotTypes = {\r\n    ARC: \"Arc\",\r\n    ELLIPSE: \"Ellipse\",\r\n    CURVE: \"Curve\",\r\n    CLOSED_CURVE: \"ClosedCurve\",\r\n    LUNE: \"Lune\",\r\n    SECTOR: \"Sector\",\r\n    GATHERING_PLACE: \"GatheringPlace\",\r\n    STRAIGHT_ARROW: \"StraightArrow\",\r\n    ASSAULT_DIRECTION: \"AssaultDirection\",\r\n    ATTACK_ARROW: \"AttackArrow\",\r\n    TAILED_ATTACK_ARROW: \"TailedAttackArrow\",\r\n    SQUAD_COMBAT: \"SquadCombat\",\r\n    TAILED_SQUAD_COMBAT: \"TailedSquadCombat\",\r\n    FINE_ARROW: \"FineArrow\",\r\n    CIRCLE: \"Circle\",\r\n    DOUBLE_ARROW: \"DoubleArrow\",\r\n    POLYLINE: \"Polyline\",\r\n    FREEHAND_LINE: \"FreehandLine\",\r\n    POLYGON: \"Polygon\",\r\n    FREEHAND_POLYGON: \"FreehandPolygon\",\r\n    RECTANGLE: \"Rectangle\",\r\n    MARKER: \"Marker\",\r\n    TRIANGLE: \"Triangle\"\r\n};\r\nexport default PlotTypes;\r\n","import Constants from \"./Constants\";\r\n\r\nlet PlotUtils = {};\r\n\r\nPlotUtils.distance = function(pnt1, pnt2){\r\n    return Math.sqrt(Math.pow((pnt1[0] - pnt2[0]), 2) + Math.pow((pnt1[1] - pnt2[1]), 2));\r\n};\r\n\r\nPlotUtils.wholeDistance = function(points){\r\n    let distance = 0;\r\n    for(let i=0; i<points.length-1; i++)\r\n    distance += PlotUtils.distance(points[i], points[i+1]);\r\n    return distance;\r\n};\r\n\r\nPlotUtils.getBaseLength = function(points){\r\n    return Math.pow(PlotUtils.wholeDistance(points), 0.99);\r\n    //return PlotUtils.wholeDistance(points);\r\n};\r\n\r\nPlotUtils.mid = function(pnt1, pnt2){\r\n    return [(pnt1[0]+pnt2[0])/2, (pnt1[1]+pnt2[1])/2];\r\n};\r\n\r\nPlotUtils.getCircleCenterOfThreePoints = function(pnt1, pnt2, pnt3){\r\n    let pntA = [(pnt1[0]+pnt2[0])/2, (pnt1[1]+pnt2[1])/2];\r\n    let pntB = [pntA[0]-pnt1[1]+pnt2[1], pntA[1]+pnt1[0]-pnt2[0]];\r\n    let pntC = [(pnt1[0]+pnt3[0])/2, (pnt1[1]+pnt3[1])/2];\r\n    let pntD = [pntC[0]-pnt1[1]+pnt3[1], pntC[1]+pnt1[0]-pnt3[0]];\r\n    return PlotUtils.getIntersectPoint(pntA, pntB, pntC, pntD);\r\n};\r\n\r\nPlotUtils.getIntersectPoint = function(pntA, pntB, pntC, pntD){\r\n    let f, x, y, e;\r\n    if(pntA[1] == pntB[1]){\r\n        f = (pntD[0]-pntC[0])/(pntD[1]-pntC[1]);\r\n        x = f*(pntA[1]-pntC[1])+pntC[0];\r\n        y = pntA[1];\r\n        return [x, y];\r\n    }\r\n    if(pntC[1] == pntD[1]){\r\n        e = (pntB[0]-pntA[0])/(pntB[1]-pntA[1]);\r\n        x = e*(pntC[1]-pntA[1])+pntA[0];\r\n        y = pntC[1];\r\n        return [x, y];\r\n    }\r\n    e = (pntB[0]-pntA[0])/(pntB[1]-pntA[1]);\r\n    f = (pntD[0]-pntC[0])/(pntD[1]-pntC[1]);\r\n    y = (e*pntA[1]-pntA[0]-f*pntC[1]+pntC[0])/(e-f);\r\n    x = e*y-e*pntA[1]+pntA[0];\r\n    return [x, y];\r\n};\r\n\r\nPlotUtils.getAzimuth = function(startPnt, endPnt){\r\n    let azimuth;\r\n    let angle=Math.asin(Math.abs(endPnt[1] - startPnt[1]) / PlotUtils.distance(startPnt, endPnt));\r\n    if (endPnt[1] >= startPnt[1] && endPnt[0] >= startPnt[0])\r\n        azimuth=angle + Math.PI;\r\n    else if (endPnt[1] >= startPnt[1] && endPnt[0] < startPnt[0])\r\n        azimuth=Constants.TWO_PI - angle;\r\n    else if (endPnt[1] < startPnt[1] && endPnt[0] < startPnt[0])\r\n        azimuth=angle;\r\n    else if (endPnt[1] < startPnt[1] && endPnt[0] >= startPnt[0])\r\n        azimuth=Math.PI - angle;\r\n    return azimuth;\r\n};\r\n\r\nPlotUtils.getAngleOfThreePoints = function(pntA, pntB, pntC){\r\n    let angle=PlotUtils.getAzimuth(pntB, pntA) - PlotUtils.getAzimuth(pntB, pntC);\r\n    return (angle<0 ? angle + Constants.TWO_PI : angle);\r\n};\r\n\r\nPlotUtils.isClockWise = function(pnt1, pnt2, pnt3){\r\n    return ((pnt3[1]-pnt1[1])*(pnt2[0]-pnt1[0]) > (pnt2[1]-pnt1[1])*(pnt3[0]-pnt1[0]));\r\n};\r\n\r\nPlotUtils.getPointOnLine = function(t, startPnt, endPnt){\r\n    let x = startPnt[0] + (t * (endPnt[0] - startPnt[0]));\r\n    let y = startPnt[1] + (t * (endPnt[1] - startPnt[1]));\r\n    return [x, y];\r\n};\r\n\r\nPlotUtils.getCubicValue = function(t, startPnt, cPnt1, cPnt2, endPnt){\r\n    t = Math.max(Math.min(t, 1), 0);\r\n    let tp = 1 - t;\r\n    let t2 = t * t;\r\n    let t3 = t2 * t;\r\n    let tp2 = tp * tp;\r\n    let tp3 = tp2 * tp;\r\n    let x = (tp3*startPnt[0]) + (3*tp2*t*cPnt1[0]) + (3*tp*t2*cPnt2[0]) + (t3*endPnt[0]);\r\n    let y = (tp3*startPnt[1]) + (3*tp2*t*cPnt1[1]) + (3*tp*t2*cPnt2[1]) + (t3*endPnt[1]);\r\n    return [x, y];\r\n};\r\n\r\nPlotUtils.getThirdPoint = function(startPnt, endPnt, angle, distance, clockWise){\r\n    let azimuth=PlotUtils.getAzimuth(startPnt, endPnt);\r\n    let alpha = clockWise ? azimuth+angle : azimuth-angle;\r\n    let dx=distance * Math.cos(alpha);\r\n    let dy=distance * Math.sin(alpha);\r\n    return [endPnt[0] + dx, endPnt[1] + dy]; \r\n};\r\n\r\nPlotUtils.getArcPoints = function(center, radius, startAngle, endAngle){\r\n    let x, y, pnts=[];\r\n    let angleDiff = endAngle - startAngle;\r\n    angleDiff = angleDiff < 0 ? angleDiff + Constants.TWO_PI : angleDiff;\r\n    for (let i=0; i<=Constants.FITTING_COUNT; i++)\r\n    {\r\n        let angle = startAngle + angleDiff * i / Constants.FITTING_COUNT;\r\n        x=center[0] + radius * Math.cos(angle);\r\n        y=center[1] + radius * Math.sin(angle);\r\n        pnts.push([x, y]);\r\n    }\r\n    return pnts;\r\n};\r\n\r\nPlotUtils.getBisectorNormals = function(t, pnt1, pnt2, pnt3){\r\n    let normal = PlotUtils.getNormal(pnt1, pnt2, pnt3);\r\n    let dist = Math.sqrt(normal[0]*normal[0] + normal[1]*normal[1]);\r\n    let uX = normal[0]/dist;\r\n    let uY = normal[1]/dist;\r\n    let d1 = PlotUtils.distance(pnt1, pnt2);\r\n    let d2 = PlotUtils.distance(pnt2, pnt3);\r\n    let dt, x, y, bisectorNormalRight, bisectorNormalLeft;\r\n    if(dist > Constants.ZERO_TOLERANCE){\r\n        if(PlotUtils.isClockWise(pnt1, pnt2, pnt3)){\r\n            dt = t * d1;\r\n            x = pnt2[0] - dt*uY;\r\n            y = pnt2[1] + dt*uX;\r\n            bisectorNormalRight = [x, y];\r\n            dt = t * d2;\r\n            x = pnt2[0] + dt*uY;\r\n            y = pnt2[1] - dt*uX;\r\n            bisectorNormalLeft = [x, y];\r\n        }\r\n        else{\r\n            dt = t * d1;\r\n            x = pnt2[0] + dt*uY;\r\n            y = pnt2[1] - dt*uX;\r\n            bisectorNormalRight = [x, y];\r\n            dt = t * d2;\r\n            x = pnt2[0] - dt*uY;\r\n            y = pnt2[1] + dt*uX;\r\n            bisectorNormalLeft = [x, y];\r\n        }\r\n    }\r\n    else{\r\n        x = pnt2[0] + t*(pnt1[0] - pnt2[0]);\r\n        y = pnt2[1] + t*(pnt1[1] - pnt2[1]);\r\n        bisectorNormalRight = [x, y];\r\n        x = pnt2[0] + t*(pnt3[0] - pnt2[0]);\r\n        y = pnt2[1] + t*(pnt3[1] - pnt2[1]);\r\n        bisectorNormalLeft = [x, y];\r\n    }\r\n    return [bisectorNormalRight, bisectorNormalLeft];\r\n};\r\n\r\nPlotUtils.getNormal = function(pnt1, pnt2, pnt3){\r\n    let dX1 = pnt1[0] - pnt2[0];\r\n    let dY1 = pnt1[1] - pnt2[1];\r\n    let d1 = Math.sqrt(dX1*dX1 + dY1*dY1);\r\n    dX1 /= d1;\r\n    dY1 /= d1;\r\n\r\n    let dX2 = pnt3[0] - pnt2[0];\r\n    let dY2 = pnt3[1] - pnt2[1];\r\n    let d2 = Math.sqrt(dX2*dX2 + dY2*dY2);\r\n    dX2 /= d2;\r\n    dY2 /= d2;\r\n\r\n    let uX = dX1 + dX2;\r\n    let uY = dY1 + dY2;\r\n    return [uX, uY];\r\n};\r\n\r\nPlotUtils.getCurvePoints = function(t, controlPoints){\r\n    let leftControl = PlotUtils.getLeftMostControlPoint(controlPoints);\r\n    let normals = [leftControl];\r\n    let pnt1, pnt2, pnt3, normalPoints;\r\n    for(let i=0; i<controlPoints.length-2; i++){\r\n        pnt1 = controlPoints[i];\r\n        pnt2 = controlPoints[i+1];\r\n        pnt3 = controlPoints[i+2];\r\n        normalPoints = PlotUtils.getBisectorNormals(t, pnt1, pnt2, pnt3);\r\n        normals = normals.concat(normalPoints);\r\n    }\r\n    let rightControl = PlotUtils.getRightMostControlPoint(controlPoints);\r\n    normals.push(rightControl);\r\n    let points = [];\r\n    for(let i=0; i<controlPoints.length-1; i++){\r\n        pnt1 = controlPoints[i];\r\n        pnt2 = controlPoints[i+1];\r\n        points.push(pnt1);\r\n        for(let t=0; t<Constants.FITTING_COUNT; t++){\r\n            let pnt = PlotUtils.getCubicValue(t/Constants.FITTING_COUNT, pnt1, normals[i*2],\r\n                normals[i*2+1], pnt2);\r\n            points.push(pnt);\r\n        }\r\n        points.push(pnt2);\r\n    }\r\n    return points;\r\n};\r\n\r\nPlotUtils.getLeftMostControlPoint = function(controlPoints){\r\n    let pnt1 = controlPoints[0];\r\n    let pnt2 = controlPoints[1];\r\n    let pnt3 = controlPoints[2];\r\n    let pnts = PlotUtils.getBisectorNormals(0, pnt1, pnt2, pnt3);\r\n    let normalRight = pnts[0];\r\n    let normal = PlotUtils.getNormal(pnt1, pnt2, pnt3);\r\n    let dist = Math.sqrt(normal[0]*normal[0] + normal[1]*normal[1]);\r\n    let controlX, controlY;\r\n    if(dist > Constants.ZERO_TOLERANCE){\r\n        let mid = PlotUtils.mid(pnt1, pnt2);\r\n        let pX = pnt1[0] - mid[0];\r\n        let pY = pnt1[1] - mid[1];\r\n\r\n        let d1 = PlotUtils.distance(pnt1, pnt2);\r\n        // normal at midpoint\r\n        let n  = 2.0/d1;\r\n        let nX = -n*pY;\r\n        let nY = n*pX;\r\n\r\n        // upper triangle of symmetric transform matrix\r\n        let a11 = nX*nX - nY*nY\r\n        let a12 = 2*nX*nY;\r\n        let a22 = nY*nY - nX*nX;\r\n\r\n        let dX = normalRight[0] - mid[0];\r\n        let dY = normalRight[1] - mid[1];\r\n\r\n        // coordinates of reflected vector\r\n        controlX = mid[0] + a11*dX + a12*dY;\r\n        controlY = mid[1] + a12*dX + a22*dY;\r\n    }\r\n    else{\r\n        controlX = pnt1[0] + t*(pnt2[0] - pnt1[0]);\r\n        controlY = pnt1[1] + t*(pnt2[1] - pnt1[1]);\r\n    }\r\n    return [controlX, controlY];\r\n};\r\n\r\nPlotUtils.getRightMostControlPoint = function(controlPoints){\r\n    let count = controlPoints.length;\r\n    let pnt1 = controlPoints[count-3];\r\n    let pnt2 = controlPoints[count-2];\r\n    let pnt3 = controlPoints[count-1];\r\n    let pnts = PlotUtils.getBisectorNormals(0, pnt1, pnt2, pnt3);\r\n    let normalLeft = pnts[1];\r\n    let normal = PlotUtils.getNormal(pnt1, pnt2, pnt3);\r\n    let dist = Math.sqrt(normal[0]*normal[0] + normal[1]*normal[1]);\r\n    let controlX, controlY;\r\n    if(dist > Constants.ZERO_TOLERANCE){\r\n        let mid = PlotUtils.mid(pnt2, pnt3);\r\n        let pX = pnt3[0] - mid[0];\r\n        let pY = pnt3[1] - mid[1];\r\n\r\n        let d1 = PlotUtils.distance(pnt2, pnt3);\r\n        // normal at midpoint\r\n        let n  = 2.0/d1;\r\n        let nX = -n*pY;\r\n        let nY = n*pX;\r\n\r\n        // upper triangle of symmetric transform matrix\r\n        let a11 = nX*nX - nY*nY\r\n        let a12 = 2*nX*nY;\r\n        let a22 = nY*nY - nX*nX;\r\n\r\n        let dX = normalLeft[0] - mid[0];\r\n        let dY = normalLeft[1] - mid[1];\r\n\r\n        // coordinates of reflected vector\r\n        controlX = mid[0] + a11*dX + a12*dY;\r\n        controlY = mid[1] + a12*dX + a22*dY;\r\n    }\r\n    else{\r\n        controlX = pnt3[0] + t*(pnt2[0] - pnt3[0]);\r\n        controlY = pnt3[1] + t*(pnt2[1] - pnt3[1]);\r\n    }\r\n    return [controlX, controlY];\r\n};\r\n\r\nPlotUtils.getBezierPoints = function(points){\r\n    if (points.length <= 2)\r\n        return points;\r\n\r\n    let bezierPoints=[];\r\n    let n=points.length - 1;\r\n    for (let t=0; t <= 1; t+=0.01){\r\n        let x=0, y=0;\r\n        for (let index=0; index <= n; index++){\r\n            let factor=PlotUtils.getBinomialFactor(n, index);\r\n            let a=Math.pow(t, index);\r\n            let b=Math.pow((1 - t), (n - index));\r\n            x+=factor * a * b * points[index][0];\r\n            y+=factor * a * b * points[index][1];\r\n        }\r\n        bezierPoints.push([x, y]);\r\n    }\r\n    bezierPoints.push(points[n]);\r\n    return bezierPoints;\r\n};\r\n\r\nPlotUtils.getBinomialFactor = function(n, index){\r\n    return PlotUtils.getFactorial(n) / (PlotUtils.getFactorial(index) * PlotUtils.getFactorial(n - index));\r\n};\r\n\r\nPlotUtils.getFactorial = function(n){\r\n    if (n <= 1)\r\n        return 1;\r\n    if (n == 2)\r\n        return 2;\r\n    if (n == 3)\r\n        return 6;\r\n    if (n == 4)\r\n        return 24;\r\n    if (n == 5)\r\n        return 120;\r\n    let result=1;\r\n    for (let i=1; i <= n; i++)\r\n        result*=i;\r\n    return result;\r\n};\r\n\r\nPlotUtils.getQBSplinePoints = function(points){\r\n    if (points.length <= 2 )\r\n        return points;\r\n\r\n    let n = 2;\r\n\r\n    let bSplinePoints=[];\r\n    let m=points.length - n - 1;\r\n    bSplinePoints.push(points[0]);\r\n    for (let i=0; i <= m; i++){\r\n        for (let t=0; t <= 1; t+=0.05){\r\n            let x=0, y=0;\r\n            for (let k=0; k <= n; k++){\r\n                let factor=PlotUtils.getQuadricBSplineFactor(k, t);\r\n                x+=factor * points[i + k][0];\r\n                y+=factor * points[i + k][1];\r\n            }\r\n            bSplinePoints.push([x, y]);\r\n        }\r\n    }\r\n    bSplinePoints.push(points[points.length - 1]);\r\n    return bSplinePoints;\r\n};\r\n\r\nPlotUtils.getQuadricBSplineFactor = function(k, t){\r\n    if (k == 0)\r\n        return Math.pow(t - 1, 2) / 2;\r\n    if (k == 1)\r\n        return (-2 * Math.pow(t, 2) + 2 * t + 1) / 2;\r\n    if (k == 2)\r\n        return Math.pow(t, 2) / 2;\r\n    return 0;\r\n};\r\n\r\nPlotUtils.mixin = function (target, source) {\r\n    for (let x in source) {\r\n        target[x] = source[x];\r\n    }\r\n}\r\n\r\nexport default PlotUtils;","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\" ;\r\n\r\nimport LineString from \"ol/geom/LineString\";\r\n\r\nexport default class Arc extends BaseMixin(LineString) {\r\n    \r\n    constructor(points=[]) {\r\n        super(points);\r\n        this.type = PlotTypes.ARC;\r\n        this.fixPointCount = 3;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate(){\r\n        const count = this.getPointCount();\r\n        if(count < 2){\r\n            return;\r\n        }\r\n        if(count==2) {\r\n            this.setCoordinates(this.points);\r\n        }else{\r\n            let pnt1 = this.points[0];\r\n            let pnt2 = this.points[1];\r\n            let pnt3 = this.points[2];\r\n            let center = PlotUtils.getCircleCenterOfThreePoints(pnt1, pnt2, pnt3);\r\n            let radius = PlotUtils.distance(pnt1, center);\r\n\r\n            let angle1 = PlotUtils.getAzimuth(pnt1, center);\r\n            let angle2 = PlotUtils.getAzimuth(pnt2, center);\r\n            let startAngle, endAngle;\r\n            if(PlotUtils.isClockWise(pnt1, pnt2, pnt3)){\r\n                startAngle = angle2;\r\n                endAngle = angle1;\r\n            }\r\n            else{\r\n                startAngle = angle1;\r\n                endAngle = angle2;\r\n            }\r\n            this.setCoordinates(PlotUtils.getArcPoints(center, radius, startAngle, endAngle));\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\" ;\r\nimport Constants from \"../Constants\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\"\r\n\r\nexport default class Ellipse extends BaseMixin(Polygon) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.ELLIPSE;\r\n        this.fixPointCount = 2;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        let pnt1 = this.points[0];\r\n        let pnt2 = this.points[1];\r\n        let center = PlotUtils.mid(pnt1, pnt2);\r\n        let majorRadius = Math.abs((pnt1[0]-pnt2[0])/2);\r\n        let minorRadius = Math.abs((pnt1[1]-pnt2[1])/2);\r\n        this.setCoordinates([this.generatePoints(center, majorRadius, minorRadius)]);\r\n    }\r\n\r\n    generatePoints(center, majorRadius, minorRadius) {\r\n        let x, y, angle, points = [];\r\n        for (let i = 0; i <= Constants.FITTING_COUNT; i++) {\r\n            angle = Math.PI * 2 * i / Constants.FITTING_COUNT;\r\n            x = center[0] + majorRadius * Math.cos(angle);\r\n            y = center[1] + minorRadius * Math.sin(angle);\r\n            points.push([x, y]);\r\n        }\r\n        return points;\r\n    }\r\n}\r\n\r\n","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\" ;\r\n\r\nimport LineString from \"ol/geom/LineString\";\r\n\r\nexport default class Curve extends BaseMixin(LineString) {\r\n    constructor (points=[]){\r\n        super(points);\r\n        this.type = PlotTypes.CURVE;\r\n        this.t = 0.3;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate(){\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        if(count == 2) {\r\n            this.setCoordinates(this.points);\r\n        } else {\r\n            this.setCoordinates(PlotUtils.getCurvePoints(this.t, this.points));\r\n        }\r\n    }\r\n}\r\n","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\" ;\r\nimport Constants from \"../Constants\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\";\r\n\r\nexport default class ClosedCurve extends BaseMixin(Polygon) {\r\n    constructor (points=[]){\r\n        super(points);\r\n        this.type = PlotTypes.CLOSED_CURVE;\r\n        this.t = 0.3;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate(){\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        if(count == 2) {\r\n            this.setCoordinates([this.points]);\r\n        }\r\n        else{\r\n            let pnts = this.getPoints();\r\n            pnts.push(pnts[0], pnts[1]);\r\n            let normals = [];\r\n            for(let i=0; i<pnts.length-2; i++){\r\n                let normalPoints = PlotUtils.getBisectorNormals(this.t, pnts[i], pnts[i+1], pnts[i+2]);\r\n                normals = normals.concat(normalPoints);\r\n            }\r\n            let count = normals.length;\r\n            normals = [normals[count-1]].concat(normals.slice(0, count-1));\r\n\r\n            let pList = [];\r\n            for(let i=0; i<pnts.length-2; i++){\r\n                let pnt1 = pnts[i];\r\n                let pnt2 = pnts[i+1];\r\n                pList.push(pnt1);\r\n                for(let t=0; t<= Constants.FITTING_COUNT; t++){\r\n                    let pnt = PlotUtils.getCubicValue(t / Constants.FITTING_COUNT, pnt1, normals[i*2], normals[i*2+1], pnt2);\r\n                    pList.push(pnt);\r\n                }\r\n                pList.push(pnt2);\r\n            }\r\n            this.setCoordinates([pList]);\r\n        }\r\n    }\r\n}\r\n","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\";\r\nimport Constants from \"../Constants\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\";\r\n\r\nexport default class Lune extends BaseMixin(Polygon) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.LUNE;\r\n        this.fixPointCount = 3;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        if(this.getPointCount()<2) {\r\n            return;\r\n        }\r\n        let pnts = this.getPoints();\r\n        if(this.getPointCount()==2){\r\n            let mid = PlotUtils.mid(pnts[0], pnts[1]);\r\n            let d = PlotUtils.distance(pnts[0], mid);\r\n            let pnt = PlotUtils.getThirdPoint(pnts[0], mid, Constants.HALF_PI, d);\r\n            pnts.push(pnt);\r\n        }\r\n        let pnt1 = pnts[0];\r\n        let pnt2 = pnts[1];\r\n        let pnt3 = pnts[2];\r\n        let center = PlotUtils.getCircleCenterOfThreePoints(pnt1, pnt2, pnt3);\r\n        let radius = PlotUtils.distance(pnt1, center);\r\n\r\n        let angle1 = PlotUtils.getAzimuth(pnt1, center);\r\n        let angle2 = PlotUtils.getAzimuth(pnt2, center);\r\n        let startAngle, endAngle;\r\n        if(PlotUtils.isClockWise(pnt1, pnt2, pnt3)){\r\n            startAngle = angle2;\r\n            endAngle = angle1;\r\n        }\r\n        else{\r\n            startAngle = angle1;\r\n            endAngle = angle2;\r\n        }\r\n        pnts = PlotUtils.getArcPoints(center, radius, startAngle, endAngle);\r\n        pnts.push(pnts[0]);\r\n        this.setCoordinates([pnts]);\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\";\r\n\r\nexport default class Sector extends BaseMixin(Polygon) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.SECTOR;\r\n        this.fixPointCount = 3;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        if(this.getPointCount()<2)\r\n            return;\r\n        if(this.getPointCount()==2)\r\n            this.setCoordinates([this.points]);\r\n        else{\r\n            let pnts = this.getPoints();\r\n            let center = pnts[0];\r\n            let pnt2 = pnts[1];\r\n            let pnt3 = pnts[2];\r\n            let radius = PlotUtils.distance(pnt2, center);\r\n            let startAngle = PlotUtils.getAzimuth(pnt2, center);\r\n            let endAngle = PlotUtils.getAzimuth(pnt3, center);\r\n\r\n            let pList = PlotUtils.getArcPoints(center, radius, startAngle, endAngle);\r\n            pList.push(center, pList[0]);\r\n            this.setCoordinates([pList]);\r\n        }\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\";\r\nimport Constants from \"../Constants\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\";\r\n\r\nexport default class GatheringPlace extends BaseMixin(Polygon) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.GATHERING_PLACE;\r\n        this.t = 0.4;\r\n        this.fixPointCount = 3;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        let pnts = this.getPoints();\r\n        if(pnts.length<2){\r\n            return;\r\n        }\r\n        if(this.getPointCount()==2){\r\n            let mid = PlotUtils.mid(pnts[0], pnts[1]);\r\n            let d = PlotUtils.distance(pnts[0], mid)/0.9;\r\n            let pnt = PlotUtils.getThirdPoint(pnts[0], mid, Constants.HALF_PI, d, true);\r\n            pnts = [pnts[0], pnt, pnts[1]];\r\n        }\r\n        let mid = PlotUtils.mid(pnts[0], pnts[2]);\r\n        pnts.push(mid, pnts[0], pnts[1]);\r\n\r\n        let normals = [];\r\n        for(let i=0; i<pnts.length-2; i++){\r\n            let pnt1 = pnts[i];\r\n            let pnt2 = pnts[i+1];\r\n            let pnt3 = pnts[i+2];\r\n            let normalPoints = PlotUtils.getBisectorNormals(this.t, pnt1, pnt2, pnt3);\r\n            normals = normals.concat(normalPoints);\r\n        }\r\n        let count = normals.length;\r\n        normals = [normals[count-1]].concat(normals.slice(0, count-1));\r\n        let pList = [];\r\n        for(let i=0; i<pnts.length-2; i++){\r\n            let pnt1 = pnts[i];\r\n            let pnt2 = pnts[i+1];\r\n            pList.push(pnt1);\r\n            for(let  t=0; t<=Constants.FITTING_COUNT; t++){\r\n                let  pnt = PlotUtils.getCubicValue(t/Constants.FITTING_COUNT, pnt1, normals[i*2], normals[i*2+1], pnt2);\r\n                pList.push(pnt);\r\n            }\r\n            pList.push(pnt2);\r\n        }\r\n        this.setCoordinates([pList]);\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\";\r\n\r\nimport LineString from \"ol/geom/LineString\";\r\n\r\nexport default class StraightArrow extends BaseMixin(LineString) {\r\n\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.STRAIGHT_ARROW;\r\n        this.fixPointCount = 2;\r\n        this.maxArrowLength = 3000000;\r\n        this.arrowLengthScale = 5;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        if(this.getPointCount()<2) {\r\n            return;\r\n        }\r\n        let pnts = this.getPoints();\r\n        let pnt1 = pnts[0];\r\n        let pnt2 = pnts[1];\r\n        let distance = PlotUtils.distance(pnt1, pnt2);\r\n        let len = distance / this.arrowLengthScale;\r\n        len = len > this.maxArrowLength ? this.maxArrowLength : len;\r\n        let leftPnt = PlotUtils.getThirdPoint(pnt1, pnt2, Math.PI/6, len, false);\r\n        let rightPnt = PlotUtils.getThirdPoint(pnt1, pnt2, Math.PI/6, len, true);\r\n        this.setCoordinates([pnt1, pnt2, leftPnt, pnt2, rightPnt]);\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\" ;\r\nimport Constants from \"../Constants\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\"\r\n\r\nexport default class FineArrow extends BaseMixin(Polygon) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.FINE_ARROW;\r\n        this.tailWidthFactor = 0.15;\r\n        this.neckWidthFactor = 0.2;\r\n        this.headWidthFactor = 0.25;\r\n        this.headAngle = Math.PI / 8.5;\r\n        this.neckAngle = Math.PI / 13;\r\n        this.fixPointCount = 2;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        let pnts = this.getPoints();\r\n        let pnt1 = pnts[0];\r\n        let pnt2 = pnts[1];\r\n        let len = PlotUtils.getBaseLength(pnts);\r\n        let tailWidth = len * this.tailWidthFactor;\r\n        let neckWidth = len * this.neckWidthFactor;\r\n        let headWidth = len * this.headWidthFactor;\r\n        let tailLeft = PlotUtils.getThirdPoint(pnt2, pnt1, Constants.HALF_PI, tailWidth, true);\r\n        let tailRight = PlotUtils.getThirdPoint(pnt2, pnt1, Constants.HALF_PI, tailWidth, false);\r\n        let headLeft = PlotUtils.getThirdPoint(pnt1, pnt2, this.headAngle, headWidth, false);\r\n        let headRight = PlotUtils.getThirdPoint(pnt1, pnt2, this.headAngle, headWidth, true);\r\n        let neckLeft = PlotUtils.getThirdPoint(pnt1, pnt2, this.neckAngle, neckWidth, false);\r\n        let neckRight = PlotUtils.getThirdPoint(pnt1, pnt2, this.neckAngle, neckWidth, true);\r\n        let pList = [tailLeft, neckLeft, headLeft, pnt2, headRight, neckRight, tailRight];\r\n        this.setCoordinates([pList]);\r\n    }\r\n}","import PlotTypes from \"../PlotTypes\";\r\nimport FineArrow from \"./FineArrow\";\r\n\r\nexport default class AssaultDirection extends FineArrow {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.ASSAULT_DIRECTION;\r\n        this.tailWidthFactor = 0.2;\r\n        this.neckWidthFactor = 0.25;\r\n        this.headWidthFactor = 0.3;\r\n        this.headAngle = Math.PI / 4;\r\n        this.neckAngle = Math.PI * 0.17741;\r\n        this.setPoints(points);\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\" ;\r\nimport Constants from \"../Constants\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\"\r\n\r\nexport default class AttackArrow extends BaseMixin(Polygon) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.ATTACK_ARROW;\r\n        this.headHeightFactor = 0.18;\r\n        this.headWidthFactor = 0.3;\r\n        this.neckHeightFactor = 0.85;\r\n        this.neckWidthFactor = 0.15;\r\n        this.headTailFactor = 0.8;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        if (this.getPointCount() < 2){\r\n            return;\r\n        }\r\n        if (this.getPointCount() == 2) {\r\n            this.setCoordinates([this.points]);\r\n            return;\r\n        }\r\n        let pnts = this.getPoints();\r\n        // 计算箭尾\r\n        let tailLeft = pnts[0];\r\n        let tailRight = pnts[1];\r\n        if (PlotUtils.isClockWise(pnts[0], pnts[1], pnts[2])) {\r\n            tailLeft = pnts[1];\r\n            tailRight = pnts[0];\r\n        }\r\n        let midTail = PlotUtils.mid(tailLeft, tailRight);\r\n        let bonePnts = [midTail].concat(pnts.slice(2));\r\n        // 计算箭头\r\n        let headPnts = this.getArrowHeadPoints(bonePnts, tailLeft, tailRight);\r\n        let neckLeft = headPnts[0];\r\n        let neckRight = headPnts[4];\r\n        let tailWidthFactor = PlotUtils.distance(tailLeft, tailRight) / PlotUtils.getBaseLength(bonePnts);\r\n        // 计算箭身\r\n        let bodyPnts = this.getArrowBodyPoints(bonePnts, neckLeft, neckRight, tailWidthFactor);\r\n        // 整合\r\n        let count = bodyPnts.length;\r\n        let leftPnts = [tailLeft].concat(bodyPnts.slice(0, count / 2));\r\n        leftPnts.push(neckLeft);\r\n        let rightPnts = [tailRight].concat(bodyPnts.slice(count / 2, count));\r\n        rightPnts.push(neckRight);\r\n\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts);\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts);\r\n\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse())]);\r\n    }\r\n\r\n    getArrowHeadPoints(points, tailLeft, tailRight) {\r\n        let len = PlotUtils.getBaseLength(points);\r\n        let headHeight = len * this.headHeightFactor;\r\n        let headPnt = points[points.length - 1];\r\n        len = PlotUtils.distance(headPnt, points[points.length - 2]);\r\n        let tailWidth = PlotUtils.distance(tailLeft, tailRight);\r\n        if (headHeight > tailWidth * this.headTailFactor) {\r\n            headHeight = tailWidth * this.headTailFactor;\r\n        }\r\n        let headWidth = headHeight * this.headWidthFactor;\r\n        let neckWidth = headHeight * this.neckWidthFactor;\r\n        headHeight = headHeight > len ? len : headHeight;\r\n        let neckHeight = headHeight * this.neckHeightFactor;\r\n        let headEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, headHeight, true);\r\n        let neckEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, neckHeight, true);\r\n        let headLeft = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, false);\r\n        let headRight = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, true);\r\n        let neckLeft = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, false);\r\n        let neckRight = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, true);\r\n        return [neckLeft, headLeft, headPnt, headRight, neckRight];\r\n    }\r\n\r\n    getArrowBodyPoints(points, neckLeft, neckRight, tailWidthFactor) {\r\n        let allLen = PlotUtils.wholeDistance(points);\r\n        let len = PlotUtils.getBaseLength(points);\r\n        let tailWidth = len * tailWidthFactor;\r\n        let neckWidth = PlotUtils.distance(neckLeft, neckRight);\r\n        let widthDif = (tailWidth - neckWidth) / 2;\r\n        let tempLen = 0, leftBodyPnts = [], rightBodyPnts = [];\r\n        for (let i = 1; i < points.length - 1; i++) {\r\n            let angle = PlotUtils.getAngleOfThreePoints(points[i - 1], points[i], points[i + 1]) / 2;\r\n            tempLen += PlotUtils.distance(points[i - 1], points[i]);\r\n            let w = (tailWidth / 2 - tempLen / allLen * widthDif) / Math.sin(angle);\r\n            let left = PlotUtils.getThirdPoint(points[i - 1], points[i], Math.PI - angle, w, true);\r\n            let right = PlotUtils.getThirdPoint(points[i - 1], points[i], angle, w, false);\r\n            leftBodyPnts.push(left);\r\n            rightBodyPnts.push(right);\r\n        }\r\n        return leftBodyPnts.concat(rightBodyPnts);\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\" ;\r\nimport Constants from \"../Constants\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\";\r\n\r\nexport default class Circle extends BaseMixin(Polygon) {\r\n    constructor(points=[]) {\r\n        super(points);\r\n        this.type = PlotTypes.CIRCLE;\r\n        this.fixPointCount = 2;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate(){\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        let center = this.points[0];\r\n        let radius = PlotUtils.distance(center, this.points[1]);\r\n        this.setCoordinates([this.generatePoints(center, radius)]);\r\n    }\r\n\r\n    generatePoints(center, radius){\r\n        let x, y, angle, points=[];\r\n        for(let i=0; i<= Constants.FITTING_COUNT; i++){\r\n            angle = Math.PI*2*i/ Constants.FITTING_COUNT;\r\n            x = center[0] + radius*Math.cos(angle);\r\n            y = center[1] + radius*Math.sin(angle);\r\n            points.push([x,y]);\r\n        }\r\n        return points;\r\n    }\r\n}\r\n\r\n","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\" ;\r\nimport Constants from \"../Constants\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\"\r\n\r\nexport default class DoubleArrow extends BaseMixin(Polygon) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.DOUBLE_ARROW;\r\n        this.headHeightFactor = 0.25;\r\n        this.headWidthFactor = 0.3;\r\n        this.neckHeightFactor = 0.85;\r\n        this.neckWidthFactor = 0.15;\r\n        this.connPoint = null;\r\n        this.tempPoint4 = null;\r\n        this.fixPointCount = 4;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    finishDrawing() {\r\n        if (this.getPointCount() == 3 && this.tempPoint4 != null)\r\n            this.points.push(this.tempPoint4);\r\n        if (this.connPoint != null)\r\n            this.points.push(this.connPoint);\r\n    }\r\n\r\n    generate() {\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        if(count == 2) {\r\n            this.setCoordinates([this.points]);\r\n            return;\r\n        }\r\n\r\n        let pnt1 = this.points[0];\r\n        let pnt2 = this.points[1];\r\n        let pnt3 = this.points[2];\r\n\r\n        if (count == 3)\r\n            this.tempPoint4 = this.getTempPoint4(pnt1, pnt2, pnt3);\r\n        else\r\n            this.tempPoint4 = this.points[3];\r\n        if (count == 3 || count == 4)\r\n            this.connPoint = PlotUtils.mid(pnt1, pnt2);\r\n        else\r\n            this.connPoint = this.points[4];\r\n        let leftArrowPnts, rightArrowPnts;\r\n        if (PlotUtils.isClockWise(pnt1, pnt2, pnt3)) {\r\n            leftArrowPnts = this.getArrowPoints(pnt1, this.connPoint, this.tempPoint4, false);\r\n            rightArrowPnts = this.getArrowPoints(this.connPoint, pnt2, pnt3, true);\r\n        } else {\r\n            leftArrowPnts = this.getArrowPoints(pnt2, this.connPoint, pnt3, false);\r\n            rightArrowPnts = this.getArrowPoints(this.connPoint, pnt1, this.tempPoint4, true);\r\n        }\r\n        let m = leftArrowPnts.length;\r\n        let t = (m - 5) / 2;\r\n\r\n        let llBodyPnts = leftArrowPnts.slice(0, t);\r\n        let lArrowPnts = leftArrowPnts.slice(t, t + 5);\r\n        let lrBodyPnts = leftArrowPnts.slice(t + 5, m);\r\n\r\n        let rlBodyPnts = rightArrowPnts.slice(0, t);\r\n        let rArrowPnts = rightArrowPnts.slice(t, t + 5);\r\n        let rrBodyPnts = rightArrowPnts.slice(t + 5, m);\r\n\r\n        rlBodyPnts = PlotUtils.getBezierPoints(rlBodyPnts);\r\n        let bodyPnts = PlotUtils.getBezierPoints(rrBodyPnts.concat(llBodyPnts.slice(1)));\r\n        lrBodyPnts = PlotUtils.getBezierPoints(lrBodyPnts);\r\n\r\n        let pnts = rlBodyPnts.concat(rArrowPnts, bodyPnts, lArrowPnts, lrBodyPnts);\r\n        this.setCoordinates([pnts]);\r\n    }\r\n\r\n    getArrowPoints(pnt1, pnt2, pnt3, clockWise) {\r\n        let midPnt = PlotUtils.mid(pnt1, pnt2);\r\n        let len = PlotUtils.distance(midPnt, pnt3);\r\n        let midPnt1 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.3, true);\r\n        let midPnt2 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.5, true);\r\n        //let midPnt3=PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.7, true);\r\n        midPnt1 = PlotUtils.getThirdPoint(midPnt, midPnt1, Constants.HALF_PI, len / 5, clockWise);\r\n        midPnt2 = PlotUtils.getThirdPoint(midPnt, midPnt2, Constants.HALF_PI, len / 4, clockWise);\r\n        //midPnt3=PlotUtils.getThirdPoint(midPnt, midPnt3, Constants.HALF_PI, len / 5, clockWise);\r\n\r\n        let points = [midPnt, midPnt1, midPnt2, pnt3];\r\n        // 计算箭头部分\r\n        let arrowPnts = this.getArrowHeadPoints(points, this.headHeightFactor, this.headWidthFactor, this.neckHeightFactor, this.neckWidthFactor);\r\n        let neckLeftPoint = arrowPnts[0];\r\n        let neckRightPoint = arrowPnts[4];\r\n        // 计算箭身部分\r\n        let tailWidthFactor = PlotUtils.distance(pnt1, pnt2) / PlotUtils.getBaseLength(points) / 2;\r\n        let bodyPnts = this.getArrowBodyPoints(points, neckLeftPoint, neckRightPoint, tailWidthFactor);\r\n        let n = bodyPnts.length;\r\n        let lPoints = bodyPnts.slice(0, n / 2);\r\n        let rPoints = bodyPnts.slice(n / 2, n);\r\n        lPoints.push(neckLeftPoint);\r\n        rPoints.push(neckRightPoint);\r\n        lPoints = lPoints.reverse();\r\n        lPoints.push(pnt2);\r\n        rPoints = rPoints.reverse();\r\n        rPoints.push(pnt1);\r\n        return lPoints.reverse().concat(arrowPnts, rPoints);\r\n    }\r\n\r\n    getArrowHeadPoints(points, tailLeft, tailRight) {\r\n        let len = PlotUtils.getBaseLength(points);\r\n        let headHeight = len * this.headHeightFactor;\r\n        let headPnt = points[points.length - 1];\r\n        let tailWidth = PlotUtils.distance(tailLeft, tailRight);\r\n        let headWidth = headHeight * this.headWidthFactor;\r\n        let neckWidth = headHeight * this.neckWidthFactor;\r\n        let neckHeight = headHeight * this.neckHeightFactor;\r\n        let headEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, headHeight, true);\r\n        let neckEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, neckHeight, true);\r\n        let headLeft = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, false);\r\n        let headRight = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, true);\r\n        let neckLeft = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, false);\r\n        let neckRight = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, true);\r\n        return [neckLeft, headLeft, headPnt, headRight, neckRight];\r\n    }\r\n\r\n    getArrowBodyPoints(points, neckLeft, neckRight, tailWidthFactor) {\r\n        let allLen = PlotUtils.wholeDistance(points);\r\n        let len = PlotUtils.getBaseLength(points);\r\n        let tailWidth = len * tailWidthFactor;\r\n        let neckWidth = PlotUtils.distance(neckLeft, neckRight);\r\n        let widthDif = (tailWidth - neckWidth) / 2;\r\n        let tempLen = 0, leftBodyPnts = [], rightBodyPnts = [];\r\n        for (let i = 1; i < points.length - 1; i++) {\r\n            let angle = PlotUtils.getAngleOfThreePoints(points[i - 1], points[i], points[i + 1]) / 2;\r\n            tempLen += PlotUtils.distance(points[i - 1], points[i]);\r\n            let w = (tailWidth / 2 - tempLen / allLen * widthDif) / Math.sin(angle);\r\n            let left = PlotUtils.getThirdPoint(points[i - 1], points[i], Math.PI - angle, w, true);\r\n            let right = PlotUtils.getThirdPoint(points[i - 1], points[i], angle, w, false);\r\n            leftBodyPnts.push(left);\r\n            rightBodyPnts.push(right);\r\n        }\r\n        return leftBodyPnts.concat(rightBodyPnts);\r\n    }\r\n\r\n    // 计算对称点\r\n    getTempPoint4(linePnt1, linePnt2, point) {\r\n        let midPnt = PlotUtils.mid(linePnt1, linePnt2);\r\n        let len = PlotUtils.distance(midPnt, point);\r\n        let angle = PlotUtils.getAngleOfThreePoints(linePnt1, midPnt, point);\r\n        let symPnt, distance1, distance2, mid;\r\n        if (angle < Constants.HALF_PI) {\r\n            distance1 = len * Math.sin(angle);\r\n            distance2 = len * Math.cos(angle);\r\n            mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false);\r\n            symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true);\r\n        }\r\n        else if (angle >= Constants.HALF_PI && angle < Math.PI) {\r\n            distance1 = len * Math.sin(Math.PI - angle);\r\n            distance2 = len * Math.cos(Math.PI - angle);\r\n            mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false);\r\n            symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false);\r\n        }\r\n        else if (angle >= Math.PI && angle < Math.PI * 1.5) {\r\n            distance1 = len * Math.sin(angle - Math.PI);\r\n            distance2 = len * Math.cos(angle - Math.PI);\r\n            mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true);\r\n            symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true);\r\n        }\r\n        else {\r\n            distance1 = len * Math.sin(Math.PI * 2 - angle);\r\n            distance2 = len * Math.cos(Math.PI * 2 - angle);\r\n            mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true);\r\n            symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false);\r\n        }\r\n        return symPnt;\r\n    }\r\n}\r\n","import PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\";\r\n\r\nimport AttackArrow from \"./AttackArrow\";\r\n\r\nexport default class TailedAttackArrow extends AttackArrow {\r\n\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.TAILED_ATTACK_ARROW;\r\n        this.headHeightFactor = 0.18;\r\n        this.headWidthFactor = 0.3;\r\n        this.neckHeightFactor = 0.85;\r\n        this.neckWidthFactor = 0.15;\r\n        this.tailWidthFactor = 0.1;\r\n        this.headTailFactor = 0.8;\r\n        this.swallowTailFactor = 1;\r\n        this.swallowTailPnt = null;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        //防止父级方法扰乱\r\n        if(this.type!=\"TailedAttackArrow\"){\r\n            return;\r\n        }\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        if(this.getPointCount() == 2){\r\n            this.setCoordinates([this.points]);\r\n            return;\r\n        }\r\n        let pnts = this.getPoints();\r\n        let tailLeft = pnts[0];\r\n        let tailRight = pnts[1];\r\n        if(PlotUtils.isClockWise(pnts[0], pnts[1], pnts[2])){\r\n            tailLeft = pnts[1];\r\n            tailRight = pnts[0];\r\n        }\r\n        let midTail = PlotUtils.mid(tailLeft, tailRight);\r\n        let bonePnts = [midTail].concat(pnts.slice(2));\r\n        let headPnts = this.getArrowHeadPoints(bonePnts, tailLeft, tailRight);\r\n        let neckLeft = headPnts[0];\r\n        let neckRight = headPnts[4];\r\n        let tailWidth = PlotUtils.distance(tailLeft, tailRight);\r\n        let allLen = PlotUtils.getBaseLength(bonePnts);\r\n        let len = allLen * this.tailWidthFactor * this.swallowTailFactor;\r\n        this.swallowTailPnt = PlotUtils.getThirdPoint(bonePnts[1], bonePnts[0], 0, len, true);\r\n        let factor = tailWidth/allLen;\r\n        let bodyPnts = this.getArrowBodyPoints(bonePnts, neckLeft, neckRight, factor);\r\n\r\n        count = bodyPnts.length;\r\n        let leftPnts = [tailLeft].concat(bodyPnts.slice(0, count/2));\r\n        leftPnts.push(neckLeft);\r\n        let rightPnts = [tailRight].concat(bodyPnts.slice(count/2, count));\r\n        rightPnts.push(neckRight);\r\n\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts);\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts);\r\n\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse(), [this.swallowTailPnt, leftPnts[0]])]);\r\n    }\r\n}","import PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\";\r\nimport Constants from \"../Constants\";\r\n\r\nimport AttackArrow from \"./AttackArrow\";\r\n\r\nexport default class SquadCombat extends AttackArrow {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.SQUAD_COMBAT;\r\n        this.headHeightFactor = 0.18;\r\n        this.headWidthFactor = 0.3;\r\n        this.neckHeightFactor = 0.85;\r\n        this.neckWidthFactor = 0.15;\r\n        this.tailWidthFactor = 0.1;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        //防止父级方法扰乱\r\n        if(this.type!=\"SquadCombat\"){\r\n            return;\r\n        }\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        let pnts = this.getPoints();\r\n        let tailPnts = this.getTailPoints(pnts);\r\n        let headPnts = this.getArrowHeadPoints(pnts, tailPnts[0], tailPnts[1]);\r\n        let neckLeft = headPnts[0];\r\n        let neckRight = headPnts[4];\r\n        let bodyPnts = this.getArrowBodyPoints(pnts, neckLeft, neckRight, this.tailWidthFactor);\r\n\r\n        count = bodyPnts.length;\r\n        let leftPnts = [tailPnts[0]].concat(bodyPnts.slice(0, count / 2));\r\n        leftPnts.push(neckLeft);\r\n        let rightPnts = [tailPnts[1]].concat(bodyPnts.slice(count / 2, count));\r\n        rightPnts.push(neckRight);\r\n\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts);\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts);\r\n\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse())]);\r\n    }\r\n\r\n    getTailPoints(points) {\r\n        let allLen = PlotUtils.getBaseLength(points);\r\n        let tailWidth = allLen * this.tailWidthFactor;\r\n        let tailLeft = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, false);\r\n        let tailRight = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, true);\r\n        return [tailLeft, tailRight];\r\n    }\r\n}","import PlotTypes from \"../PlotTypes\";\r\nimport PlotUtils from \"../PlotUtils\";\r\nimport Constants from \"../Constants\";\r\n\r\nimport AttackArrow from \"./AttackArrow\";\r\n\r\nexport default class TailedSquadCombat extends AttackArrow {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.TAILED_SQUAD_COMBAT;\r\n        this.headHeightFactor = 0.18;\r\n        this.headWidthFactor = 0.3;\r\n        this.neckHeightFactor = 0.85;\r\n        this.neckWidthFactor = 0.15;\r\n        this.tailWidthFactor = 0.1;\r\n        this.swallowTailFactor = 1;\r\n        this.swallowTailPnt = null;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        //防止父级方法扰乱\r\n        if(this.type!=\"TailedSquadCombat\"){\r\n            return;\r\n        }\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        let pnts = this.getPoints();\r\n        let tailPnts = this.getTailPoints(pnts);\r\n        let headPnts = this.getArrowHeadPoints(pnts, tailPnts[0], tailPnts[2]);\r\n        let neckLeft = headPnts[0];\r\n        let neckRight = headPnts[4];\r\n        let bodyPnts = this.getArrowBodyPoints(pnts, neckLeft, neckRight, this.tailWidthFactor);\r\n        \r\n        count = bodyPnts.length;\r\n        let leftPnts = [tailPnts[0]].concat(bodyPnts.slice(0, count / 2));\r\n        leftPnts.push(neckLeft);\r\n        let rightPnts = [tailPnts[2]].concat(bodyPnts.slice(count / 2, count));\r\n        rightPnts.push(neckRight);\r\n\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts);\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts);\r\n\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse(), [tailPnts[1], leftPnts[0]])]);\r\n    }\r\n    \r\n    getTailPoints(points) {\r\n        let allLen = PlotUtils.getBaseLength(points);\r\n        let tailWidth = allLen * this.tailWidthFactor;\r\n        let tailLeft = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, false);\r\n        let tailRight = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, true);\r\n        let len = tailWidth * this.swallowTailFactor;\r\n        let swallowTailPnt = PlotUtils.getThirdPoint(points[1], points[0], 0, len, true);\r\n        return [tailLeft, swallowTailPnt, tailRight];\r\n    }\r\n    \r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\n\r\nimport LineString from \"ol/geom/LineString\";\r\n\r\nexport default class FreehandLine extends BaseMixin(LineString) {\r\n\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.FREEHAND_LINE;\r\n        this.freehand =  true;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        this.setCoordinates(this.points);\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\";\r\n\r\nexport default class FreehandPolygon extends BaseMixin(Polygon) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.FREEHAND_POLYGON;\r\n        this.freehand = true;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        this.setCoordinates([this.points]);\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\n\r\nimport PolygonOl from \"ol/geom/Polygon\";\r\n\r\nexport default class Polygon extends BaseMixin(PolygonOl) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.POLYGON;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        this.setCoordinates([this.points]);\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\n\r\nimport Point from \"ol/geom/Point\";\r\n\r\nexport default class Marker extends BaseMixin(Point) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.MARKER;\r\n        this.fixPointCount = 1;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        let pnt = this.points[0];\r\n        this.setCoordinates(pnt);\r\n    }\r\n}\r\n\r\n","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\n\r\nimport Polygon from \"ol/geom/Polygon\";\r\n\r\nexport default class Rectangle extends BaseMixin(Polygon) {\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.RECTANGLE;\r\n        this.fixPointCount = 2;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        let count = this.getPointCount();\r\n        if(count<2) {\r\n            return;\r\n        }else{\r\n            let pnt1 = this.points[0];\r\n            let pnt2 = this.points[1];\r\n            let xmin = Math.min(pnt1[0], pnt2[0]);\r\n            let xmax = Math.max(pnt1[0], pnt2[0]);\r\n            let ymin = Math.min(pnt1[1], pnt2[1]);\r\n            let ymax = Math.max(pnt1[1], pnt2[1]);\r\n            let tl = [xmin, ymax];\r\n            let tr = [xmax, ymax];\r\n            let br = [xmax, ymin];\r\n            let bl = [xmin, ymin];\r\n            this.setCoordinates([[tl, tr, br, bl]]);\r\n        }\r\n    }\r\n}","import BaseMixin from \"./BaseMixin\";\r\nimport PlotTypes from \"../PlotTypes\";\r\n\r\nimport LineString from \"ol/geom/LineString\";\r\n\r\nexport default class Polyline extends BaseMixin(LineString) {\r\n\r\n    constructor(points = []) {\r\n        super(points);\r\n        this.type = PlotTypes.POLYLINE;\r\n        this.setPoints(points);\r\n    }\r\n\r\n    generate() {\r\n        let count = this.getPointCount();\r\n        if(count < 2) {\r\n            return;\r\n        }\r\n        this.setCoordinates(this.points);\r\n    }\r\n}","import * as Plot from \"./plot/index\"\r\n\r\nlet PlotFactory = {};\r\nPlotFactory.createPlot = function(type, points){\r\n    if(!type||!Plot[type]){\r\n        return null;\r\n    }\r\n    return new Plot[type](points);\r\n}\r\n\r\nexport default PlotFactory;","import Observable, {unByKey} from \"ol/Observable\";\r\nimport {\r\n    Fill,\r\n    Stroke,\r\n    Style\r\n} from 'ol/style.js';\r\nimport {\r\n    Vector as VectorLayer\r\n} from 'ol/layer.js';\r\nimport {\r\n    Vector as VectorSource\r\n} from 'ol/source.js';\r\nimport Feature from \"ol/Feature\";\r\nimport DoubleClickZoom from \"ol/interaction/DoubleClickZoom\";\r\n\r\nimport PlotFactory from \"../PlotFactory\";\r\nimport PlotUtils from \"../PlotUtils\";\r\nimport Constants from \"../Constants\";\r\nimport * as Event from \"../event/index\";\r\n\r\nexport default class PlotDraw extends Observable {\r\n    constructor(map, style){\r\n        super();\r\n        this.points = null;\r\n        this.plot = null;\r\n        this.feature = null;\r\n        this.plotType = null;\r\n        this.plotParams = null;\r\n        this.mapViewport = null;\r\n        this.dblClickZoomInteraction = null;\r\n\r\n        this.clickListener = null;\r\n        this.dblclickListener = null;\r\n        this.moveCallback = this.mapMouseMoveHandler.bind(this);\r\n\r\n        if(!style){\r\n            let stroke = new Stroke({color: '#000000', width: 1.25});\r\n            let fill = new Fill({color: 'rgba(0,0,0,0.4)'});\r\n            this.style = new Style({fill:fill, stroke:stroke});\r\n        }else{\r\n            this.style = style;\r\n        }\r\n\r\n        this.featureSource = new VectorSource();\r\n        this.drawOverlay = new VectorLayer({\r\n            source: this.featureSource\r\n        });\r\n        this.drawOverlay.setStyle(this.style);\r\n        this.setMap(map);\r\n    }\r\n\r\n    activate(type, params) {\r\n        this.deactivate();\r\n        this.deactivateMapTools();\r\n        this.clickListener = this.map.on(\"click\", this.mapFirstClickHandler.bind(this));\r\n        this.plotType = type;\r\n        this.plotParams = params;\r\n        if(params.style){\r\n            this.drawOverlay.setStyle(params.style);\r\n        }\r\n        this.map.addLayer(this.drawOverlay);\r\n    }\r\n\r\n    deactivate() {\r\n        this.disconnectEventHandlers();\r\n        this.map.removeLayer(this.drawOverlay);\r\n        this.featureSource.clear();\r\n        this.points = [];\r\n        this.plot = null;\r\n        this.feature = null;\r\n        this.plotType = null;\r\n        this.plotParams = null;\r\n        this.activateMapTools();\r\n    }\r\n\r\n    isDrawing(){\r\n        return this.plotType != null;\r\n    }\r\n\r\n    setMap(value) {\r\n        this.map = value;\r\n        this.mapViewport = this.map.getViewport();\r\n    }\r\n\r\n    mapFirstClickHandler(e) {\r\n        this.points.push(e.coordinate);\r\n        this.plot = PlotFactory.createPlot(this.plotType, this.points, this.plotParams);\r\n        this.feature = new Feature(this.plot);\r\n\r\n        //二维转三维 贴地\r\n        this.feature.getGeometry().set(\"altitudeMode\", \"clampToGround\");\r\n\r\n        this.featureSource.addFeature(this.feature);\r\n        unByKey(this.clickListener);\r\n        //\r\n        if (this.plot.fixPointCount == this.plot.getPointCount()) {\r\n            this.mapDoubleClickHandler(e);\r\n            return;\r\n        }\r\n        //\r\n        this.clickListener = this.map.on(\"click\", this.mapNextClickHandler.bind(this));\r\n        if(!this.plot.freehand){\r\n            this.dblclickListener = this.map.on(\"dblclick\", this.mapDoubleClickHandler.bind(this));\r\n        }\r\n\r\n        this.mapViewport.addEventListener(Event.EventType.MOUSEMOVE, this.moveCallback, false);\r\n        // goog.events.listen(this.mapViewport, Event.EventType.MOUSEMOVE,\r\n        //     this.mapMouseMoveHandler, false, this);\r\n    }\r\n\r\n    mapMouseMoveHandler(e){\r\n        const coordinate = this.map.getCoordinateFromPixel([e.offsetX, e.offsetY]);\r\n        if (PlotUtils.distance(coordinate, this.points[this.points.length - 1]) < Constants.ZERO_TOLERANCE)\r\n            return;\r\n        if(!this.plot.freehand){\r\n            const pnts = this.points.concat([coordinate]);\r\n            this.plot.setPoints(pnts);\r\n        }else{\r\n            this.points.push(coordinate);\r\n            this.plot.setPoints(this.points);\r\n        }\r\n    }\r\n\r\n    mapNextClickHandler(e) {\r\n        if(!this.plot.freehand){\r\n            if (PlotUtils.distance(e.coordinate, this.points[this.points.length - 1]) < Constants.ZERO_TOLERANCE)\r\n                return;\r\n        }\r\n        this.points.push(e.coordinate);\r\n        this.plot.setPoints(this.points);\r\n        if (this.plot.fixPointCount == this.plot.getPointCount()) {\r\n            this.mapDoubleClickHandler(e);\r\n            return;\r\n        }\r\n        if(this.plot && this.plot.freehand){\r\n            this.mapDoubleClickHandler(e);\r\n        }\r\n    }\r\n\r\n    mapDoubleClickHandler(e) {\r\n        this.disconnectEventHandlers();\r\n        this.plot.finishDrawing();\r\n        e.preventDefault();\r\n        this.drawEnd();\r\n    }\r\n\r\n    disconnectEventHandlers() {\r\n        unByKey(this.clickListener);\r\n        this.mapViewport.removeEventListener(Event.EventType.MOUSEMOVE, this.moveCallback, false);\r\n        /*goog.events.unlisten(this.mapViewport, Event.EventType.MOUSEMOVE,\r\n            this.mapMouseMoveHandler, false, this);*/\r\n        unByKey(this.dblclickListener);\r\n    }\r\n\r\n    drawEnd(feature) {\r\n        this.featureSource.removeFeature(this.feature);\r\n        this.activateMapTools();\r\n        this.disconnectEventHandlers();\r\n        this.map.removeOverlay(this.drawOverlay);\r\n        this.points = [];\r\n        this.plot = null;\r\n        this.plotType = null;\r\n        this.plotParams = null;\r\n\r\n        this.dispatchEvent(new Event.PlotDrawEvent(Event.PlotDrawEvent.DRAW_END, this.feature));\r\n        this.feature = null;\r\n    }\r\n\r\n    deactivateMapTools() {\r\n        let interactions = this.map.getInteractions();\r\n        let length = interactions.getLength();\r\n        for (let i = 0; i < length; i++) {\r\n            let item = interactions.item(i);\r\n            if (item instanceof DoubleClickZoom) {\r\n                this.dblClickZoomInteraction = item;\r\n                interactions.remove(item);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    activateMapTools() {\r\n        if (this.dblClickZoomInteraction != null) {\r\n            this.map.getInteractions().push(this.dblClickZoomInteraction);\r\n            this.dblClickZoomInteraction = null;\r\n        }\r\n    }\r\n\r\n}","let Utils = {\r\n    _stampId: 0\r\n};\r\nUtils.trim = function(str) {\r\n    return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\r\n};\r\n\r\nUtils.stamp = function(obj) {\r\n    const key = '_p_id_';\r\n    obj[key] = obj[key] || this._stampId++;\r\n    return obj[key];\r\n};\r\n\r\nexport default Utils;\r\n","import Utils from \"./Utils\";\r\n\r\nlet DomUtils = {};\r\n\r\nDomUtils.create = function(tagName, className, parent, id) {\r\n    let element = document.createElement(tagName);\r\n    element.className = className || '';\r\n    if(id){\r\n        element.id = id;\r\n    }\r\n    if (parent) {\r\n        parent.appendChild(element);\r\n    }\r\n    return element;\r\n};\r\n\r\nDomUtils.createHidden = function(tagName, parent, id) {\r\n    let element = document.createElement(tagName);\r\n    element.style.display = 'none';\r\n    if(id){\r\n        element.id = id;\r\n    }\r\n    if(parent){\r\n        parent.appendChild(element);\r\n    }\r\n    return element;\r\n};\r\n\r\nDomUtils.remove = function(element, parent) {\r\n    if (parent && element) {\r\n        parent.removeChild(element);\r\n    }\r\n};\r\n\r\nDomUtils.get = function(id) {\r\n    return document.getElementById(id);\r\n};\r\n\r\nDomUtils.getStyle = function(element, name) {\r\n    let value = element.style[name];\r\n    return value === 'auto' ? null : value;\r\n};\r\n\r\nDomUtils.hasClass = function(element, name) {\r\n    return (element.className.length > 0) &&\r\n        new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(element.className);\r\n};\r\n\r\nDomUtils.addClass = function(element, name) {\r\n    if (this.hasClass(element, name)) {\r\n        return;\r\n    }\r\n    if (element.className) {\r\n        element.className += ' ';\r\n    }\r\n    element.className += name;\r\n};\r\n\r\nDomUtils.removeClass = function(element, name) {\r\n    element.className = Utils.trim((' ' + element.className + ' ').replace(' ' + name + ' ', ' '));\r\n};\r\n\r\nDomUtils.getDomEventKey = function(type, fn, context) {\r\n    return '_p_dom_event_' + type + '_' + Utils.stamp(fn) + (context ? '_' + Utils.stamp(context) : '');\r\n};\r\n\r\nDomUtils.addListener = function(element, type, fn, context) {\r\n    let self = this,\r\n        eventKey = DomUtils.getDomEventKey(type, fn, context),\r\n        handler = element[eventKey];\r\n\r\n    if (handler) {\r\n        return self;\r\n    }\r\n\r\n    handler = function(e) {\r\n        return fn.call(context || element, e);\r\n    };\r\n\r\n    if ('addEventListener' in element) {\r\n        element.addEventListener(type, handler, false);\r\n    } else if ('attachEvent' in element) {\r\n        element.attachEvent('on' + type, handler);\r\n    }\r\n\r\n    element[eventKey] = handler;\r\n    return self;\r\n};\r\n\r\nDomUtils.removeListener = function(element, type, fn, context) {\r\n    let self = this,\r\n        eventKey = DomUtils.getDomEventKey(type, fn, context),\r\n        handler = element[eventKey];\r\n\r\n    if (!handler) {\r\n        return self;\r\n    }\r\n\r\n    if ('removeEventListener' in element) {\r\n        element.removeEventListener(type, handler, false);\r\n    } else if ('detachEvent' in element) {\r\n        element.detachEvent('on' + type, handler);\r\n    }\r\n\r\n    element[eventKey] = null;\r\n\r\n    return self;\r\n};\r\n\r\nexport default DomUtils;","import Observable, {unByKey} from \"ol/Observable\";\r\nimport Overlay from \"ol/Overlay\";\r\nimport DragPan from \"ol/interaction/DragPan\";\r\nimport Feature from \"ol/Feature\";\r\n\r\nimport DomUtils from \"../util/DomUtils\";\r\nimport * as Event from \"../event/index\";\r\n\r\nexport default class PlotEdit extends Observable {\r\n    constructor(map) {\r\n        super();\r\n        this.activePlot = null;\r\n        this.startPoint = null;\r\n        this.ghostControlPoints = null;\r\n        this.controlPoints = null;\r\n        this.map = map;\r\n        this.mapViewport = this.map.getViewport();\r\n        this.mouseOver = false;\r\n        this.elementTable = {};\r\n        this.activeControlPointId = null;\r\n        this.mapDragPan = null;\r\n\r\n        this.Constants = {\r\n            HELPER_HIDDEN_DIV: 'p-helper-hidden-div',\r\n            HELPER_CONTROL_POINT_DIV: 'p-helper-control-point-div'\r\n        }\r\n\r\n        this.pointermoveListener = null;\r\n        this.pointerdownListener = null;\r\n        this.pointerupListener = null;\r\n        this.pointerdragListener = null;\r\n\r\n        this.mousemoveCallback = this.controlPointMouseMoveHandler.bind(this);\r\n        this.mouseupCallback = this.controlPointMouseUpHandler.bind(this);\r\n    }\r\n\r\n    initHelperDom(){\r\n        if(!this.map || !this.activePlot){\r\n            return;\r\n        }\r\n        let parent = this.getMapParentElement();\r\n        if(!parent){\r\n           return;\r\n        }\r\n        let hiddenDiv = DomUtils.createHidden('div', parent, this.Constants.HELPER_HIDDEN_DIV);\r\n\r\n        let cPnts = this.getControlPoints();\r\n        for(let i=0; i<cPnts.length; i++){\r\n            let id = this.Constants.HELPER_CONTROL_POINT_DIV + '-' + i;\r\n            DomUtils.create('div', this.Constants.HELPER_CONTROL_POINT_DIV, hiddenDiv, id);\r\n            this.elementTable[id] = i;\r\n        }\r\n    }\r\n\r\n    getMapParentElement() {\r\n        let mapElement = this.map.getTargetElement();\r\n        if(!mapElement){\r\n            return;\r\n        }\r\n        return mapElement.parentNode;\r\n    }\r\n\r\n    destroyHelperDom(){\r\n        //\r\n        if(this.controlPoints){\r\n            for(let i=0; i<this.controlPoints.length; i++){\r\n                this.map.removeOverlay(this.controlPoints[i]);\r\n                let element = DomUtils.get(this.Constants.HELPER_CONTROL_POINT_DIV + '-' + i);\r\n                if(element){\r\n                    DomUtils.removeListener(element, 'mousedown', this.controlPointMouseDownHandler, this);\r\n                    DomUtils.removeListener(element, 'mousemove', this.controlPointMouseMoveHandler2, this);\r\n                }\r\n            }\r\n            this.controlPoints = null;\r\n        }\r\n        //\r\n        let parent = this.getMapParentElement();\r\n        let hiddenDiv = DomUtils.get(this.Constants.HELPER_HIDDEN_DIV);\r\n        if(hiddenDiv && parent){\r\n            DomUtils.remove(hiddenDiv, parent);\r\n        }\r\n    }\r\n\r\n    initControlPoints(){\r\n        if(!this.map){\r\n            return;\r\n        }\r\n        this.controlPoints = [];\r\n        let cPnts = this.getControlPoints();\r\n        for(let i=0; i<cPnts.length; i++){\r\n            let id = this.Constants.HELPER_CONTROL_POINT_DIV + '-' + i;\r\n            let element = DomUtils.get(id);\r\n            let pnt = new Overlay({\r\n                id: id,\r\n                position: cPnts[i],\r\n                positioning: 'center-center',\r\n                element: element\r\n            });\r\n            this.controlPoints.push(pnt);\r\n            this.map.addOverlay(pnt);\r\n            this.map.render();\r\n\r\n            DomUtils.addListener(element, 'mousedown', this.controlPointMouseDownHandler, this);\r\n            DomUtils.addListener(element, 'mousemove', this.controlPointMouseMoveHandler2, this);\r\n        }\r\n    }\r\n\r\n    controlPointMouseMoveHandler2(e){\r\n        e.stopImmediatePropagation();\r\n    }\r\n\r\n    controlPointMouseDownHandler(e){\r\n        let id = e.target.id;\r\n        this.activeControlPointId = id;\r\n        this.mapViewport.addEventListener(Event.EventType.MOUSEMOVE, this.mousemoveCallback, false);\r\n        this.mapViewport.addEventListener(Event.EventType.MOUSEUP, this.mouseupCallback, false);\r\n        // goog.events.listen(this.mapViewport, P.Event.EventType.MOUSEMOVE, this.controlPointMouseMoveHandler, false, this);\r\n        // goog.events.listen(this.mapViewport, P.Event.EventType.MOUSEUP, this.controlPointMouseUpHandler, false, this);\r\n    }\r\n\r\n    controlPointMouseMoveHandler(e){\r\n        let coordinate = this.map.getCoordinateFromPixel([e.offsetX, e.offsetY]);\r\n        if(this.activeControlPointId){\r\n            let plot = this.activePlot.getGeometry();\r\n            let index = this.elementTable[this.activeControlPointId];\r\n            plot.updatePoint(coordinate, index);\r\n            let overlay = this.map.getOverlayById(this.activeControlPointId);\r\n            overlay.setPosition(coordinate);\r\n\r\n            this.dispatchEvent(new Event.PlotEditEvent(Event.PlotEditEvent.EDIT_MOVE, this.activePlot));\r\n        }\r\n    }\r\n\r\n    controlPointMouseUpHandler(e){\r\n        this.mapViewport.removeEventListener(Event.EventType.MOUSEMOVE, this.mousemoveCallback, false);\r\n        this.mapViewport.removeEventListener(Event.EventType.MOUSEUP, this.mouseupCallback, false);\r\n\r\n        this.dispatchEvent(new Event.PlotEditEvent(Event.PlotEditEvent.EDIT_END, this.activePlot));\r\n        /*goog.events.unlisten(this.mapViewport, P.Event.EventType.MOUSEMOVE,\r\n            this.controlPointMouseMoveHandler, false, this);\r\n        goog.events.unlisten(this.mapViewport, P.Event.EventType.MOUSEUP,\r\n            this.controlPointMouseUpHandler, false, this);*/\r\n    }\r\n\r\n    activate(plot){\r\n        if(!plot || !(plot instanceof Feature) || plot == this.activePlot) {\r\n            return;\r\n        }\r\n\r\n        let geom = plot.getGeometry();\r\n        if(!geom.isPlot()){\r\n            return;\r\n        }\r\n\r\n        this.deactivate();\r\n\r\n        this.activePlot = plot;\r\n        //\r\n        this.pointermoveListener = this.map.on(\"pointermove\", this.plotMouseOverOutHandler.bind(this));\r\n\r\n        this.initHelperDom();\r\n        //\r\n        this.initControlPoints();\r\n        //\r\n    }\r\n\r\n    getControlPoints(){\r\n        if(!this.activePlot){\r\n            return [];\r\n        }\r\n        let geom = this.activePlot.getGeometry();\r\n        return geom.getPoints();\r\n    }\r\n\r\n    plotMouseOverOutHandler(e){\r\n        let feature = this.map.forEachFeatureAtPixel(e.pixel, function (feature, layer) {\r\n            return feature;\r\n        });\r\n        if(feature && feature == this.activePlot){\r\n            if(!this.mouseOver){\r\n                this.mouseOver = true;\r\n                this.map.getViewport().style.cursor = 'move';\r\n                this.pointerdownListener = this.map.on('pointerdown', this.plotMouseDownHandler.bind(this));\r\n            }\r\n        }else{\r\n            if(this.mouseOver){\r\n                this.mouseOver = false;\r\n                this.map.getViewport().style.cursor = 'default';\r\n                unByKey(this.pointerdownListener);\r\n            }\r\n        }\r\n    }\r\n\r\n    plotMouseDownHandler(e){\r\n        this.ghostControlPoints = this.getControlPoints();\r\n        this.startPoint = e.coordinate;\r\n        this.disableMapDragPan();\r\n        this.pointerupListener = this.map.on('pointerup', this.plotMouseUpHandler.bind(this));\r\n        this.pointerdragListener = this.map.on('pointerdrag', this.plotMouseMoveHandler.bind(this));\r\n    }\r\n\r\n    plotMouseMoveHandler(e){\r\n        let point = e.coordinate;\r\n        let dx = point[0] - this.startPoint[0];\r\n        let dy = point[1] - this.startPoint[1];\r\n        let newPoints = [];\r\n        for(let i=0; i<this.ghostControlPoints.length; i++){\r\n            let p = this.ghostControlPoints[i];\r\n            let coordinate = [p[0] + dx, p[1] + dy];\r\n            newPoints.push(coordinate);\r\n            let id = this.Constants.HELPER_CONTROL_POINT_DIV + '-' + i;\r\n            let overlay = this.map.getOverlayById(id);\r\n            overlay.setPosition(coordinate);\r\n            overlay.setPositioning('center-center');\r\n        }\r\n        let plot = this.activePlot.getGeometry();\r\n        plot.setPoints(newPoints);\r\n\r\n        this.dispatchEvent(new Event.PlotEditEvent(Event.PlotEditEvent.EDIT_MOVE, this.activePlot));\r\n    }\r\n\r\n    plotMouseUpHandler(e){\r\n        this.enableMapDragPan();\r\n        unByKey(this.pointerupListener);\r\n        unByKey(this.pointerdragListener);\r\n\r\n        this.dispatchEvent(new Event.PlotEditEvent(Event.PlotEditEvent.EDIT_END, this.activePlot));\r\n    }\r\n\r\n    disconnectEventHandlers() {\r\n        unByKey(this.pointermoveListener);\r\n        this.mapViewport.removeEventListener(Event.EventType.MOUSEMOVE, this.mousemoveCallback, false);\r\n        this.mapViewport.removeEventListener(Event.EventType.MOUSEUP, this.mouseupCallback, false);\r\n        // goog.events.unlisten(this.mapViewport, P.Event.EventType.MOUSEMOVE,\r\n        //     this.controlPointMouseMoveHandler, false, this);\r\n        // goog.events.unlisten(this.mapViewport, P.Event.EventType.MOUSEUP,\r\n        //     this.controlPointMouseUpHandler, false, this);\r\n        unByKey(this.pointerdownListener);\r\n        unByKey(this.pointerupListener);\r\n        unByKey(this.pointerdragListener);\r\n    }\r\n\r\n    deactivate(){\r\n        this.activePlot = null;\r\n        this.mouseOver = false;\r\n        this.destroyHelperDom();\r\n        this.disconnectEventHandlers();\r\n        this.elementTable = {};\r\n        this.activeControlPointId = null;\r\n        this.startPoint = null;\r\n    }\r\n\r\n    disableMapDragPan() {\r\n        let interactions = this.map.getInteractions();\r\n        let length = interactions.getLength();\r\n        for (let i = 0; i < length; i++) {\r\n            let item = interactions.item(i);\r\n            if (item instanceof DragPan) {\r\n                this.mapDragPan = item;\r\n                item.setActive(false);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    enableMapDragPan() {\r\n        if (this.mapDragPan != null) {\r\n            this.mapDragPan.setActive(true);\r\n            this.mapDragPan = null;\r\n        }\r\n    }\r\n}","const PlotCategory = {\r\n    point: [\r\n        {\r\n            value: \"MARKER\",\r\n            label: \"点\"\r\n        }\r\n    ],\r\n    line: [\r\n        {\r\n            value: \"ARC\",\r\n            label: \"弧线\"\r\n        },\r\n        {\r\n            value: \"CURVE\",\r\n            label: \"曲线\"\r\n        },\r\n        {\r\n            value: \"POLYLINE\",\r\n            label: \"折线\"\r\n        },\r\n        {\r\n            value: \"FREEHAND_LINE\",\r\n            label: \"自由线\"\r\n        }\r\n    ],\r\n    face: [\r\n        {\r\n            value: \"CIRCLE\",\r\n            label: \"圆\"\r\n        },\r\n        {\r\n            value: \"ELLIPSE\",\r\n            label: \"椭圆\"\r\n        },\r\n        {\r\n            value: \"LUNE\",\r\n            label: \"弓形\"\r\n        },\r\n        {\r\n            value: \"SECTOR\",\r\n            label: \"扇形\"\r\n        },\r\n        {\r\n            value: \"CLOSED_CURVE\",\r\n            label: \"曲线面\"\r\n        },\r\n        {\r\n            value: \"POLYGON\",\r\n            label: \"多边形\"\r\n        },\r\n        {\r\n            value: \"RECTANGLE\",\r\n            label: \"矩形\"\r\n        },\r\n        {\r\n            value: \"FREEHAND_POLYGON\",\r\n            label: \"自由面\"\r\n        },\r\n        {\r\n            value: \"GATHERING_PLACE\",\r\n            label: \"聚集地\"\r\n        }\r\n    ],\r\n    arrow: [\r\n        {\r\n            value: \"DOUBLE_ARROW\",\r\n            label: \"钳击\"\r\n        },\r\n        {\r\n            value: \"STRAIGHT_ARROW\",\r\n            label: \"直箭头\"\r\n        },\r\n        {\r\n            value: \"FINE_ARROW\",\r\n            label: \"细直箭头\"\r\n        },\r\n        {\r\n            value: \"ASSAULT_DIRECTION\",\r\n            label: \"突击方向\"\r\n        },\r\n        {\r\n            value: \"ATTACK_ARROW\",\r\n            label: \"进攻方向\"\r\n        },\r\n        {\r\n            value: \"TAILED_ATTACK_ARROW\",\r\n            label: \"进攻方向（尾）\"\r\n        },\r\n        {\r\n            value: \"SQUAD_COMBAT\",\r\n            label: \"分队战斗行动\"\r\n        },\r\n        {\r\n            value: \"TAILED_SQUAD_COMBAT\",\r\n            label: \"分队战斗行动（尾）\"\r\n        }\r\n    ]\r\n}\r\n\r\nexport default PlotCategory;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editPlot\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.type!='point'),expression:\"type!='point'\"}]},[_c('i',{staticClass:\"opIcon\",class:_vm.plotOl.open?'openIcon':'closeIcon',on:{\"click\":function($event){_vm.plotOl.open=!_vm.plotOl.open}}})]),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.plotOl.open),expression:\"plotOl.open\"}],style:(_vm.computedStyle)},[(_vm.type!='line'&&_vm.type!='point')?_c('li',[_vm._m(0),_c('suc-colorpicker',{attrs:{\"title\":\"填充颜色\",\"alpha\":\"\"},on:{\"change\":_vm.changeFill},model:{value:(_vm.colorData.fillColor),callback:function ($$v) {_vm.$set(_vm.colorData, \"fillColor\", $$v)},expression:\"colorData.fillColor\"}})],1):_vm._e(),(_vm.type!='point')?_c('li',[_vm._m(1),_c('suc-colorpicker',{attrs:{\"title\":\"边框颜色\",\"alpha\":\"\"},on:{\"change\":_vm.changeStroke},model:{value:(_vm.colorData.strokeColor),callback:function ($$v) {_vm.$set(_vm.colorData, \"strokeColor\", $$v)},expression:\"colorData.strokeColor\"}})],1):_vm._e(),(_vm.type!='point')?_c('li',[_c('a',{staticClass:\"font-color\",attrs:{\"title\":\"边框样式\"},on:{\"click\":function($event){_vm.styleOpen=!_vm.styleOpen}}},[_c('i',{staticClass:\"plot_line\"})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.styleOpen),expression:\"styleOpen\"}],staticClass:\"lineStyle\"},[_c('div',[_c('div',[_vm._v(\"边框宽度：\")]),_c('suc-slider',{attrs:{\"show-input\":\"\",\"show-stops\":\"\",\"min\":1,\"max\":10},on:{\"change\":_vm.changeWidth},model:{value:(_vm.colorData.width),callback:function ($$v) {_vm.$set(_vm.colorData, \"width\", $$v)},expression:\"colorData.width\"}})],1),_c('div',[_c('div',[_vm._v(\"边框样式：\")]),_c('div',{staticClass:\"lineSelect\",class:{active: _vm.colorData.lineStyle=='solid'},on:{\"click\":function($event){return _vm.changeLine('solid')}}},[_c('a')]),_c('div',{staticClass:\"lineSelect lineDash\",class:{active: _vm.colorData.lineStyle=='dashed'},on:{\"click\":function($event){return _vm.changeLine('dashed')}}},[_c('a')])])])]):_vm._e(),_c('li',{staticClass:\"delLi\"},[_c('a',{attrs:{\"title\":\"删除\"},on:{\"click\":function($event){return _vm.del()}}},[_vm._m(2)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"font-color\",attrs:{\"title\":\"填充颜色\"}},[_c('i',{staticClass:\"plot_fill\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{attrs:{\"title\":\"边框颜色\",\"id\":\"plotEditStroke\"}},[_c('i',{staticClass:\"plot_lineColor\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('i',{staticClass:\"closeIcon\"},[_c('img',{attrs:{\"src\":require(\"../img/delete.png\")}})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ColorPicker',{attrs:{\"alpha\":_vm.alpha,\"recommend\":_vm.recommend},on:{\"on-change\":function($event){return _vm.$emit('change', _vm.newValue)}},model:{value:(_vm.newValue),callback:function ($$v) {_vm.newValue=$$v},expression:\"newValue\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <ColorPicker v-model=\"newValue\" :alpha=\"alpha\" :recommend=\"recommend\" @on-change=\"$emit('change', newValue)\" />\r\n</template>\r\n<script>\r\n    import { ColorPicker } from \"iview\";\r\n    export default {\r\n        name: \"suc-colorpicker\",\r\n        components: {\r\n            ColorPicker\r\n        },\r\n        model: {\r\n            prop: 'value',\r\n            event: 'change'\r\n        },\r\n        props: {\r\n            value: {\r\n                type: String\r\n            },\r\n            alpha: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            recommend: {\r\n                type: Boolean,\r\n                default: false\r\n            }\r\n        },\r\n        watch: {\r\n            value(nval){\r\n                this.newValue = nval;\r\n            }\r\n        },\r\n        data(){\r\n            return {\r\n                newValue: this.value\r\n            }\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./colorpicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./colorpicker.vue?vue&type=template&id=3c84d4c4&\"\nimport script from \"./colorpicker.vue?vue&type=script&lang=js&\"\nexport * from \"./colorpicker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Slider',{attrs:{\"min\":_vm.min,\"max\":_vm.max,\"step\":_vm.step,\"show-input\":_vm.showInput,\"show-stops\":_vm.showStops},on:{\"on-input\":function($event){return _vm.$emit('change', _vm.newValue)}},model:{value:(_vm.newValue),callback:function ($$v) {_vm.newValue=$$v},expression:\"newValue\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <Slider v-model=\"newValue\" :min=\"min\" :max=\"max\" :step=\"step\" :show-input=\"showInput\" :show-stops=\"showStops\"\r\n            @on-input=\"$emit('change', newValue)\"></Slider>\r\n</template>\r\n<script>\r\n    import { Slider } from \"iview\";\r\n\r\n    export default {\r\n        name: \"suc-slider\",\r\n        components: {\r\n            Slider\r\n        },\r\n        model: {\r\n            prop: 'value',\r\n            event: 'change'\r\n        },\r\n        props: {\r\n            value: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            min: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            max: {\r\n                type: Number,\r\n                default: 100\r\n            },\r\n            step: {\r\n                type: Number,\r\n                default: 1\r\n            },\r\n            showInput: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            showStops: {\r\n                type: Boolean,\r\n                default: false\r\n            }\r\n        },\r\n        watch: {\r\n            value(nval){\r\n                this.newValue = nval;\r\n            }\r\n        },\r\n        data(){\r\n            return {\r\n                newValue: this.value\r\n            }\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./slider.vue?vue&type=template&id=e0df7396&\"\nimport script from \"./slider.vue?vue&type=script&lang=js&\"\nexport * from \"./slider.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"editPlot\">\r\n        <div v-show=\"type!='point'\">\r\n            <i class=\"opIcon\" :class=\"plotOl.open?'openIcon':'closeIcon'\" @click=\"plotOl.open=!plotOl.open\"></i>\r\n        </div>\r\n        <ul v-show=\"plotOl.open\" :style=\"computedStyle\">\r\n            <li v-if=\"type!='line'&&type!='point'\">\r\n                <a title=\"填充颜色\" class=\"font-color\">\r\n                    <i class=\"plot_fill\"></i>\r\n                </a>\r\n                <suc-colorpicker title=\"填充颜色\" v-model=\"colorData.fillColor\" alpha @change=\"changeFill\"/>\r\n            </li>\r\n            <li v-if=\"type!='point'\">\r\n                <a title=\"边框颜色\" id=\"plotEditStroke\">\r\n                    <i class=\"plot_lineColor\"></i>\r\n                </a>\r\n                <suc-colorpicker title=\"边框颜色\" v-model=\"colorData.strokeColor\" alpha @change=\"changeStroke\"/>\r\n            </li>\r\n            <li v-if=\"type!='point'\">\r\n                <a title=\"边框样式\" class=\"font-color\" @click=\"styleOpen=!styleOpen\">\r\n                    <i class=\"plot_line\"></i>\r\n                </a>\r\n                <div class=\"lineStyle\" v-show=\"styleOpen\">\r\n                    <div>\r\n                        <div>边框宽度：</div>\r\n                        <suc-slider v-model=\"colorData.width\" show-input show-stops :min=\"1\" :max=\"10\"\r\n                                    @change=\"changeWidth\"/>\r\n                    </div>\r\n                    <div>\r\n                        <div>边框样式：</div>\r\n                        <div class=\"lineSelect\" :class=\"{active: colorData.lineStyle=='solid'}\"\r\n                             @click=\"changeLine('solid')\">\r\n                            <a></a>\r\n                        </div>\r\n                        <div class=\"lineSelect lineDash\" :class=\"{active: colorData.lineStyle=='dashed'}\"\r\n                             @click=\"changeLine('dashed')\">\r\n                            <a></a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n            <li class=\"delLi\">\r\n                <a @click=\"del()\" title=\"删除\">\r\n                    <i class=\"closeIcon\">\r\n                        <img src=\"../img/delete.png\"/>\r\n                    </i>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</template>\r\n<script>\r\n    import sucColorpicker from \"../components/colorpicker.vue\";\r\n    import sucSlider from \"../components/slider.vue\";\r\n\r\n    export default {\r\n        components: {\r\n            sucColorpicker,\r\n            sucSlider\r\n        },\r\n        props: {\r\n            type: {\r\n                type: String,\r\n                default: \"point\"\r\n            },\r\n            data: {\r\n                type: Object,\r\n                default: function () {\r\n                    return {\r\n                        strokeColor: \"#2058A5\",\r\n                        fillColor: \"rgba(32, 88, 165, 0.4)\",\r\n                        width: 1,\r\n                        lineStyle: \"solid\"\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        watch: {\r\n            data: {\r\n                handler(nval) {\r\n                    const vm = this;\r\n                    vm.colorData = nval;\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                colorData: this.data,\r\n                plotOl: {\r\n                    open: true\r\n                },\r\n                styleOpen: false   //线条样式面板是否打开\r\n            }\r\n        },\r\n        methods: {\r\n            changeStroke(e) {\r\n                this.$emit(\"change-stroke\", e);\r\n            },\r\n            changeFill(e) {\r\n                this.$emit(\"change-fill\", e);\r\n            },\r\n            changeLine(flag) {  //改变线条虚实\r\n                if (this.colorData.lineStyle == flag) {\r\n                    return;\r\n                }\r\n\r\n                this.colorData.lineStyle = flag;\r\n                this.$emit(\"change-line\", flag);\r\n            },\r\n            changeWidth(e) {   //改变线条宽度\r\n                this.$emit(\"change-width\", e);\r\n            },\r\n            del() {\r\n                this.$emit(\"delete\", true);\r\n            }\r\n        },\r\n        computed: {\r\n            computedStyle() {\r\n                if (this.type == \"point\") {\r\n                    return {width: \"35px\"}\r\n                } else if (this.category == \"line\") {\r\n                    return {width: \"135px\", marginLeft: \"20px\"}\r\n                }\r\n\r\n                return {width: \"180px\", marginLeft: \"20px\"}\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style lang=\"scss\">\r\n    .editPlot {\r\n        position: absolute;\r\n        top: 5px;\r\n        user-select: none;\r\n        .ivu-tooltip-rel {\r\n            display: block;\r\n        }\r\n        .ivu-color-picker {\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            .ivu-input-icon {\r\n                display: none;\r\n            }\r\n            .ivu-input-icon-normal + .ivu-input {\r\n                height: 35px;\r\n                padding-right: 8px;\r\n                opacity: 0;\r\n                cursor: pointer;\r\n            }\r\n            .ivu-input {\r\n                height: 24px;\r\n            }\r\n        }\r\n\r\n        > div {\r\n            float: left;\r\n            margin-top: 8px;\r\n            color: #2058A5;\r\n            text-align: center;\r\n            cursor: pointer;\r\n        }\r\n        ul {\r\n            display: block;\r\n            list-style: none;\r\n            li {\r\n                position: relative;\r\n                float: left;\r\n                margin-left: 10px;\r\n                text-align: center;\r\n                cursor: pointer;\r\n\r\n                &.delLi a:hover {\r\n                    background-color: #e5f3ff;\r\n                }\r\n\r\n                > a {\r\n                    display: block;\r\n                    width: 35px;\r\n                    height: 35px;\r\n                    padding: 0px;\r\n                    border: 1px solid #eee;\r\n                    border-radius: 2px;\r\n                    background-color: white;\r\n                    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.35);\r\n                    &.font-color.active {\r\n                        background-color: #e5f3ff;\r\n                        border: 1px solid rgb(204, 232, 255);\r\n                    }\r\n                    i {\r\n                        display: block;\r\n                        width: 35px;\r\n                        height: 35px;\r\n                        // line-height: 35px;\r\n                        opacity: 1;\r\n                        font-size: 14px;\r\n                    }\r\n                }\r\n\r\n                .lineStyle {\r\n                    position: absolute;\r\n                    top: 40px;\r\n                    transform: translateX(-50%);\r\n                    width: 300px;\r\n                    padding: 10px;\r\n                    background: white;\r\n                    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.35);\r\n                    border-radius: 4px;\r\n                    > div {\r\n                        text-align: left;\r\n                        padding: 0 5px 0 5px;\r\n                        &:first-child {\r\n                            height: 60px;\r\n                        }\r\n                    }\r\n                    .lineSelect {\r\n                        height: 20px;\r\n                        padding-top: 9px;\r\n                        margin-top: 5px;\r\n                        &:hover, &.active {\r\n                            background: rgba(0, 0, 0, .1);\r\n                        }\r\n                        &.lineDash {\r\n                            a {\r\n                                border-style: dashed;\r\n                            }\r\n                        }\r\n                        > a {\r\n                            display: block;\r\n                            width: 100%;\r\n                            height: 2px;\r\n                            border: 1px solid black;\r\n                            box-shadow: none;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .opIcon {\r\n            position: relative;\r\n            display: inline-block;\r\n            width: 20px;\r\n            height: 20px;\r\n            border-radius: 10px;\r\n            background: #2058a5;\r\n            color: #ffffff;\r\n            font-size: 14px;\r\n            &.openIcon:after {\r\n                content: \"-\";\r\n                position: absolute;\r\n                top: 8px;\r\n                left: 50%;\r\n                transform: translate(-50%, -50%);\r\n                font-size: 24px;\r\n            }\r\n            &.closeIcon:after {\r\n                content: \"+\";\r\n                position: absolute;\r\n                top: 9px;\r\n                left: 50%;\r\n                transform: translate(-50%, -50%);\r\n                font-weight: bold;\r\n            }\r\n        }\r\n        .closeIcon {\r\n            line-height: 42px;\r\n        }\r\n    }\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editOverlay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editOverlay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./editOverlay.vue?vue&type=template&id=436ddf64&\"\nimport script from \"./editOverlay.vue?vue&type=script&lang=js&\"\nexport * from \"./editOverlay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./editOverlay.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"vueol-plot\" style=\"display: none;\">\r\n        <slot :selectedFeature=\"selectedFeature\">\r\n            <template v-if=\"!noEdit\">\r\n                <ol-overlay class=\"editLay\" :position=\"selectedFeature.layPosition\" :projection=\"viewProjection\"\r\n                            :offset=\"layOffset\" v-if=\"selectedFeature.layPosition.length==2\">\r\n                    <edit-overlay :type=\"selectedFeature.category\" :data=\"selectedFeature.data\"\r\n                                  @change-stroke=\"refreshStroke\"\r\n                                  @change-line=\"refreshLine\" @change-width=\"refreshWidth\"\r\n                                  @change-fill=\"refreshFill\" @delete=\"deleteFeature\"/>\r\n                </ol-overlay>\r\n            </template>\r\n        </slot>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import Feature from 'ol/Feature';\r\n    import {Point, LineString, Polygon} from 'ol/geom';\r\n    import {Icon} from 'ol/style';\r\n\r\n    import {createStyle, createOverlay, isDefined} from \"../../util/helpers\";\r\n    import {overlay as olOverlay} from \"../overlay\"\r\n\r\n    import Bus from '../../util/bus';\r\n    import * as P from '../../plugins/plot/gispace';\r\n    import '../../plugins/plot/p-ol3.css';\r\n    import editOverlay from '../../plugins/plot/overlay/editOverlay.vue';\r\n\r\n    export default {\r\n        name: \"ol-plot\",\r\n        inject: ['getMap'],\r\n        props: {\r\n            type: {\r\n                type: String,\r\n                required: true,\r\n                default: \"MARKER\"\r\n            },\r\n            olStyle: {   //图标样式\r\n                type: Object,\r\n                default: function () {\r\n                    return {\r\n                        fill: {\r\n                            color: [32, 88, 165, 0.4]\r\n                        },\r\n                        stroke: {\r\n                            color: '#2058A5',\r\n                            width: 3\r\n                        },\r\n                        image: {\r\n                            circle: {\r\n                                radius: 7,\r\n                                fill: {\r\n                                    color: \"#0099ff\"\r\n                                },\r\n                                stroke: {\r\n                                    color: \"#1F497D\",\r\n                                    width: 1\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            noEdit: {\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            isSingle: {   //是否每次只保留一个矢量\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            },\r\n            hasFeatures: {\r\n                type: Array,\r\n                default() {\r\n                    return [];\r\n                }\r\n            }\r\n        },\r\n        components: {\r\n            olOverlay,\r\n            editOverlay\r\n        },\r\n        data() {\r\n            return {\r\n                viewProjection: \"EPSG:3857\",\r\n                selectedFeature: {\r\n                    category: \"\",\r\n                    layPosition: [],   //对应的编辑弹框的位置坐标\r\n                    data: {}    //样式数据\r\n                },\r\n                layOffset: [0, 20]\r\n            }\r\n        },\r\n        watch: {\r\n            type(nval) {\r\n                if (!nval) {\r\n                    return false;\r\n                }\r\n                this.getMap().then((map) => {\r\n                    this.addPlot(map);\r\n                })\r\n            },\r\n            hasFeatures() {\r\n                //清除地图数据\r\n                this.plotEdit.deactivate();\r\n                this.source.clear();\r\n                this.plotDraw.deactivate(); //取消绘制\r\n                this.sketch = true;\r\n\r\n                //清空选中信息\r\n                this.selectedFeature = {\r\n                    category: \"\",\r\n                    layPosition: [],\r\n                    data: {}\r\n                };\r\n\r\n                this.getMap().then((map) => {\r\n                    this.loadFeatures(map);\r\n                })\r\n            },\r\n            noEdit(nval) {\r\n                if (nval) {\r\n                    this.plotEdit.deactivate();\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.initData();  //变量初始化\r\n\r\n                this.getMap().then((map) => {\r\n                    this.map = map;\r\n                    this.viewProjection = map.getView().getProjection().getCode();\r\n                    this.createLayer(map);\r\n\r\n                    //加载已有的点位\r\n                    if (this.hasFeatures.length) {\r\n                        this.loadFeatures(map);\r\n                    }\r\n\r\n                    this.plotDraw = new P.PlotDraw(map);  // 初始化标绘绘制工具，添加绘制结束事件响应\r\n                    this.plotDraw.on(P.Event.PlotDrawEvent.DRAW_END, this.onDrawEnd);\r\n\r\n                    this.plotEdit = new P.PlotEdit(map);  // 初始化标绘编辑工具\r\n                    this.plotEdit.on(P.Event.PlotEditEvent.EDIT_MOVE, this.onEditMove);\r\n                    this.plotEdit.on(P.Event.PlotEditEvent.EDIT_END, this.onEditEnd);\r\n\r\n                    //开始标绘\r\n                    this.addPlot(map);\r\n                    this.listenEvent(map);\r\n                })\r\n            },\r\n\r\n            /**\r\n             　　*  @description: 地图组件里的ol上的对象不需要更新视图以及追踪变化，所以不必作为data选项\r\n             　　*  @author xrx\r\n             　　*  @date 2019/4/23 16:19\r\n             　　*/\r\n            initData() {\r\n                this.map = null;\r\n                this.layer = null;   //图层对象\r\n                this.source = null;  //数据源对象\r\n\r\n                /**\r\n                 * 帮助提示框对象（The help tooltip element.）\r\n                 * @type {Element}\r\n                 */\r\n                this.helpTooltipElement = null;\r\n                /**\r\n                 * 帮助提示框内容\r\n                 * @type {String}\r\n                 */\r\n                this.helpTooltipHtml = \"\";\r\n                /**\r\n                 *帮助提示框显示的信息（Overlay to show the help messages.）\r\n                 * @type {ol.Overlay}\r\n                 */\r\n                this.helpTooltip = null;\r\n            },\r\n            createLayer(map) {\r\n                const vm = this;\r\n                vm.source = new VectorSource();\r\n                vm.layer = new VectorLayer({\r\n                    source: vm.source,\r\n                    zIndex: vm.zIndex\r\n                });\r\n                vm.layer.set(\"plotLayer\", true);\r\n                map.addLayer(this.layer);\r\n            },\r\n\r\n            /**\r\n             * 创建一个新的帮助提示框（tooltip）\r\n             */\r\n            createHelpTooltip(map, name) {\r\n                let helpTooltipElement = this.helpTooltipElement;\r\n                let helpTooltip = this.helpTooltip;\r\n\r\n                if (helpTooltipElement) {\r\n                    helpTooltipElement.parentNode.removeChild(helpTooltipElement);\r\n                }\r\n\r\n                helpTooltipElement = document.createElement('div');\r\n                helpTooltipElement.className = 'tooltip hidden';\r\n                helpTooltip = createOverlay(helpTooltipElement, undefined, 'helpTooltip', false);\r\n                helpTooltip.set(\"name\", name);\r\n                helpTooltip.setOffset([15, 30]);\r\n\r\n                map.addOverlay(helpTooltip);\r\n\r\n                this.helpTooltipElement = helpTooltipElement;\r\n                this.helpTooltip = helpTooltip;\r\n            },\r\n\r\n            /**\r\n             *  @description: 鼠标移出地图\r\n             *  @author xrx\r\n             *  @date 2019/4/23 17:20\r\n             */\r\n            outEvent() {\r\n                const vm = this;\r\n                if (vm.helpTooltipElement.className.indexOf(\"hidden\") == -1) {\r\n                    vm.helpTooltipElement.className += \" hidden\";\r\n                }\r\n            },\r\n\r\n            /**\r\n             *  @description: 右键取消绘制\r\n             *  @author xrx\r\n             *  @date 2019/4/23 17:28\r\n             */\r\n            disableContxet(e) {\r\n                this.plotDraw.deactivate(); //取消绘制\r\n                this.sketch = true;\r\n\r\n                this.$emit(\"drawend\", {\r\n                    feature: \"\"\r\n                });\r\n                e.returnValue = false;\r\n                return false; //禁用右键菜单\r\n            },\r\n\r\n            /**\r\n             *  @description: 地图悬浮事件\r\n             *  @author xrx\r\n             *  @date 2019/4/23 18:21\r\n             */\r\n            listenerMove(evt) {\r\n                const vm = this;\r\n                if (evt.dragging) {\r\n                    return;\r\n                }\r\n                vm.movePos = evt.coordinate;\r\n\r\n                //判断是否在绘制设置相应的帮助提示信息\r\n                if (vm.sketch) {\r\n                    let classArr = vm.helpTooltipElement.className.split(\" \");\r\n                    const no = classArr.indexOf(\"hidden\");\r\n                    if (no == -1) {\r\n                        vm.helpTooltipElement.className += \" hidden\";\r\n                    }\r\n                } else if (vm.type) {\r\n                    vm.helpTooltipElement.innerHTML = vm.helpTooltipHtml; //将提示信息设置到对话框中显示\r\n                    vm.helpTooltip.setPosition(evt.coordinate); //设置帮助提示框的位置\r\n                    let classArr = vm.helpTooltipElement.className.split(\" \");\r\n                    const no = classArr.indexOf(\"hidden\");\r\n                    if (no != -1) {\r\n                        classArr.splice(no, 1);\r\n                        vm.helpTooltipElement.className = classArr.join(\" \");\r\n                    }\r\n                }\r\n            },\r\n\r\n            /**\r\n             *  @description: 根据小类获取大类类别\r\n             *  @author xrx\r\n             *  @date 2019/5/02 16:12\r\n             */\r\n            getPlotCategory(type) {\r\n                let type2 = \"\";\r\n                for (let key in P.PlotTypes) {\r\n                    if (P.PlotTypes[key] == type) {\r\n                        type2 = key;\r\n                    }\r\n                }\r\n                let data = P.PlotCategory;\r\n                for (let key in data) {\r\n                    const value = data[key];\r\n                    const len = value.length;\r\n                    for (let i = 0; i < len; i++) {\r\n                        let item = value[i];\r\n                        if (item.value == type2) {\r\n                            return key;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return \"\";\r\n            },\r\n\r\n            /**\r\n             *  @description: 计算编辑弹框位置\r\n             *  @author xrx\r\n             *  @date 2019/5/02 19:27\r\n             */\r\n            getLayPos(feature) {\r\n                const extent = feature.getGeometry().getExtent();\r\n                const pos = [(extent[0] + extent[2]) / 2, extent[1]];\r\n                return pos;\r\n            },\r\n\r\n            /**\r\n             *  @description: 把数组颜色转成rgb(a)\r\n             *  @author xrx\r\n             *  @date 2019/5/05 14:02\r\n             */\r\n            transfromColor(color) {\r\n                if (color instanceof Array) {\r\n                    if (color.length == 3) {\r\n                        return \"rgb(\" + color.join(\",\") + \")\";\r\n                    } else if (color.length == 4) {\r\n                        return \"rgba(\" + color.join(\",\") + \")\";\r\n                    }\r\n                }\r\n\r\n                return color;\r\n            },\r\n\r\n            /**\r\n             *  @description: 设置当前编辑的矢量对象的信息数据，以赋值给 selectedFeature 供弹框使用\r\n             *  @param feature: 矢量对象\r\n             *  @return result: Object对象；属性layPosition：弹框位置坐标；属性category：矢量对象所属类别（point，line，face，arrow）\r\n             属性data：Object对象，点对象不包含属性；线对象包含strokeColor、width、lineStyle；\r\n             面对象除此之外还包含fillColor属性\r\n             *  @author xrx\r\n             *  @date 2019/5/6 10:51\r\n             */\r\n            setFeatureInfo(feature) {\r\n                let result = {\r\n                    layPosition: this.getLayPos(feature),\r\n                    category: this.getPlotCategory(feature.getGeometry().type),\r\n                    data: {}\r\n                }\r\n                let style = feature.getStyle();\r\n                let strokeColor, width, fillColor;\r\n                if (style.getStroke()) {\r\n                    let stroke = style.getStroke();\r\n                    strokeColor = stroke.getColor();\r\n                    width = stroke.getWidth();\r\n                    result.data.strokeColor = this.transfromColor(strokeColor);\r\n                    result.data.width = width;\r\n\r\n                    if (stroke.getLineDash()) {\r\n                        result.data.lineStyle = \"dashed\";\r\n                    } else {\r\n                        result.data.lineStyle = \"solid\";\r\n                    }\r\n                }\r\n                if (style.getFill()) {\r\n                    fillColor = style.getFill().getColor();\r\n                    result.data.fillColor = this.transfromColor(fillColor);\r\n                }\r\n                return result;\r\n            },\r\n\r\n            /**\r\n             *  @description: 地图点击事件\r\n             *  @author xrx\r\n             *  @date 2019/4/23 17:57\r\n             */\r\n            listenerClick(e) {\r\n                const vm = this;\r\n                // set sketch\r\n                vm.sketch = true;\r\n                vm.helpTooltipElement.className = 'tooltip hidden';\r\n\r\n                if (vm.plotDraw.isDrawing()) {\r\n                    return;\r\n                }\r\n\r\n                let feature;\r\n                if (isDefined(e.feature)) {\r\n                    //二维转的三维地图点击\r\n                    feature = e.feature;\r\n                } else {\r\n                    //如果事件不是发生在openlayers画布上（这里主要是考虑二三维融合的情况），则退出事件回调\r\n                    if (e.originalEvent.srcElement.className == \"ol-cesium\") {\r\n                        return false;\r\n                    }\r\n                    feature = vm.map.forEachFeatureAtPixel(e.pixel, function (feature, layer) {\r\n                        return feature;\r\n                    });\r\n                }\r\n\r\n                if (feature && feature.getGeometry().isPlot()) {\r\n                    if (vm.noEdit) { //不编辑\r\n                        return false;\r\n                    }\r\n                    // 开始编辑\r\n                    vm.plotEdit.activate(feature);\r\n                    vm.selectedFeature = vm.setFeatureInfo(feature);\r\n                } else {\r\n                    // 结束编辑\r\n                    vm.plotEdit.deactivate();\r\n\r\n                    //清空选中信息\r\n                    vm.selectedFeature = {\r\n                        category: \"\",\r\n                        layPosition: [],\r\n                        data: {}\r\n                    };\r\n                }\r\n            },\r\n            listenEvent(map) {\r\n                const vm = this;\r\n                const mapId = map.getTarget().id || \"default\";\r\n                Bus.$on(mapId + \".singleclick\", vm.listenerClick);\r\n                Bus.$on(mapId + \".pointermove\", vm.listenerMove);\r\n\r\n                //鼠标移出地图\r\n                map.getViewport().addEventListener(\"mouseout\", vm.outEvent);\r\n\r\n                //鼠标右键\r\n                map.getViewport().addEventListener(\"contextmenu\", vm.disableContxet);\r\n            },\r\n\r\n            /**\r\n             *  @description: 结束编辑，开始绘制\r\n             *  @param type: 标绘类型 {String}\r\n             *  @author xrx\r\n             *  @date 2019/4/23 17:44\r\n             */\r\n            activate(type) {\r\n                this.plotEdit.deactivate();\r\n                this.selectedFeature = {\r\n                    category: \"\",\r\n                    layPosition: [],\r\n                    data: {}\r\n                };\r\n                this.plotDraw.activate(type, {style: createStyle(this.olStyle)});\r\n\r\n                // set sketch\r\n                this.sketch = null; //激活绘制之后，开始绘制之前，显示提示语\r\n            },\r\n            addPlot(map) {\r\n                let shape = this.type;\r\n                if (shape) {\r\n                    if (shape == \"MARKER\") {\r\n                        this.helpTooltipHtml = \"可左键点击想要标记的位置，右键退出\";\r\n                    } else if (shape == \"FREEHAND_LINE\" || shape == \"FREEHAND_POLYGON\") {\r\n                        this.helpTooltipHtml = \"点击左键开始绘制，再次点击结束绘制，右键退出\";\r\n                    } else if (shape == \"CURVE\" || shape == \"POLYLINE\" || shape == \"CLOSED_CURVE\" || shape == \"POLYGON\"\r\n                        || shape == \"ATTACK_ARROW\" || shape == \"TAILED_ATTACK_ARROW\" || shape == \"SQUAD_COMBAT\"\r\n                        || shape == \"TAILED_SQUAD_COMBAT\") {\r\n                        this.helpTooltipHtml = \"点击左键开始绘制，双击结束绘制，右键退出\";\r\n                    } else {\r\n                        this.helpTooltipHtml = \"点击左键开始绘制，右键退出\";\r\n                    }\r\n\r\n                    if(this.isSingle){\r\n                        this.source.clear();\r\n                    }\r\n                    this.activate(P.PlotTypes[shape]);\r\n                }\r\n\r\n                //激活绘制时，地图上显示帮助提示信息\r\n                this.createHelpTooltip(map, \"plot\"); //创建帮助提示框\r\n                if (!shape) {\r\n                    this.helpTooltipElement.className = \"tooltip hidden\";\r\n                }\r\n            },\r\n\r\n            /**\r\n             *  @description: 获取矢量的地理坐标以及中心坐标点\r\n             *  @param  feature：矢量对象\r\n             *  @return (Array)：requestedPosition：矢量的地理坐标；centerPoint：矢量的中心坐标点\r\n             * @author xrx\r\n             *  @date 2019/5/6 10:21\r\n             */\r\n            getCoordData(feature) {\r\n                let map = this.map;\r\n                let geo = feature.getGeometry();\r\n                if (this.projection != 'pixel') {\r\n                    geo = geo.clone().transform(map.getView().getProjection(), this.projection);\r\n                }\r\n                let requestedPosition = geo.getCoordinates(), centerPoint;\r\n                if (geo instanceof Point) {\r\n                    centerPoint = requestedPosition;\r\n                } else if (geo instanceof LineString) {\r\n                    centerPoint = geo.getCoordinateAt(0.5);\r\n                } else if (geo instanceof Polygon) {\r\n                    let coord = geo.getInteriorPoint().getCoordinates();\r\n                    centerPoint = [coord[0], coord[1]];\r\n                }\r\n                return [requestedPosition, centerPoint];\r\n            },\r\n\r\n            /**\r\n             *  @description: 绘制结束回调函数\r\n             *  @author xrx\r\n             *  @date 2019/4/23 16:55\r\n             */\r\n            onDrawEnd(event) {\r\n                let feature = event.feature;\r\n                let style = createStyle(this.olStyle);\r\n                feature.setStyle(style);\r\n\r\n                //二维转三维 贴地\r\n                feature.getGeometry().set(\"altitudeMode\", \"clampToGround\");\r\n\r\n                this.source.addFeature(feature);\r\n\r\n                if (!this.noEdit) {\r\n                    setTimeout(() => {\r\n                        // 开始编辑\r\n                        this.plotEdit.activate(feature);\r\n                        this.selectedFeature = this.setFeatureInfo(feature);\r\n                    }, 500)\r\n                }\r\n\r\n                //绘制结束\r\n                let [coord, center] = this.getCoordData(feature);\r\n                this.$emit(\"drawend\", {\r\n                    dataStore: {\r\n                        type: feature.getGeometry().type,   //标绘类型\r\n                        points: feature.getGeometry().getPoints(),   //标绘特有的坐标点数组\r\n                    },\r\n                    feature,\r\n                    coord,   //地理坐标\r\n                    center    //中心点坐标\r\n                });\r\n            },\r\n            onEditMove(event) {\r\n                let feature = event.feature;\r\n                let [coord, center] = this.getCoordData(feature);\r\n\r\n                //编辑弹框位置\r\n                this.selectedFeature.layPosition = this.getLayPos(feature);\r\n\r\n                //编辑中\r\n                this.$emit(\"editmove\", {\r\n                    dataStore: {\r\n                        type: feature.getGeometry().type,\r\n                        points: feature.getGeometry().getPoints()\r\n                    },\r\n                    feature,\r\n                    coord,\r\n                    center\r\n                });\r\n            },\r\n            onEditEnd(event) {\r\n                let feature = event.feature;\r\n                let [coord, center] = this.getCoordData(feature);\r\n\r\n                //编辑中\r\n                this.$emit(\"editend\", {\r\n                    dataStore: {\r\n                        type: feature.getGeometry().type,\r\n                        points: feature.getGeometry().getPoints()\r\n                    },\r\n                    feature,\r\n                    coord,\r\n                    center\r\n                });\r\n            },\r\n\r\n            /**\r\n             *  @description: 更新矢量样式\r\n             *  @param 弹框中事件传值\r\n             *  @author xrx\r\n             *  @date 2019/5/6 10:19\r\n             */\r\n            refreshStroke(e) {\r\n                const feature = this.plotEdit.activePlot;\r\n                let style = feature.getStyle();\r\n                if (style.getStroke()) {\r\n                    style.getStroke().setColor(e);\r\n                }\r\n                feature.changed();\r\n                this.source.refresh();\r\n            },\r\n            refreshLine(e) {\r\n                const feature = this.plotEdit.activePlot;\r\n                let stroke = feature.getStyle().getStroke();\r\n                if (!stroke) {\r\n                    return;\r\n                }\r\n                if (e == \"solid\") {\r\n                    if (stroke.getLineDash()) {\r\n                        stroke.setLineDash(undefined);\r\n                    }\r\n                } else {\r\n                    stroke.setLineDash([4, 4]);\r\n                }\r\n                feature.changed();\r\n                this.source.refresh();\r\n            },\r\n            refreshWidth(e) {\r\n                const feature = this.plotEdit.activePlot;\r\n                let stroke = feature.getStyle().getStroke();\r\n                if (stroke) {\r\n                    stroke.setWidth(e);\r\n                }\r\n                feature.changed();\r\n                this.source.refresh();\r\n            },\r\n            refreshFill(e) {\r\n                const feature = this.plotEdit.activePlot;\r\n                let style = feature.getStyle();\r\n                if (style.getFill()) {\r\n                    style.getFill().setColor(e);\r\n                }\r\n                feature.changed();\r\n                this.source.refresh();\r\n            },\r\n\r\n            /**\r\n             *  @description: 删除矢量\r\n             *  @author xrx\r\n             *  @date 2019/5/6 10:20\r\n             */\r\n            deleteFeature() {\r\n                const feature = this.plotEdit.activePlot;\r\n                this.plotEdit.deactivate();\r\n                this.selectedFeature.layPosition = [];\r\n                this.selectedFeature.category = \"\";\r\n                this.selectedFeature.data = {};\r\n\r\n                this.$emit(\"delete\", {\r\n                    feature\r\n                })\r\n                this.source.removeFeature(feature);\r\n                this.source.refresh();\r\n            },\r\n\r\n            /**\r\n             *  @description: 获取矢量对象的样式数据\r\n             *  @param  feature：矢量对象\r\n             *  @return 重新组装的style对象\r\n             *  @author xrx\r\n             *  @date 2019/5/6 11:41\r\n             */\r\n            getStyleInfo(feature) {\r\n                let style = feature.getStyle();\r\n\r\n                //点对象\r\n                let pointStyle;\r\n                if (style.getImage()) {\r\n                    let obj = style.getImage();\r\n                    if (obj instanceof Icon) {\r\n                        let anchor = obj.getAnchor(),\r\n                            size = obj.getSize();\r\n                        pointStyle = {\r\n                            image: {\r\n                                icon: {\r\n                                    anchor: [anchor[0] / size[0], anchor[1] / size[1]],\r\n                                    src: obj.getSrc()\r\n                                }\r\n                            }\r\n                        }\r\n                        if (obj.getColor()) {\r\n                            pointStyle.image.icon.color = obj.getColor();\r\n                        }\r\n                    } else {\r\n                        pointStyle = {\r\n                            image: {\r\n                                circle: {\r\n                                    radius: obj.getRadius()\r\n                                }\r\n                            }\r\n                        }\r\n                        if (obj.getFill()) {\r\n                            pointStyle.image.circle.fill = {color: obj.getFill().getColor()};\r\n                        }\r\n                        if (obj.getStroke()) {\r\n                            let stroke = obj.getStroke();\r\n                            pointStyle.image.circle.stroke = {};\r\n                            if (stroke.getColor()) {\r\n                                pointStyle.image.circle.stroke.color = stroke.getColor();\r\n                            }\r\n                            if (stroke.getWidth()) {\r\n                                pointStyle.image.circle.stroke.width = stroke.getWidth();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                let fStyle = {};\r\n                if (style.getStroke()) {\r\n                    let stroke = style.getStroke();\r\n                    fStyle.stroke = {\r\n                        width: stroke.getWidth(),\r\n                        color: stroke.getColor()\r\n                    }\r\n\r\n                    if (stroke.getLineDash()) {\r\n                        fStyle.stroke.lineDash = stroke.getLineDash();\r\n                    }\r\n                }\r\n                if (style.getFill()) {\r\n                    fStyle.fill = {color: style.getFill().getColor()};\r\n                }\r\n\r\n                return Object.assign(fStyle, pointStyle);\r\n            },\r\n\r\n            /**\r\n             *  @description: 获取标绘图层信息数据\r\n             *  @return result(Array)\r\n             *  @author xrx\r\n             *  @date 2019/5/6 10:49\r\n             */\r\n            getLayerData() {\r\n                let result = [];\r\n                let fs = this.source.getFeatures();\r\n                fs.forEach(f => {\r\n                    let [coord, center] = this.getCoordData(f);\r\n                    result.push({\r\n                        dataStore: {\r\n                            type: f.getGeometry().type,\r\n                            points: f.getGeometry().getPoints(),\r\n                            style: this.getStyleInfo(f)\r\n                        },\r\n                        coord,\r\n                        center\r\n                    });\r\n                })\r\n                return result;\r\n            },\r\n\r\n            /**\r\n             *  @description: 加载已有矢量数据\r\n             *  @author xrx\r\n             *  @date 2019/5/6 10:20\r\n             */\r\n            loadFeatures(map) {\r\n                let fs = [];\r\n                if (this.hasFeatures.length) {\r\n                    this.hasFeatures.forEach(item => {\r\n                        let temp = item.dataStore;\r\n                        let sector = P.PlotFactory.createPlot(temp.type, temp.points);\r\n                        let plotFeature = new Feature(sector);\r\n                        plotFeature.setStyle(createStyle(temp.style));\r\n                        this.source.addFeature(plotFeature);\r\n\r\n                        let [coord, center] = this.getCoordData(plotFeature);\r\n                        fs.push({\r\n                            dataStore: {\r\n                                type: plotFeature.getGeometry().type,\r\n                                points: plotFeature.getGeometry().getPoints()\r\n                            },\r\n                            coord,\r\n                            center\r\n                        });\r\n                    })\r\n\r\n                    //自适应屏幕\r\n                    let extent = this.source.getExtent();\r\n                    map.getView().fit(extent);\r\n                }\r\n\r\n                this.$emit(\"loadend\", fs);   //加载已有feature完成\r\n            }\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            this.plotEdit.deactivate();\r\n            this.plotDraw.deactivate(); //取消绘制\r\n            vm.getMap().then((map) => {\r\n                vm.source.clear();\r\n                map.removeLayer(vm.layer);\r\n\r\n                map.getViewport().removeEventListener(\"mouseout\", vm.outEvent);\r\n                map.getViewport().removeEventListener(\"contextmenu\", vm.disableContxet);\r\n                map.removeOverlay(this.helpTooltip);\r\n\r\n                const mapId = map.getTarget().id || \"default\";\r\n                Bus.$off(mapId + \".pointermove\", vm.listenerMove);\r\n                Bus.$off(mapId + \".singleclick\", vm.listenerClick);\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .editLay.vueol-overlay {\r\n        position: relative;\r\n        width: auto;\r\n        background: transparent;\r\n        box-shadow: none;\r\n        transform: none;\r\n    }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plot.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plot.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./plot.vue?vue&type=template&id=1dc481c7&\"\nimport script from \"./plot.vue?vue&type=script&lang=js&\"\nexport * from \"./plot.vue?vue&type=script&lang=js&\"\nimport style0 from \"./plot.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import point from './point.vue'\r\nimport shape from './shape.vue'\r\nimport route from './route.vue'\r\nimport measure from './measure.vue'\r\nimport plot from './plot.vue'\r\n\r\nfunction plugin (Vue) {\r\n    if (plugin.installed) {\r\n        return\r\n    }\r\n    plugin.installed = true;\r\n\r\n    Vue.component(point.name, point);\r\n    Vue.component(shape.name, shape);\r\n    Vue.component(route.name, route);\r\n    Vue.component(measure.name, measure);\r\n    Vue.component(plot.name, plot);\r\n}\r\n\r\nexport default plugin;\r\n\r\nexport {\r\n    point,\r\n    shape,\r\n    route,\r\n    measure,\r\n    plot,\r\n    plugin as install\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-flash\",staticStyle:{\"display\":\"none\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-flash\" style=\"display: none;\"></div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import {easeOut} from 'ol/easing'\r\n    import {unByKey} from 'ol/Observable'\r\n    import {transform as transformProjection} from 'ol/proj'\r\n    import Feature from 'ol/Feature.js';\r\n    import {\r\n        Point\r\n    } from 'ol/geom';\r\n    import {createStyle} from \"../../util/helpers\";\r\n\r\n    export default {\r\n        name: 'ol-flash',\r\n        inject: ['getMap'],\r\n        props: {\r\n            coords: {\r\n                type: Array,\r\n                validator: function (value) {\r\n                    return value.length==2;\r\n                }\r\n            },\r\n            circleStyle: {\r\n                type: Object,\r\n                default() {\r\n                    return {\r\n                        image: {\r\n                            circle: {\r\n                                radius: 0,\r\n                                fill: {\r\n                                    color: [255, 0, 0]\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            duration: {   //一圈的动画周期\r\n                type: Number,\r\n                default: 3000\r\n            },\r\n            loops: {   //圈数\r\n                type: Number,\r\n                default: 3\r\n            },\r\n            radiusRange: {\r\n                type: Array,\r\n                default() {\r\n                    return [0, 30];\r\n                },\r\n                validator(value) {\r\n                    return value.length == 2 && value[0] <= value[1];\r\n                }\r\n            },\r\n            hasCenter: {\r\n                type: Object,\r\n                validator(value) {\r\n                    return value.radius&&value.color;\r\n                }\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            },\r\n        },\r\n        data() {\r\n            return {\r\n                layer: null,\r\n                source: null,\r\n                features: [],\r\n                listenerKey: null\r\n            }\r\n        },\r\n        watch: {\r\n            coords() {\r\n                this.getMap().then((map) => {\r\n                    this.update(map);\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.getMap().then((map) => {\r\n                    this.createLayer(map);\r\n                    this.update(map);\r\n                })\r\n            },\r\n            createLayer(map) {\r\n                this.source = new VectorSource();\r\n                this.layer = new VectorLayer({\r\n                    source: this.source,\r\n                    zIndex: this.zIndex\r\n                });\r\n                this.layer.set(\"flashLayer\", true);\r\n                map.addLayer(this.layer);\r\n            },\r\n            startFlash(map) {\r\n                const vm = this;\r\n\r\n                let style = [];\r\n                for (let i = 0; i < vm.loops; i++) {\r\n                    style.push(createStyle(vm.circleStyle));\r\n                }\r\n\r\n                function handleStyle(elapsed, style) {\r\n                    if (elapsed >= 0) {\r\n                        let elapsedRatio = elapsed / vm.duration;\r\n                        let radius = elapsedRatio * (vm.maxRadius - vm.minRadius) + vm.minRadius;\r\n                        let opacity = 1 - elapsedRatio;\r\n                        style.getImage().setRadius(radius);\r\n\r\n                        if (style.getImage().getFill()) {\r\n                            let color = style.getImage().getFill().getColor();\r\n                            style.getImage().getFill().setColor([color[0], color[1], color[2], opacity]);\r\n                        }\r\n\r\n                        return style;\r\n                    }\r\n\r\n                    return undefined;\r\n                }\r\n\r\n                function animate(event) {\r\n                    let frameState = event.frameState;\r\n\r\n                    for (let i = 0; i < vm.loops; i++) {\r\n                        let elapsed = (frameState.time - parseInt(vm.duration / vm.loops * i)) % vm.duration;\r\n                        vm.features[i].setStyle(handleStyle(elapsed, style[i]));\r\n                    }\r\n\r\n                    // tell OpenLayers to continue postcompose animation\r\n                    map.render();\r\n                }\r\n\r\n                if (vm.listenerKey) {\r\n                    unByKey(vm.listenerKey);\r\n                }\r\n                vm.listenerKey = map.on('postcompose', animate);\r\n            },\r\n            update(map) {\r\n                const vm = this;\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                this.source.clear();\r\n\r\n                if (vm.listenerKey) {\r\n                    unByKey(vm.listenerKey);\r\n                }\r\n\r\n                function createFeature() {\r\n                    let geom;\r\n                    if (vm.projection === 'pixel') {\r\n                        geom = new Point(vm.coords);\r\n                    } else {\r\n                        geom = new Point(transformProjection(vm.coords, vm.projection, viewProjection));\r\n                    }\r\n                    return new Feature({\r\n                        geometry: geom\r\n                    });\r\n                }\r\n\r\n                vm.features = [];\r\n                for (let i = 0; i < vm.loops; i++) {\r\n                    vm.features.push(createFeature());\r\n                }\r\n\r\n                vm.source.addFeatures(vm.features);\r\n\r\n                if(vm.hasCenter) {\r\n                    let f = createFeature();\r\n                    f.setStyle(createStyle({\r\n                        image:{\r\n                            circle:{\r\n                                radius: vm.hasCenter.radius,\r\n                                fill: {\r\n                                    color: vm.hasCenter.color\r\n                                }\r\n                            }\r\n                        }\r\n                    }))\r\n                    vm.source.addFeature(f);\r\n                }\r\n\r\n                vm.startFlash(map);\r\n            }\r\n        },\r\n        computed: {\r\n            minRadius() {\r\n                return this.radiusRange[0];\r\n            },\r\n            maxRadius() {\r\n                return this.radiusRange[1];\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            if (this.listenerKey) {\r\n                unByKey(this.listenerKey)\r\n            }\r\n            vm.getMap().then((map) => {\r\n                vm.features.forEach(function (f) {\r\n                    let s = f.getStyle();\r\n                    s = null;\r\n                    f.setStyle(null);\r\n                    f = null;\r\n                })\r\n                vm.source.clear();\r\n                map.removeLayer(vm.layer);\r\n            })\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ripples.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ripples.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ripples.vue?vue&type=template&id=82203aa0&\"\nimport script from \"./ripples.vue?vue&type=script&lang=js&\"\nexport * from \"./ripples.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-twinkle\",staticStyle:{\"display\":\"none\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-twinkle\" style=\"display: none;\"></div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import {easeOut} from 'ol/easing'\r\n    import {unByKey} from 'ol/Observable'\r\n    import {transform as transformProjection} from 'ol/proj'\r\n    import Feature from 'ol/Feature.js';\r\n    import {\r\n        Point\r\n    } from 'ol/geom';\r\n    import {createStyle} from \"../../util/helpers\";\r\n\r\n    export default {\r\n        name: 'ol-twinkle',\r\n        inject: ['getMap'],\r\n        props: {\r\n            coords: {\r\n                type: Array\r\n            },\r\n            circleStyle: {\r\n                type: Object,\r\n                default(){\r\n                    return {\r\n                        image:{\r\n                            circle:{\r\n                                radius: 14,\r\n                                snapToPixel: false,\r\n                                fill: {\r\n                                    color: [255, 0, 0, 1]\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            duration: {\r\n                type: Number,\r\n                default: 1000\r\n            },\r\n            radius: {\r\n                type: Number,\r\n                default(){\r\n                    return 10;\r\n                }\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            },\r\n        },\r\n        data() {\r\n            return {\r\n                layer: null,\r\n                source: null,\r\n                feature: null,\r\n                listenerKey: null,\r\n            }\r\n        },\r\n        watch: {\r\n            coords() {\r\n                this.getMap().then((map) => {\r\n                    this.update(map);\r\n                })\r\n            }\r\n        },\r\n        created() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init(){\r\n                this.getMap().then((map) => {\r\n                    this.createLayer(map);\r\n                    this.update(map);\r\n                })\r\n            },\r\n            createLayer(map) {\r\n                this.source = new VectorSource();\r\n                this.layer = new VectorLayer({\r\n                    source: this.source,\r\n                    zIndex: this.zIndex\r\n                });\r\n                this.layer.set(\"twinkleLayer\", true);\r\n                map.addLayer(this.layer);\r\n            },\r\n            startFlash(map) {\r\n                const vm = this;\r\n\r\n                let style = createStyle(vm.circleStyle);\r\n\r\n                function animate(event) {\r\n                    let frameState = event.frameState;\r\n                    let elapsed = frameState.time % vm.duration;\r\n                    let elapsedRatio = elapsed / vm.duration * 2;\r\n                    let opacity = elapsedRatio;\r\n                    if(elapsedRatio>1){\r\n                        opacity = 2 - elapsedRatio;\r\n                    }\r\n\r\n                    // 只设置颜色不会重新渲染，setRadius以强制样式渲染\r\n                    style.getImage().setRadius(vm.radius);\r\n                    let color = style.getImage().getFill().getColor();\r\n                    style.getImage().getFill().setColor([color[0], color[1], color[2], opacity]);\r\n                    vm.feature.setStyle(style);\r\n\r\n                    // tell OpenLayers to continue postcompose animation\r\n                    map.render();\r\n                }\r\n\r\n                if (vm.listenerKey) {\r\n                    unByKey(vm.listenerKey);\r\n                }\r\n                vm.listenerKey = map.on('postcompose', animate);\r\n            },\r\n            update(map) {\r\n                const vm = this;\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                this.source.clear();\r\n\r\n                function createFeature() {\r\n                    let geom;\r\n                    if (vm.projection === 'pixel') {\r\n                        geom = new Point(vm.coords);\r\n                    } else {\r\n                        geom = new Point(transformProjection(vm.coords, vm.projection, viewProjection));\r\n                    }\r\n                    return new Feature({\r\n                        geometry: geom\r\n                    });\r\n                }\r\n\r\n                vm.feature = createFeature();\r\n                vm.source.addFeature(vm.feature);\r\n                vm.startFlash(map);\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                let s = vm.feature.getStyle();\r\n                s = null;\r\n                vm.feature.setStyle(null);\r\n                vm.feature = null;\r\n                vm.source.clear();\r\n                map.removeLayer(vm.layer);\r\n                if (this.listenerKey) {\r\n                    unByKey(this.listenerKey)\r\n                }\r\n            })\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./twinkle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./twinkle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./twinkle.vue?vue&type=template&id=4d921e56&\"\nimport script from \"./twinkle.vue?vue&type=script&lang=js&\"\nexport * from \"./twinkle.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-track\",staticStyle:{\"display\":\"none\"}},[_vm._t(\"default\",null,{\"selectPoint\":_vm.selectPoint})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-track\" style=\"display: none;\">\r\n        <slot :selectPoint=\"selectPoint\"></slot>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import Feature from 'ol/Feature';\r\n    import {Point, LineString} from 'ol/geom';\r\n    import {\r\n        createStyle,\r\n        validCoords,\r\n        dateFormat,\r\n        stringToStamp,\r\n        getGeodesicDistance,\r\n        removeOverlay,\r\n        setLabelEvent,\r\n        deepClone\r\n    } from \"../../util/helpers\";\r\n    import {transform} from \"ol/proj\";\r\n    import {containsCoordinate} from \"ol/extent\";\r\n    import {unByKey} from \"ol/Observable\";\r\n\r\n    import Bus from '../../util/bus';\r\n\r\n    export default {\r\n        name: 'ol-track',\r\n        inject: ['getMap'],\r\n        props: {\r\n            points: {   //轨迹点位坐标\r\n                type: Array,\r\n                required: true,\r\n                default() {\r\n                    return [];\r\n                },\r\n                validator(value) {\r\n                    return value.length > 2;\r\n                }\r\n            },\r\n            curIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            curTime: {   //和开始时间相差的毫秒数\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            node: {  //轨迹节点样式\r\n                type: Object,\r\n                required: true,\r\n                validator(value) {   //canvas渲染 样式必须预加载图片\r\n                    return value.img && value.imgSize;\r\n                }\r\n            },\r\n            marker: {\r\n                type: Object,\r\n                required: true,\r\n                validator(value) {\r\n                    return value.img && value.imgSize;\r\n                }\r\n            },\r\n            lineStyle: {   //轨迹线样式\r\n                type: Object,\r\n                default() {\r\n                    return {\r\n                        stroke: {\r\n                            color: '#2058A5',\r\n                            width: 4\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            nodeShow: {   //节点显示层级\r\n                type: Number,\r\n                default: 14\r\n            },\r\n            speed: {    //播放速度\r\n                type: Number,\r\n                default: 1\r\n            },\r\n            maxSpeed: {    //轨迹主体最大速度，间距过大，轨迹不真实，用虚线表现\r\n                type: Number,\r\n                default: 34\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            },\r\n            isInterpolate: {   //是否需要插值计算\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            maxMinutes: {    //插值最大时间间隔\r\n                type: Number,\r\n                default: 2\r\n            },\r\n            overLabel: String   //是否显示默认悬浮弹框\r\n        },\r\n        data() {\r\n            return {\r\n                curNodeIndex: 0,\r\n                curSegIndex: 0,\r\n                selectPoint: null\r\n            }\r\n        },\r\n        watch: {\r\n            speed() {\r\n                this.changeSpeed();\r\n            },\r\n            curIndex(nval) {\r\n                this.curNodeIndex = nval;\r\n                this.goStep(nval);\r\n            },\r\n            curNodeIndex(nval) {\r\n                this.$emit(\"update:curIndex\", nval);\r\n                let start = this.normalizedPoints[0].timestamp;\r\n                this.$emit(\"update:curTime\", this.normalizedPoints[nval].timestamp - start);\r\n            },\r\n            curSegIndex(nval) {\r\n                if (nval != -1 && this.isInterpolate) {\r\n                    let start = this.normalizedPoints[0].timestamp;\r\n                    if (!this.segVirPoints[nval]) {\r\n                        console.log(\"seg\", nval);\r\n                        return;\r\n                    }\r\n                    this.$emit(\"update:curTime\", this.segVirPoints[nval].timestamp - start);\r\n                }\r\n            },\r\n            curTime(nval) {\r\n                if (this.isInterpolate) {\r\n                    this.goTime(nval / 1000);\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.initData();  //变量初始化\r\n                if (!this.isValid(this.points)) {\r\n                    console.error(\"请检查经纬度是否有效！\");\r\n                    return false;\r\n                }\r\n\r\n                this.normalizedPoints = this.handlePoints(this.points);  //真实点位\r\n\r\n                if (this.isInterpolate) {\r\n                    this.segVirPoints = this.interpolateSegment(0, this.normalizedPoints);   //当前的虚拟路段点位数组\r\n                }\r\n\r\n                this.getMap().then((map) => {\r\n                    this.map = map;\r\n                    this.viewProjection = map.getView().getProjection().getCode();\r\n                    this.virtualLayer = this.createLayer(map);   //虚拟点位图层\r\n                    this.layer = this.createLayer(map);    //真实点位图层\r\n                    this.source = this.layer.getSource();\r\n                    this.drawMarker();  //绘制轨迹主体\r\n\r\n                    this.listenEvent();   //监听地图事件\r\n                })\r\n            },\r\n            initData() {\r\n                this.map = null;\r\n                this.virtualLayer = null;   //虚拟图层\r\n                this.layer = null;   //图层对象\r\n                this.source = null;  //数据源对象\r\n                this.currentGeo = null;   //轨迹回放主体\r\n                this.featureGeo = null;   //轨迹回放主体\r\n\r\n                this.normalizedPoints = [];   //真实点位\r\n                this.segVirPoints = [];   //当前的虚拟路段点位数组\r\n                this.segVirPoints_next = [];   //下一段的虚拟路段点位数组\r\n\r\n                this.curNodeIndex = 0;   //当前真实点位位置序号\r\n                this.curSegIndex = -1;   //当前虚拟路段序号\r\n\r\n                //样式\r\n                this.styles = {};\r\n                let nodeImg = new Image();\r\n                nodeImg.src = this.node.img;\r\n                this.styles.node = createStyle({\r\n                    image: {\r\n                        icon: {\r\n                            anchor: this.node.anchor || [0.5, 0.5],\r\n                            img: nodeImg,\r\n                            imgSize: this.node.imgSize\r\n                        }\r\n                    }\r\n                });\r\n                let markerImg = new Image();\r\n                markerImg.src = this.marker.img;\r\n                this.styles.marker = createStyle({\r\n                    zIndex: 2,\r\n                    image: {\r\n                        icon: {\r\n                            anchor: this.marker.anchor || [0.5, 0.5],\r\n                            img: markerImg,\r\n                            imgSize: this.marker.imgSize\r\n                        }\r\n                    }\r\n                })\r\n                this.styles.line = createStyle(this.lineStyle);\r\n\r\n                this.hisTimer = null;   //定时器\r\n                this.renderEventKey = null;   //地图渲染事件监听\r\n                this.exsitIndex = [];   //已绘制过的矢量序号\r\n            },\r\n\r\n            /**\r\n             *  @description: 判断点位数组是否合乎规范\r\n             *  @param points: 组件外传入的轨迹点位数组\r\n             *  @return Boolean\r\n             *  @author xrx\r\n             *  @date 2019/5/8 17:02\r\n             */\r\n            isValid(points) {\r\n                let len = points.length;\r\n                for (let i = 0; i < len; i++) {\r\n                    let p = points[i];\r\n                    let lon = p.lon,\r\n                        lat = p.lat;\r\n                    if (this.projection == \"EPSG:4326\") {\r\n                        return validCoords(lon, lat);\r\n                    }\r\n                }\r\n                return true;\r\n            },\r\n\r\n            /**\r\n             *  @description: 为了使轨迹运动更流畅更直观，通过插值生成虚拟点位\r\n             *  @param arr: 原生点位数组\r\n             *  @return tempPoints：object 真实点位数组和虚拟点位数组\r\n             *  @author xrx\r\n             *  @date 2019/5/13 13:21\r\n             */\r\n            handlePoints(arr) {\r\n               // console.log(\"遍历开始\", dateFormat(new Date(), \"yyyy-MM-dd HH:mm:ss\"));\r\n                let points = arr.map(p => {\r\n                    let item = p;\r\n                    item.lon = parseFloat(p.lon);\r\n                    item.lat = parseFloat(p.lat);\r\n                    if (typeof item.time == \"string\") {\r\n                        item.timestamp = stringToStamp(item.time, \"-\", \":\");\r\n                    } else if (typeof item.time == \"number\") {\r\n                        item.timestamp = item.time;\r\n                        item.time = dateFormat(item.timestamp, \"yyyy-MM-dd HH:mm:ss\");\r\n                    } else {\r\n                        console.error(\"请检查time格式！\");\r\n                    }\r\n                    return item;\r\n                });\r\n                //console.log(\"遍历结束\", dateFormat(new Date(), \"yyyy-MM-dd HH:mm:ss\"));\r\n\r\n                return points;\r\n            },\r\n\r\n            /**\r\n             *  @description: 为了使轨迹运动更流畅更直观，通过对每一段真实轨迹插值生成虚拟点位\r\n             *  @param  points: 原生点位数组\r\n             *  @return tempPoints：object 虚拟点位数组\r\n             *  @author xrx\r\n             *  @date 2019/5/13 13:21\r\n             */\r\n            interpolateSegment(i, points) {\r\n                if (!this.isInterpolate) {\r\n                    return;\r\n                }\r\n               // console.log(\"开始插值\", dateFormat(new Date(), \"yyyy-MM-dd HH:mm:ss\"));\r\n                let tempPoints = [];\r\n                let p1 = points[i],\r\n                    p2 = points[i + 1];\r\n                let tDiff = p2.timestamp - p1.timestamp;\r\n                const COUNT = parseInt(tDiff / 1000);\r\n                if (COUNT > 60 * this.maxMinutes) {  //时间间隔大于最大值\r\n                    return [p1, p2];\r\n                }\r\n                const xDiff = p2.lon - p1.lon,\r\n                    yDiff = p2.lat - p1.lat,\r\n                    speddDiff = p2.speed - p1.speed;\r\n                for (let j = 1; j <= COUNT; j++) {\r\n                    let item = {\r\n                        lon: p1.lon + xDiff * (j / COUNT),\r\n                        lat: p1.lat + yDiff * (j / COUNT),\r\n                        timestamp: p1.timestamp + tDiff * (j / COUNT),\r\n                        time: dateFormat(p1.timestamp + tDiff * (j / COUNT), \"yyyy-MM-dd HH:mm:ss\"),\r\n                        speed: p1.speed + speddDiff * (j / COUNT),\r\n                        direction: p1.direction\r\n                    }\r\n\r\n                    /*if (isNaN(p1.lon + xDiff * (j / COUNT))) {\r\n                        console.log(i);\r\n                    }*/\r\n                    tempPoints.push(item);\r\n                }\r\n\r\n                //console.log(\"插值结束\", dateFormat(new Date(), \"yyyy-MM-dd HH:mm:ss\"));\r\n                return tempPoints;\r\n            },\r\n\r\n            //创建图层\r\n            createLayer(map) {\r\n                const vm = this;\r\n                let source = new VectorSource();\r\n                let layer = new VectorLayer({\r\n                    source,\r\n                    zIndex: this.zIndex,\r\n                    style(feature, resolution) {\r\n                        if (feature.get('finished')) {\r\n                            let type = feature.get('type');\r\n                            if (feature.get('rotation') != null) { //图标\r\n                                vm.styles[type].getImage().setRotation(feature.get('rotation'));\r\n                            }\r\n\r\n                            if (type == \"line\") {\r\n                                if (feature.get(\"lineDash\")) { //线\r\n                                    vm.styles[\"line\"].getStroke().setLineDash([4, 10]);\r\n                                } else {\r\n                                    vm.styles[\"line\"].getStroke().setLineDash(undefined);\r\n                                }\r\n                            }\r\n                            if (type == \"node\") {\r\n                                const zoom = map.getView().getZoomForResolution(resolution);\r\n                                if (zoom < vm.nodeShow) {\r\n                                    vm.styles[\"node\"].getImage().setOpacity(0);\r\n                                } else {\r\n                                    vm.styles[\"node\"].getImage().setOpacity(1);\r\n                                }\r\n                            }\r\n\r\n                            return vm.styles[type];\r\n                        } else {\r\n                            return null;\r\n                        }\r\n                    }\r\n                });\r\n                layer.set(\"trackLayer\", true);\r\n                map.addLayer(layer);\r\n\r\n                return layer;\r\n            },\r\n\r\n            //绘制轨迹主体\r\n            drawMarker() {\r\n                let point = this.normalizedPoints[0];\r\n                this.currentGeo = new Point([point.lon, point.lat]);\r\n                this.currentGeo = this.currentGeo.transform(this.projection, this.viewProjection);\r\n                this.featureGeo = new Feature(this.currentGeo);\r\n                this.featureGeo.set(\"type\", \"marker\");\r\n                this.featureGeo.set(\"finished\", true);\r\n                this.source.addFeature(this.featureGeo);\r\n\r\n                this.featureGeo.set(\"featureInfo\", {\r\n                    type: \"trackMarker\",\r\n                    data: Object.assign(deepClone(point), {coord: [point.lon, point.lat]})\r\n                })\r\n            },\r\n\r\n            /**\r\n             *  @description: 在临时图层上绘制当前轨迹节点\r\n             *  @param vectorContext: For canvas, this is an instance of module:ol/render/canvas/Immediate\r\n             *  @author xrx\r\n             *  @date 2019/5/8 16:33\r\n             */\r\n            createNodes(vectorContext) {\r\n                for (let i = 0; i <= this.curNodeIndex; i++) {\r\n                    let point = this.normalizedPoints[i];\r\n                    let pointGeo = new Point([point.lon, point.lat]);\r\n                    pointGeo = pointGeo.transform(this.projection, this.viewProjection);\r\n                    let featurePoint = new Feature(pointGeo);\r\n                    let style = this.styles.node;\r\n                    const rotation = point.direction ? parseFloat(point.direction) / 180 * Math.PI : 0;\r\n                    style.getImage().setRotation(rotation);\r\n                    if (this.map.getView().getZoom() < this.nodeShow) {\r\n                        style.getImage().setOpacity(0);\r\n                    } else {\r\n                        style.getImage().setOpacity(1);\r\n                    }\r\n                    vectorContext.drawFeature(featurePoint, style);\r\n                }\r\n            },\r\n\r\n            createMarker(vectorContext) {\r\n                let point;\r\n                if (this.curSegIndex == -1) {\r\n                    point = this.normalizedPoints[this.curNodeIndex];\r\n                } else {\r\n                    point = this.segVirPoints[this.curSegIndex];\r\n                }\r\n\r\n                let markerGeo = new Point([point.lon, point.lat]);\r\n                markerGeo = markerGeo.transform(this.projection, this.viewProjection);\r\n                let featureGeo = new Feature(markerGeo);\r\n                let style = this.styles.marker;\r\n                if (style && style.getImage() && (style.getImage().getRotation() != undefined)) {\r\n                    let rotation = point.direction ? parseFloat(point.direction) / 180 * Math.PI : 0;\r\n                    style.getImage().setRotation(rotation);\r\n                }\r\n                vectorContext.drawFeature(featureGeo, style);\r\n\r\n                let requestedPosition;\r\n                if (this.projection === 'pixel') {\r\n                    requestedPosition = [point.lon, point.lat];\r\n                } else {\r\n                    requestedPosition = transform([point.lon, point.lat], this.projection, this.viewProjection);\r\n                }\r\n\r\n                //若车辆跑到了可视范围之外，移动地图居中\r\n                let view = this.map.getView();\r\n                let size = this.map.getSize();\r\n                let extent = view.calculateExtent(size);\r\n                if (!containsCoordinate(extent, requestedPosition)) {\r\n                    view.setCenter(requestedPosition);\r\n                }\r\n            },\r\n\r\n            /**\r\n             *  @description: 在临时图层上绘制当前轨迹路线\r\n             *  @param vectorContext: For canvas, this is an instance of module:ol/render/canvas/Immediate\r\n             *  @author xrx\r\n             *  @date 2019/5/8 16:34\r\n             */\r\n            createLine(point, point2) {\r\n                let coords = [[point.lon, point.lat], [point2.lon, point2.lat]];\r\n                if (point.timestamp) {\r\n                    const s = getGeodesicDistance(this.projection, coords[1], coords[0]);\r\n                    if (s > this.maxSpeed * (point2.timestamp - point.timestamp) / 1000) { //间距过大，轨迹不真实，用虚线表现\r\n                        this.styles.line.getStroke().setLineDash([4, 10]);\r\n                    } else {\r\n                        if (this.styles.line.getStroke().getLineDash()) {\r\n                            this.styles.line.getStroke().setLineDash(undefined);\r\n                        }\r\n                    }\r\n                }\r\n                let lineGeo = new LineString(coords);\r\n                lineGeo = lineGeo.transform(this.projection, this.viewProjection);\r\n                return new Feature(lineGeo);\r\n            },\r\n            createLines(vectorContext) {\r\n                for (let i = 1; i <= this.curNodeIndex; i++) {\r\n                    let point = this.normalizedPoints[i - 1], point2 = this.normalizedPoints[i];\r\n                    vectorContext.drawFeature(this.createLine(point, point2), this.styles.line);\r\n                }\r\n\r\n                for (let i = 0; i <= this.curSegIndex; i++) {\r\n                    let point, point2;\r\n                    if (i == 0) {\r\n                        point = this.normalizedPoints[this.curNodeIndex];\r\n                        point2 = this.segVirPoints[i];\r\n                    } else {\r\n                        point = this.segVirPoints[i - 1];\r\n                        point2 = this.segVirPoints[i];\r\n                    }\r\n                    vectorContext.drawFeature(this.createLine(point, point2), this.styles.line);\r\n                }\r\n            },\r\n            moveFeature(event) {\r\n                const vm = this;\r\n                let vectorContext = event.vectorContext;\r\n\r\n                vm.createLines(vectorContext);\r\n                vm.createNodes(vectorContext);\r\n                vm.createMarker(vectorContext);\r\n\r\n                // tell OpenLayers to continue the postcompose animation\r\n                this.map.render();\r\n            },\r\n            listenRender() {\r\n                this.renderEventKey = this.map.on('postcompose', this.moveFeature);\r\n                this.map.render();\r\n            },\r\n\r\n            /**\r\n             *  @description: 绘制真实轨迹图层和虚拟轨迹图层中的矢量\r\n             *  @author xrx\r\n             *  @date 2019/5/14 11:34\r\n             */\r\n            drawNode(point, i) {\r\n                let coords = [point.lon, point.lat];\r\n                let currentNode = new Point(coords);\r\n                currentNode = currentNode.transform(this.projection, this.viewProjection);\r\n                let featurePoint = new Feature({\r\n                    geometry: currentNode,\r\n                    type: \"node\",\r\n                    index: i,\r\n                    featureInfo: {\r\n                        type: 'trackNode',\r\n                        data: Object.assign(deepClone(point), {coord: [point.lon, point.lat]})\r\n                    }\r\n                });\r\n\r\n                let rotation = point.direction ? parseFloat(point.direction) / 180 * Math.PI : 0;\r\n                featurePoint.set(\"rotation\", rotation);\r\n                return featurePoint;\r\n            },\r\n            drawLine(i, point, point2) {\r\n                let coords = [point.lon, point.lat],\r\n                    coords2 = [point2.lon, point2.lat];\r\n\r\n                //线\r\n                let currentLine = new LineString([coords, coords2]);\r\n                currentLine = currentLine.transform(this.projection, this.viewProjection);\r\n                let featureLine = new Feature({\r\n                    geometry: currentLine,\r\n                    type: \"line\",\r\n                    index: i + 1\r\n                });\r\n                if (point.timestamp) {\r\n                    let s = getGeodesicDistance(this.projection, coords2, coords);\r\n                    if (s > this.maxSpeed * (point2.timestamp - point.timestamp) / 1000) { //间距过大，轨迹不真实，用虚线表现\r\n                        featureLine.set(\"lineDash\", true);\r\n                    } else {\r\n                        featureLine.set(\"lineDash\", false);\r\n                    }\r\n                }\r\n                return featureLine;\r\n            },\r\n            drawFact(index) {\r\n                for (let i = 1; i <= index; i++) {\r\n                    if (this.exsitIndex.indexOf(i) != -1) {\r\n                        continue;\r\n                    }\r\n\r\n                    let point = this.normalizedPoints[i-1],\r\n                        point2 = this.normalizedPoints[i];\r\n                    this.source.addFeature(this.drawLine(i-1, point, point2));  //绘制线\r\n\r\n                    this.source.addFeature(this.drawNode(this.normalizedPoints[i-1], i-1));   //绘制节点\r\n\r\n                    this.exsitIndex.push(i);\r\n                }\r\n            },\r\n            draw() {\r\n                this.drawFact(this.curNodeIndex);\r\n\r\n                this.virtualLayer.getSource().clear();\r\n                for (let i = 0; i <= this.curSegIndex; i++) {\r\n                    let point, point2;\r\n                    if (i == 0) {\r\n                        point = this.normalizedPoints[this.curNodeIndex];\r\n                        point2 = this.segVirPoints[i];\r\n                    } else {\r\n                        point = this.segVirPoints[i - 1];\r\n                        point2 = this.segVirPoints[i];\r\n                    }\r\n                    this.virtualLayer.getSource().addFeature(this.drawLine(i - 1, point, point2));\r\n                }\r\n            },\r\n\r\n            setMarkerPosition() {\r\n                let point;\r\n                if (this.curSegIndex == -1) {\r\n                    point = this.normalizedPoints[this.curNodeIndex];\r\n                } else {\r\n                    point = this.segVirPoints[this.curSegIndex];\r\n                }\r\n                this.currentGeo.setCoordinates(transform([point.lon, point.lat], this.projection, this.viewProjection));\r\n                this.featureGeo.set('finished', true);\r\n                const rotation = point.direction ? parseFloat(point.direction) / 180 * Math.PI : 0;\r\n                this.featureGeo.set(\"rotation\", rotation);\r\n\r\n                this.featureGeo.set(\"featureInfo\", {\r\n                    type: \"trackMarker\",\r\n                    data: Object.assign(deepClone(point), {coord: [point.lon, point.lat]})\r\n                })\r\n            },\r\n\r\n            /**\r\n             *  @description: 播放 暂停 停止 跳转 改变速度\r\n             *  @author xrx\r\n             *  @date 2019/5/14 11:35\r\n             */\r\n\r\n            createTimer(interval) {\r\n                const vm = this;\r\n                vm.source.getFeatures().forEach(function (feature) {\r\n                    feature.set('finished', false);\r\n                })\r\n                vm.virtualLayer.getSource().getFeatures().forEach((feature) => {\r\n                    feature.set('finished', false);\r\n                })\r\n\r\n                vm.hisTimer = setInterval(() => {\r\n                    if (vm.curNodeIndex >= vm.normalizedPoints.length - 1) {\r\n                        vm.pause();\r\n                    } else {\r\n                        if (this.isInterpolate) {\r\n                            if (vm.curSegIndex == vm.segVirPoints.length - 1) {\r\n                                vm.curNodeIndex++;\r\n                                vm.segVirPoints = vm.segVirPoints_next;   //当前路段走完，走下一段\r\n                                vm.curSegIndex = -1;\r\n                            }\r\n\r\n                            vm.curSegIndex++;\r\n                            if (vm.curSegIndex == 0) {\r\n                                //计算下一段插值\r\n                                vm.segVirPoints_next = vm.interpolateSegment(vm.curNodeIndex + 1, vm.normalizedPoints);\r\n                            }\r\n                        } else {\r\n                            vm.curNodeIndex++;\r\n                        }\r\n                        // vm.$emit(\"update:curIndex\", vm.curNodeIndex);\r\n                    }\r\n                }, interval);\r\n            },\r\n            play() {\r\n                let interval = 1000 / this.speed;\r\n                this.listenRender();\r\n\r\n                this.createTimer(interval);\r\n            },\r\n            pause() {\r\n                if (this.hisTimer) {\r\n                    clearInterval(this.hisTimer);\r\n                    this.hisTimer = null;\r\n                }\r\n\r\n                unByKey(this.renderEventKey);\r\n                this.draw();  //绘制矢量\r\n                this.source.getFeatures().forEach((feature) => {\r\n                    if (feature.get(\"index\") <= this.curNodeIndex) {\r\n                        feature.set('finished', true);\r\n                    }\r\n                })\r\n\r\n                if (this.isInterpolate) {\r\n                    this.virtualLayer.getSource().getFeatures().forEach((feature) => {\r\n                        if (feature.get(\"index\") <= this.curSegIndex) {\r\n                            feature.set('finished', true);\r\n                        }\r\n                    })\r\n                }\r\n\r\n                this.setMarkerPosition();   //轨迹主体位置\r\n            },\r\n            stop() {\r\n                if (this.hisTimer) {\r\n                    clearInterval(this.hisTimer);\r\n                    this.hisTimer = null;\r\n                }\r\n                this.curNodeIndex = 0;\r\n                this.curSegIndex = -1;\r\n                this.segVirPoints = this.interpolateSegment(0, this.normalizedPoints);\r\n                //this.$emit(\"update:curIndex\", this.curNodeIndex);\r\n\r\n                unByKey(this.renderEventKey);\r\n\r\n                this.source.getFeatures().forEach((feature) => {\r\n                    feature.set('finished', false);\r\n                })\r\n\r\n                if (this.isInterpolate) {\r\n                    this.virtualLayer.getSource().getFeatures().forEach((feature) => {\r\n                        feature.set('finished', false);\r\n                    })\r\n                }\r\n\r\n                this.setMarkerPosition();   //轨迹主体位置\r\n            },\r\n\r\n            /**\r\n             *  @description: 跳转到真实节点\r\n             *  @param index 为真实点位序号\r\n             *  @author xrx\r\n             *  @date 2019/5/14 11:47\r\n             */\r\n            goStep(index) {\r\n                this.curNodeIndex = index;\r\n                this.curSegIndex = -1;\r\n                if (this.curNodeIndex < this.normalizedPoints.length - 1) {\r\n                    this.segVirPoints = this.interpolateSegment(this.curNodeIndex, this.normalizedPoints);\r\n                }\r\n\r\n                if (!this.hisTimer) {\r\n                    this.draw();\r\n                    this.source.getFeatures().forEach((feature) => {\r\n                        if (feature.get(\"index\") <= this.curNodeIndex) {\r\n                            feature.set('finished', true);\r\n                        } else {\r\n                            feature.set('finished', false);\r\n                        }\r\n                    })\r\n                    this.virtualLayer.getSource().clear();\r\n\r\n                    this.setMarkerPosition();   //轨迹主体位置\r\n                }\r\n            },\r\n            changeSpeed() {\r\n                let interval = 1000 / this.speed;\r\n                if (this.hisTimer) {\r\n                    clearInterval(this.hisTimer);\r\n                    this.createTimer(interval);\r\n                }\r\n            },\r\n            findValue(arr, ms) {\r\n                let total = arr.length;\r\n                if (total == 1) {\r\n                    return arr[0].index;\r\n                }\r\n                let mid = parseInt(total / 2);\r\n                if (arr[mid].timestamp > ms) {\r\n                    return this.findValue(arr.slice(0, mid), ms);\r\n                } else if (arr[mid].timestamp < ms) {\r\n                    return this.findValue(arr.slice(mid), ms);\r\n                } else {\r\n                    return arr[mid].index;\r\n                }\r\n            },\r\n\r\n            /**\r\n             *  @description: 跳到转时间点\r\n             *  @param seconds：number  和开始时间相差的秒数\r\n             *  @return void\r\n             *  @author xrx\r\n             *  @date 2019/5/14 13:54\r\n             */\r\n            goTime(seconds) {\r\n                if (!this.isInterpolate) {\r\n                    return;\r\n                }\r\n                let start = this.normalizedPoints[0].timestamp;\r\n                let arr = this.normalizedPoints.map((item, index) => {\r\n                    item.index = index;\r\n                    return item;\r\n                })\r\n                console.log(\"搜索位置\", dateFormat(new Date(), \"yyyy-MM-dd HH:mm:ss\"));\r\n                this.curNodeIndex = this.findValue(arr, start + seconds * 1000);\r\n                console.log(\"搜索位置结束\", dateFormat(new Date(), \"yyyy-MM-dd HH:mm:ss\"));\r\n                this.curSegIndex = (start + seconds * 1000 - this.normalizedPoints[this.curNodeIndex].timestamp) / 1000 - 1;\r\n                this.segVirPoints = this.interpolateSegment(this.curNodeIndex, this.normalizedPoints);\r\n                // this.$emit(\"update:curIndex\", this.curNodeIndex);\r\n\r\n                if (!this.hisTimer) {\r\n                    this.draw();\r\n                    this.source.getFeatures().forEach((feature) => {\r\n                        if (feature.get(\"index\") <= this.curNodeIndex) {\r\n                            feature.set('finished', true);\r\n                        } else {\r\n                            feature.set('finished', false);\r\n                        }\r\n                    })\r\n                    this.virtualLayer.getSource().getFeatures().forEach((feature) => {\r\n                        if (feature.get(\"index\") <= this.curSegIndex) {\r\n                            feature.set('finished', true);\r\n                        } else {\r\n                            feature.set('finished', false);\r\n                        }\r\n                    })\r\n\r\n                    this.setMarkerPosition();   //轨迹主体位置\r\n                }\r\n            },\r\n            showNameOverlay(map, feature, data) {\r\n                const vm = this;\r\n                //悬浮时，先移除其它的弹出框\r\n                removeOverlay(map, null, \"overLabel\");\r\n\r\n                let label = null;\r\n                if (vm.overLabel == \"none\") {\r\n                    return false;\r\n                }\r\n                label = setLabelEvent(feature, map, data);\r\n                if (label) {\r\n                    label.set(\"overLabel\", \"true\"); //与其他的弹出框区分\r\n                }\r\n                return label;\r\n            },\r\n            listenerMove(data){\r\n                const vm = this;\r\n                if (data.olLayer == vm.layer) {\r\n                    vm.$emit(\"pointermove\", data);\r\n                    if (data.feature.get(\"type\") == \"node\") {\r\n                        const coords = data.feature.getGeometry().getCoordinates();\r\n                        vm.showNameOverlay(vm.map, data.feature, {\r\n                            lat: coords[1],\r\n                            lon: coords[0],\r\n                            projection: vm.viewProjection,\r\n                            label: {\r\n                                classNm: \"featureOver trackOver\",\r\n                                message: data.feature.get(\"featureInfo\").data.time || \"空\"\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            },\r\n            listenerMove_blank() {\r\n                const vm = this;\r\n                removeOverlay(vm.map, null, \"overLabel\");   //移除名称弹框\r\n            },\r\n            listenerClick(data) {\r\n                const vm = this;\r\n                if (data.olLayer == vm.layer) {\r\n                    vm.$emit(\"singleclick\", data);\r\n\r\n                    const feature = data.feature;\r\n                    let type = feature.get(\"type\");\r\n                    if(type==\"node\"||type==\"marker\"){\r\n                        vm.selectPoint = feature.get(\"featureInfo\").data;\r\n                    }\r\n                }\r\n            },\r\n            listenerClick_blank() {\r\n                const vm = this;\r\n                vm.selectPoint = null;   //选中图标为空\r\n            },\r\n            listenEvent() {\r\n                const vm = this;\r\n                const mapId = this.map.getTarget().id || \"default\";\r\n                Bus.$on(mapId + \".track.pointermove\", vm.listenerMove);\r\n\r\n                //地图空白处悬浮\r\n                Bus.$on(mapId + \".pointermove.blank\", vm.listenerMove_blank);\r\n\r\n                Bus.$on(mapId + \".track.singleclick\", vm.listenerClick);\r\n                //地图空白处 点击\r\n                Bus.$on(mapId + \".singleclick.blank\", vm.listenerClick_blank);\r\n            }\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                vm.source.clear();\r\n                map.removeLayer(vm.layer);\r\n\r\n                vm.virtualLayer.getSource().clear();\r\n                map.removeLayer(vm.virtualLayer);\r\n\r\n                const mapId = map.getTarget().id || \"default\";\r\n                Bus.$off(mapId + \".track.pointermove\", vm.listenerMove);\r\n                Bus.$off(mapId + \".pointermove.blank\", vm.listenerMove_blank);\r\n                Bus.$off(mapId + \".track.singleclick\", vm.listenerClick);\r\n                Bus.$off(mapId + \".singleclick.blank\", vm.listenerClick_blank);\r\n            });\r\n\r\n            this.curNodeIndex = 0;\r\n            if (this.hisTimer) {\r\n                clearInterval(this.hisTimer);\r\n            }\r\n\r\n            unByKey(this.renderEventKey);\r\n        }\r\n    }\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./track.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./track.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./track.vue?vue&type=template&id=30129a5e&\"\nimport script from \"./track.vue?vue&type=script&lang=js&\"\nexport * from \"./track.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-migrate\",staticStyle:{\"display\":\"none\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-migrate\" style=\"display: none;\"></div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import Feature from \"ol/Feature\";\r\n    import Point from \"ol/geom/Point\";\r\n    import {unByKey} from \"ol/Observable\";\r\n    import {Style, Fill, Text} from \"ol/style\";\r\n\r\n    import {createStyle} from \"../../util/helpers\";\r\n    import Arc from \"../../plugins/plot/gispace/plot/Arc\";\r\n    import PlotUtils from \"../../plugins/plot/gispace/PlotUtils\";\r\n\r\n    export default {\r\n        name: 'ol-migrate',\r\n        inject: ['getMap'],\r\n        props: {\r\n            data: {\r\n                type: Array,\r\n                required: true,\r\n                validator: function (value) {\r\n                    let result = value.filter(item => {\r\n                        if (item.from && !item.from.lnglat) {\r\n                            return true;\r\n                        }\r\n                        if (item.to && !item.to.lnglat) {\r\n                            return true;\r\n                        }\r\n                        return !item.from || !item.to;\r\n                    });\r\n                    return !result.length;\r\n                }\r\n            },\r\n            lineStyle: {\r\n                type: Object,\r\n                default: function () {\r\n                    return {\r\n                        stroke: {\r\n                            color: '#12b5d0',\r\n                            width: 2\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            textColor: String,   //地点文字颜色\r\n            moveRadius: {\r\n                type: Number,\r\n                default: 3\r\n            },\r\n            moveColor: {\r\n                type: String,\r\n                default: \"white\"\r\n            },\r\n            speed: {\r\n                type: String,\r\n                default: 'normal',\r\n                validator(value){\r\n                    return [\"slow\", \"normal\"].indexOf(value)!=-1;\r\n                }\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            }\r\n        },\r\n        data() {\r\n            return {}\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.initData();\r\n\r\n                this.getMap().then((map) => {\r\n                    this.map = map;\r\n                    this.layer = this.createLayer(map);\r\n                    this.source = this.layer.getSource();\r\n                    this.loadLines(map);\r\n                    this.createText();\r\n                    this.listenRender();\r\n                })\r\n            },\r\n            initData() {\r\n                this.map = null;\r\n                this.layer = null;\r\n                this.source = null;\r\n\r\n                this.style = createStyle(this.lineStyle);\r\n                this.renderEventKey = null;   //地图渲染事件监听\r\n                this.lines = [];   //线坐标数组\r\n                this.linesIndex = [];  //各个线移动点当前位置\r\n                this.linesNumber = [];  //各个线划分的段数\r\n                this.linesPnts = [];   //各个线切分后的点位\r\n                this.normalizedData = this.handleData(this.data);\r\n            },\r\n            handleData(data) {\r\n                return data.map(item => {\r\n                    let lnglat = item.from.lnglat,\r\n                        lnglat2 = item.to.lnglat;\r\n                    item.from.lnglat = [parseFloat(lnglat[0]), parseFloat(lnglat[1])];\r\n                    item.to.lnglat = [parseFloat(lnglat2[0]), parseFloat(lnglat2[1])];\r\n\r\n                    this.linesIndex.push(0);\r\n                    this.linesNumber.push(0);\r\n                    this.linesPnts.push(0);\r\n                    return item;\r\n                })\r\n            },\r\n            createLayer(map) {\r\n                let layer = new VectorLayer({\r\n                    source: new VectorSource(),\r\n                    zIndex: this.zIndex\r\n                });\r\n                layer.set(\"migrate\", true);\r\n                map.addLayer(layer);\r\n                return layer;\r\n            },\r\n\r\n            /**\r\n             *  @description: 绘制两点之间的迁徙弧线\r\n             *  @param {Object} options\r\n             *  @return {Arc}\r\n             *  @author xrx\r\n             *  @date 2019/5/17 16:35\r\n            */\r\n            createLine(options) {\r\n                let startX = options.startX,\r\n                    startY = options.startY,\r\n                    endX = options.endX,\r\n                    endY = options.endY;\r\n\r\n                let m = (startX + endX) / 2; // 横轴中点\r\n                let n = (startY + endY) / 2; // 纵轴中点\r\n                const factor = 0.1;\r\n\r\n                let centerX = (endY - startY) * factor + m;\r\n                let centerY = (startX - endX) * factor + n;\r\n                return new Arc([[startX, startY], [endX, endY], [centerX, centerY]]);\r\n            },\r\n            loadLines(map) {\r\n                const vm = this;\r\n                this.normalizedData.forEach(item => {\r\n                    const lnglat = item.from.lnglat,\r\n                        lnglat2 = item.to.lnglat;\r\n                    let options = {\r\n                        startX: lnglat[0],\r\n                        startY: lnglat[1],\r\n                        endX: lnglat2[0],\r\n                        endY: lnglat2[1]\r\n                    }\r\n                    let geo = vm.createLine(options);\r\n                    geo = geo.transform(vm.projection, map.getView().getProjection());\r\n                    let f = new Feature(geo);\r\n                    let style;\r\n                    if (item.lineStyle) {\r\n                        style = createStyle(item.lineStyle);\r\n                    } else {\r\n                        style = vm.style;\r\n                    }\r\n\r\n                    //单独设置线条颜色\r\n                    f.setStyle(style);\r\n\r\n                    this.lines.push(geo.getCoordinates());   //坐标串\r\n                    this.source.addFeature(f);\r\n                })\r\n                this.map.getView().fit(this.source.getExtent());\r\n            },\r\n\r\n            /**\r\n             *  @description: 添加地点名称\r\n             *  @author xrx\r\n             *  @date 2019/5/17 16:38\r\n            */\r\n            createText() {\r\n                const vm = this;\r\n                let arr = [], markerArr = [];\r\n                vm.normalizedData.forEach(item => {\r\n                    const lnglat = item.from.lnglat,\r\n                        lnglat2 = item.to.lnglat;\r\n                    if (arr.indexOf(item.from.city) == -1) {\r\n                        markerArr.push({\r\n                            lnglat,\r\n                            city: item.from.city\r\n                        })\r\n                    }\r\n                    if (arr.indexOf(item.to.city) == -1) {\r\n                        markerArr.push({\r\n                            lnglat: lnglat2,\r\n                            city: item.to.city\r\n                        })\r\n                    }\r\n                })\r\n\r\n                markerArr.forEach(m => {\r\n                    let geometry = new Point(m.lnglat);\r\n                    geometry = geometry.transform(vm.projection, vm.map.getView().getProjection());\r\n                    let f = new Feature(geometry);\r\n                    f.setStyle(new Style({\r\n                        text: new Text({\r\n                            text: m.city,\r\n                            font: '14px Calibri,sans-serif',\r\n                            offsetX: 20,\r\n                            offsetY: 20,\r\n                            fill: new Fill({\r\n                                color: this.lineStyle.stroke.color\r\n                            })\r\n                        })\r\n                    }))\r\n                    vm.source.addFeature(f);\r\n                })\r\n            },\r\n\r\n            /**\r\n             *  @description: 两个地理坐标之间的像素距离\r\n             *  @author xrx\r\n             *  @date 2019/5/17 16:39\r\n            */\r\n            getPixelDis(p1, p2) {\r\n                let pixel = this.map.getPixelFromCoordinate(p1);\r\n                let pixel2 = this.map.getPixelFromCoordinate(p2);\r\n                return PlotUtils.distance(pixel, pixel2);\r\n            },\r\n            /**\r\n             *  @description: 线段按移动点半径分段\r\n             *  @param {Array} p1 - 地理坐标\r\n             *  @param {Array} p2 - 地理坐标\r\n             *  @return Array\r\n             *  @author xrx\r\n             *  @date 2019/5/17 16:39\r\n            */\r\n            getPointSeg(p1, p2) {\r\n                let dis = this.getPixelDis(p1, p2);\r\n                let total = Math.ceil(dis / this.moveRadius);\r\n                let yDiff = p2[1] - p1[1],\r\n                    xDiff = p2[0] - p1[0];\r\n                let x, y, pnts = [];\r\n                for (let i = 1; i < total; i++) {\r\n                    x = p1[0] + this.moveRadius * i / dis * xDiff;\r\n                    y = p1[1] + this.moveRadius * i / dis * yDiff;\r\n                    pnts.push([x, y]);\r\n                }\r\n                pnts.push(p2);\r\n                return pnts;\r\n            },\r\n            getPointList() {\r\n                let total = this.lines.length;\r\n                for (let no = 0; no < total; no++) {\r\n                    let line = this.lines[no];\r\n                    const len = line.length;\r\n                    let pnts = [];\r\n                    for (let i = 0; i < len - 1; i++) {\r\n                        pnts = pnts.concat(this.getPointSeg(line[i], line[i + 1]));\r\n                    }\r\n                    pnts.push(line[0]);\r\n                    if (this.linesPnts[no] != 0) {\r\n                        this.linesIndex[no] = pnts.length * this.linesIndex[no] / this.linesNumber[no];\r\n                    }\r\n\r\n                    this.linesPnts[no] = pnts;\r\n                    this.linesNumber[no] = pnts.length;\r\n                }\r\n            },\r\n\r\n            /**\r\n             *  @description: 生成目前的移动点，并设置透明度依次降低\r\n             *  @param {Number} no 最大位置序号\r\n             *  @param {Object} vectorContext Context for drawing geometries.\r\n             *         A vector context is available on render events and does not need to be constructed directly.\r\n             *  @return void\r\n             *  @author xrx\r\n             *  @date 2019/5/17 16:50\r\n            */\r\n            createMoveCircle(no, vectorContext) {\r\n                let style = createStyle({\r\n                    image: {\r\n                        circle: {\r\n                            radius: this.moveRadius,\r\n                            fill: {\r\n                                color: this.moveColor\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n\r\n                const max = parseInt(this.linesIndex[no]);\r\n                for (let i = 0; i <= max; i++) {\r\n                    let center = this.linesPnts[no][i];\r\n                    let pointGeo = new Point(center);\r\n                    let featurePoint = new Feature(pointGeo);\r\n                    style.getImage().setOpacity(Math.pow(0.95, max - i + 1));\r\n                    vectorContext.drawFeature(featurePoint, style);\r\n                }\r\n\r\n                this.linesIndex[no] += this.speed==\"normal\"?1:0.5;\r\n                if (this.linesIndex[no] > this.linesNumber[no] - 1) {\r\n                    this.linesIndex[no] = 0;\r\n                }\r\n            },\r\n            moveFeature(event) {\r\n                const vm = this;\r\n                let vectorContext = event.vectorContext;\r\n\r\n                if (this.linesPnts[0] == 0) {\r\n                    this.getPointList();\r\n                }\r\n\r\n                const len = this.lines.length;\r\n                for (let i = 0; i < len; i++) {\r\n                    vm.createMoveCircle(i, vectorContext);\r\n                }\r\n\r\n                // tell OpenLayers to continue the postcompose animation\r\n                this.map.render();\r\n            },\r\n            listenRender() {\r\n                this.renderEventKey = this.map.on('postcompose', this.moveFeature);\r\n                this.map.render();\r\n                this.listenMove(this.map);\r\n            },\r\n            listenMove(map) {\r\n                const vm = this;\r\n                map.getView().on('change:resolution', function () {\r\n                    vm.getPointList();\r\n                });\r\n            }\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                vm.source.clear();\r\n                map.removeLayer(vm.layer);\r\n            });\r\n\r\n            unByKey(this.renderEventKey);\r\n        }\r\n    }\r\n\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./migrate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./migrate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./migrate.vue?vue&type=template&id=4b2ce29a&\"\nimport script from \"./migrate.vue?vue&type=script&lang=js&\"\nexport * from \"./migrate.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-radar\",staticStyle:{\"display\":\"none\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-radar\" style=\"display: none;\"></div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import Feature from \"ol/Feature\";\r\n    import {Circle, Polygon} from \"ol/geom\";\r\n    import {unByKey} from \"ol/Observable\";\r\n    import Style from \"ol/style/Style\";\r\n    import Fill from \"ol/style/Fill\";\r\n    import {createStyle, calcRadius, getArcPoints, coordinateTransform, colorRgb} from \"../../util/helpers\";\r\n\r\n    export default {\r\n        name: 'ol-radar',\r\n        inject: ['getMap'],\r\n        props: {\r\n            center: {\r\n                type: Array,\r\n                required: true,\r\n                validator: function (value) {\r\n                    return value.length == 2;\r\n                }\r\n            },\r\n            radius: {\r\n                type: Number,\r\n                default: 500\r\n            },\r\n            circleStyle: {\r\n                type: Object,\r\n                default() {\r\n                    return {\r\n                        stroke: {\r\n                            width: 1,\r\n                            color: '#12b5d0'\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            sectorColor: {\r\n                type: String,\r\n                default: '#12b5d0'\r\n            },\r\n            speed: {\r\n              type: String,\r\n              default: 'normal',\r\n              validator(value){\r\n                  return [\"slow\", \"normal\"].indexOf(value)!=-1;\r\n              }\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            }\r\n        },\r\n        watch: {\r\n            center() {\r\n                this.update();\r\n            },\r\n            radius() {\r\n                this.update();\r\n            },\r\n            circleStyle: {\r\n                handler(nval) {\r\n                    this.circleFeature.setStyle(createStyle(nval));\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        computed: {\r\n            normalizeColor(){\r\n                let color = this.sectorColor;\r\n                let c = colorRgb(color).split(\",\");\r\n                c[0] = parseInt(c[0]);\r\n                c[1] = parseInt(c[1]);\r\n                c[2] = parseInt(c[2]);\r\n                return c;\r\n            }\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.initData();\r\n\r\n                this.getMap().then((map) => {\r\n                    this.map = map;\r\n                    this.layer = this.createLayer(map);\r\n                    this.source = this.layer.getSource();\r\n\r\n                    this.update();\r\n                })\r\n            },\r\n            initData() {\r\n                this.map = null;\r\n                this.layer = null;\r\n                this.source = null;\r\n                this.circleFeature = null;\r\n\r\n                this.renderEventKey = null;   //地图渲染事件监听\r\n                this.curNo = 0;\r\n                this.angleDiff = 5;   //每个小扇形的角度\r\n                this.parts = 360 / this.angleDiff;\r\n            },\r\n            update() {\r\n                this.source.clear();\r\n\r\n                //把数据处理成和地图坐标系一致\r\n                this.viewProjection = this.map.getView().getProjection();\r\n                this.centerAfter = coordinateTransform(this.center, this.projection, this.viewProjection);\r\n                this.radiusAfter = calcRadius(this.viewProjection, this.radius, this.centerAfter);\r\n\r\n                this.createCircle();   //底下的圆\r\n                this.listenRender();\r\n            },\r\n            createLayer(map) {\r\n                let layer = new VectorLayer({\r\n                    source: new VectorSource(),\r\n                    zIndex: this.zIndex\r\n                });\r\n                layer.set(\"radar\", true);\r\n                map.addLayer(layer);\r\n                return layer;\r\n            },\r\n            createCircle() {\r\n                let geometry = new Circle(this.centerAfter, this.radiusAfter);\r\n                let f = this.circleFeature = new Feature(geometry);\r\n                f.setStyle(createStyle(this.circleStyle));\r\n\r\n                //二维转三维 贴地\r\n                geometry.set(\"altitudeMode\", \"clampToGround\");\r\n\r\n                this.source.addFeature(f);\r\n            },\r\n            createSector(max, vectorContext) {\r\n                let radian = this.angleDiff / 180 * Math.PI;\r\n                let min = Math.max(max - this.parts - 1, 0);\r\n                for (let i = max; i >= min; i--) {\r\n                    let startAngle = radian * i;\r\n                    let coords = getArcPoints(this.centerAfter, this.radiusAfter, startAngle, startAngle + radian);\r\n                    coords.push(this.centerAfter);\r\n                    coords.push(coords[0]);\r\n                    let geometry = new Polygon([coords]);\r\n                    let f = new Feature(geometry);\r\n\r\n                    let c = this.normalizeColor;\r\n                    c[3] = 0.6 * Math.pow(0.95, max - i);\r\n                    let style = new Style({\r\n                        fill: new Fill({\r\n                            color: this.normalizeColor\r\n                        })\r\n                    });\r\n\r\n                    vectorContext.drawFeature(f, style);\r\n                }\r\n            },\r\n            moveFeature(event) {\r\n                let vectorContext = event.vectorContext;\r\n                this.createSector(parseInt(this.curNo), vectorContext);\r\n                this.curNo += this.speed==\"normal\"?1:0.5;\r\n                /*if (this.curNo > 360/this.angleDiff-1) {\r\n                    this.curNo = 0;parseInt(this.curNo)\r\n                }*/\r\n\r\n                // tell OpenLayers to continue the postcompose animation\r\n                this.map.render();\r\n            },\r\n            listenRender() {\r\n                if (this.renderEventKey) {\r\n                    unByKey(this.renderEventKey);\r\n                }\r\n                this.renderEventKey = this.map.on('postcompose', this.moveFeature);\r\n                this.map.render();\r\n            },\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                vm.source.clear();\r\n                map.removeLayer(vm.layer);\r\n            });\r\n\r\n            unByKey(this.renderEventKey);\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./radar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./radar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./radar.vue?vue&type=template&id=61373b31&\"\nimport script from \"./radar.vue?vue&type=script&lang=js&\"\nexport * from \"./radar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import flash from './ripples.vue';\r\nimport twinkle from './twinkle.vue';\r\nimport track from './track.vue';\r\nimport migrate from './migrate.vue';\r\nimport radar from './radar.vue';\r\n\r\nfunction plugin (Vue) {\r\n    if (plugin.installed) {\r\n        return\r\n    }\r\n    plugin.installed = true;\r\n\r\n    Vue.component(flash.name, flash);\r\n    Vue.component(twinkle.name, twinkle);\r\n    Vue.component(track.name, track);\r\n    Vue.component(migrate.name, migrate);\r\n    Vue.component(radar.name, radar);\r\n}\r\n\r\nexport default plugin;\r\n\r\nexport {\r\n    flash,\r\n    twinkle,\r\n    track,\r\n    migrate,\r\n    radar,\r\n    plugin as install\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-path\",staticStyle:{\"display\":\"none\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-path\" style=\"display: none;\"></div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import {olMapDefaults} from '../../util/olMapDefaults'\r\n    import {\r\n        getGeodesicDistance, createFeature, createStyle, isDefined, deepClone,\r\n        getArcPoints, coordinateTransform, calcRadius\r\n    } from '../../util/helpers'\r\n\r\n    export default {\r\n        name: 'ol-path',\r\n        inject: ['getMap'],\r\n        props: {\r\n            options: {\r\n                type: Object,\r\n                default() {\r\n                    return {\r\n                        id: 'default',\r\n                        type: 'Circle',\r\n                        coords: [120, 30],\r\n                        radius: 500,\r\n                        style: {\r\n                            fill: {\r\n                                color: \"rgba(255,0,0,0.2)\"\r\n                            },\r\n                            stroke: {\r\n                                color: 'blue',\r\n                                width: 4\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                layer: null,\r\n                source: null,\r\n                feature: null\r\n            }\r\n        },\r\n        watch: {\r\n            options: {\r\n                handler() {\r\n                    const vm = this;\r\n                    vm.getMap().then(map => {\r\n                        vm.update(map);\r\n                    })\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.getMap().then((map) => {\r\n                    this.createLayer(map);\r\n                    this.update(map);\r\n                })\r\n            },\r\n            createLayer(map) {\r\n                this.source = new VectorSource();\r\n                this.layer = new VectorLayer({\r\n                    source: this.source,\r\n                    zIndex: this.zIndex\r\n                });\r\n                this.layer.set(\"pathLayer\", true);\r\n                map.addLayer(this.layer);\r\n            },\r\n\r\n            /**\r\n             *  @description: 在当前坐标系下计算半径偏差会比较小\r\n             *  @param {String} projection\r\n             *  @return {Number}\r\n             *  @author xrx\r\n             *  @date 2019/5/20 19:00\r\n            */\r\n            calcRadius(projection){\r\n                if (this.options.radius) {\r\n                    if(this.projection!=\"pixel\") {\r\n                        const perDegree = getGeodesicDistance(projection, this.options.coords, [this.options.coords[0] + 1, this.options.coords[1]]);\r\n                        const radius = this.options.radius / perDegree;\r\n                        return radius;\r\n                    }\r\n\r\n                    return this.options.radius;\r\n                }\r\n                return 0;\r\n            },\r\n            update(map) {\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                const defaults = olMapDefaults.getDefaults();\r\n\r\n                let defaultStyle = defaults.styles.feature;\r\n\r\n                if (this.feature) {\r\n                    if (this.options.type == \"Circle\") {\r\n                        let data = deepClone(this.options);\r\n                        if(this.projection!=\"pixel\") {\r\n                            data.coords = coordinateTransform(data.coords, this.projection, viewProjection);\r\n                            data.radius = calcRadius(viewProjection, data.radius, data.coords);\r\n                        }\r\n                        this.feature.getGeometry().setCenterAndRadius(data.coords, data.radius);\r\n                    } else if(this.options.type == \"Sector\"){\r\n                        let data = deepClone(this.options);\r\n                        if(this.projection!=\"pixel\") {\r\n                            data.coords = coordinateTransform(data.coords, this.projection, viewProjection);\r\n                            data.radius = calcRadius(viewProjection, data.radius, data.coords);\r\n                        }\r\n                        let coords = getArcPoints(data.coords, data.radius, data.startAngle, data.endAngle);\r\n                        coords.push(data.coords, coords[0]);\r\n                        this.feature.getGeometry().setCoordinates([coords]);\r\n                    }else{\r\n                        this.feature.getGeometry().setCoordinates(this.options.coords);\r\n\r\n                        if (this.projection != 'pixel') {\r\n                            this.feature.getGeometry().transform(this.projection, viewProjection);\r\n                        }\r\n                    }\r\n\r\n                    //样式更新\r\n                    let style = deepClone(this.options.style) || defaultStyle;\r\n                    if (isDefined(style)) {\r\n                        if (style instanceof Array) {\r\n                            let len = style.length;\r\n                            for (let i = 0; i < len; i++) {\r\n                                style[i] = createStyle(style[i]);\r\n                            }\r\n                        } else {\r\n                            style = createStyle(style);\r\n                        }\r\n\r\n                        this.feature.setStyle(style);\r\n                    }\r\n                } else {\r\n                    let data = deepClone(this.options);\r\n                    data.style = data.style || defaultStyle;\r\n                    data.projection = this.projection;\r\n                    if (this.options.radius) {\r\n                        if(this.projection!=\"pixel\") {\r\n                            data.coords = coordinateTransform(data.coords, this.projection, viewProjection);\r\n                            data.radius = calcRadius(viewProjection, data.radius, data.coords);\r\n                            data.projection = viewProjection;\r\n                        }\r\n                    }\r\n                    this.feature = createFeature(data, viewProjection);\r\n                    this.source.addFeature(this.feature);\r\n                    this.$emit('create-end', this.feature);\r\n                }\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                let source = vm.source;\r\n                source.getFeatures().forEach(function (f) {\r\n                    let s = f.getStyle();\r\n                    s = null;\r\n                    f = null;\r\n                })\r\n                source.clear();\r\n                source = null;\r\n                map.removeLayer(vm.layer);\r\n            })\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./path.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./path.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./path.vue?vue&type=template&id=47b9c97f&\"\nimport script from \"./path.vue?vue&type=script&lang=js&\"\nexport * from \"./path.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-mulpath\",staticStyle:{\"display\":\"none\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*\r\n* 多个feature加载 比使用多个olPath组件性能高\r\n* 并且对交互基本没有要求\r\n* 所以特意为此写了一个组件\r\n* type种类Point, LineString, MultiLineString, Polygon等\r\n*/\r\n<template>\r\n    <div class=\"vueol-mulpath\" style=\"display: none;\"></div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import {createFeature, deepClone, coordinateTransform, calcRadius } from '../../util/helpers'\r\n    import {olMapDefaults} from \"../../util/olMapDefaults\";\r\n\r\n    export default {\r\n        name: 'ol-mul-path',\r\n        inject: ['getMap'],\r\n        props: {\r\n            grids: {\r\n                type: Array,\r\n                required: true\r\n            },\r\n            isFit: {\r\n              type: Boolean,\r\n              default: false\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            }\r\n        },\r\n        data() {\r\n            return {}\r\n        },\r\n        watch: {\r\n            grids: {\r\n                handler() {\r\n                    const vm = this;\r\n                    vm.getMap().then(map => {\r\n                        vm.update(map);\r\n                    })\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.initData();\r\n                this.getMap().then((map) => {\r\n                    this.createLayer(map);\r\n                    this.update(map);\r\n                })\r\n            },\r\n            initData() {\r\n                this.layer = null;\r\n                this.source = null;\r\n            },\r\n            createLayer(map) {\r\n                this.source = new VectorSource();\r\n                this.layer = new VectorLayer({\r\n                    source: this.source,\r\n                    zIndex: this.zIndex\r\n                });\r\n                this.layer.set(\"mulPathLayer\", true);\r\n                map.addLayer(this.layer);\r\n            },\r\n            update(map) {\r\n                const vm = this;\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                const defaults = olMapDefaults.getDefaults();\r\n\r\n                let defaultStyle = defaults.styles.feature;\r\n\r\n                let nVal = this.grids;\r\n                let features = new Array();\r\n                nVal.forEach(function (point) {\r\n                    let data = deepClone(point);\r\n                    data.style = data.style || defaultStyle;\r\n                    data.projection = vm.projection;\r\n                    if (point.radius) {\r\n                        if(vm.projection!=\"pixel\") {\r\n                            data.coords = coordinateTransform(data.coords, vm.projection, viewProjection);\r\n                            data.radius = calcRadius(viewProjection, data.radius, data.coords);\r\n                            data.projection = viewProjection;\r\n                        }\r\n                    }\r\n                    let feature = createFeature(data, viewProjection);\r\n                    features.push(feature);\r\n                });\r\n                vm.source.clear(true);\r\n                vm.source.addFeatures(features);\r\n\r\n                vm.$emit(\"loadFinished\", {\r\n                    source: vm.source\r\n                })\r\n\r\n                if(vm.isFit){\r\n                    map.getView().fit(vm.source.getExtent());\r\n                }\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                let source = vm.source;\r\n                source.getFeatures().forEach(function (f) {\r\n                    let s = f.getStyle();\r\n                    s = null;\r\n                    f = null;\r\n                })\r\n                source.clear();\r\n                source = null;\r\n                map.removeLayer(vm.layer);\r\n            })\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./multiPath.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./multiPath.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./multiPath.vue?vue&type=template&id=2d445c99&\"\nimport script from \"./multiPath.vue?vue&type=script&lang=js&\"\nexport * from \"./multiPath.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-collection\",staticStyle:{\"display\":\"none\"}},[_vm._t(\"default\",null,{\"selectPoint\":_vm.selectPoint})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-collection\" style=\"display: none;\">\r\n        <slot :selectPoint=\"selectPoint\"></slot>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {\r\n        Vector as VectorLayer\r\n    } from 'ol/layer';\r\n    import {\r\n        Vector as VectorSource\r\n    } from 'ol/source';\r\n    import Feature from 'ol/Feature.js';\r\n    import Point from 'ol/geom/Point';\r\n    import {\r\n        bbox\r\n    } from 'ol/loadingstrategy';\r\n    import {\r\n        containsCoordinate\r\n    } from 'ol/extent';\r\n\t\r\n    import {\r\n        createStyle,\r\n        isDefined,\r\n        coordinateTransform,\r\n        removeOverlay,\r\n        setLabelEvent,\r\n        deepClone,\r\n        validCoords\r\n    } from '../../util/helpers'\r\n    import Bus from '../../util/bus'\r\n\r\n    export default {\r\n        name: 'ol-point-collection',\r\n        inject: ['getMap'],\r\n        props: {\r\n            points: {\r\n                type: Array,\r\n                default () {\r\n                    return [{\r\n                        id: 'default',\r\n                        coords: [120, 30],\r\n                        style: {\r\n                            fill: {\r\n                                color: \"rgba(255,0,0,0.2)\"\r\n                            },\r\n                            stroke: {\r\n                                color: 'blue',\r\n                                width: 4\r\n                            }\r\n                        }\r\n                    }]\r\n                }\r\n            },\r\n            layerStyle: {\r\n                type: Object\r\n            },\r\n            onlyVisible: { //是否只加载可见视图内的点位;在快速刷新点位的情境下适用，并且点位数量不能太大（几千？）\r\n                type: Boolean,\r\n                default: false\r\n            },\r\n            selectPointId: [String, Number],\r\n            blankClear: { //点击空白处是否设置selectPoint=null\r\n                type: Boolean,\r\n                default: true\r\n            },\r\n            /*\r\n             ** Render mode for vector layers:\r\n             **   1, 'image': Vector layers are rendered as images. Great performance,\r\n             **         but point symbols and texts are always rotated with the view and pixels are scaled during zoom animations.\r\n             **   2, 'vector': Vector layers are rendered as vectors. Most accurate rendering even during animations,\r\n             **        but slower performance.\r\n             */\r\n            renderMode: {\r\n                type: String,\r\n                default: 'vector'\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                layer: null,\r\n                source: null,\r\n                feature: null,\r\n                moveLabel: null,\r\n                selectPoint: null,\r\n                storeObject: {}\r\n            }\r\n        },\r\n        watch: {\r\n            points: {\r\n                handler() {\r\n                    const vm = this;\r\n                    vm.getMap().then(map => {\r\n                        vm.update(map);\r\n                    })\r\n                },\r\n                deep: true\r\n            },\r\n            selectPointId: {\r\n                handler(nval) {\r\n                    const vm = this;\r\n                    if (!nval) {\r\n                        vm.selectPoint = null;\r\n                        return false;\r\n                    }\r\n                    let point = vm.storeObject[nval];\r\n                    if (point) {\r\n                        vm.selectPoint = deepClone(point);\r\n                    } else {\r\n                        vm.selectPoint = null;\r\n                    }\r\n                }\r\n            },\r\n            selectPoint(nval) {\r\n                //双向数据绑定\r\n                // 应用场景：点击列表，地图相应点位点击弹框显示；反之，点击点位，列表对应数据选中\r\n                if (!nval) {\r\n                    this.$emit('update:selectPointId', \"\");\r\n                } else {\r\n                    this.$emit('update:selectPointId', nval.id);\r\n                }\r\n            }\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.getMap().then((map) => {\r\n                    this.map = map;\r\n                    this.createLayer(map);\r\n\r\n                    this.storeObject = {}; //以id为键值，存储数据\r\n                    this.update(map);\r\n\r\n                    this.listenEvent(map);\r\n\r\n                    if (this.selectPointId) {\r\n                        let point = this.storeObject[this.selectPointId];\r\n                        if (point) {\r\n                            this.selectPoint = deepClone(point);\r\n                        } else {\r\n                            this.selectPoint = null;\r\n                        }\r\n                    }\r\n                })\r\n            },\r\n            getStyle(style) {\r\n                let result = null;\r\n                if (isDefined(style)) {\r\n                    if (style instanceof Array) {\r\n                        let len = style.length;\r\n                        result = [];\r\n                        for (let i = 0; i < len; i++) {\r\n                            result[i] = createStyle(style[i]);\r\n                        }\r\n                    } else {\r\n                        result = createStyle(style);\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            },\r\n            createLayer(map) {\r\n                this.source = new VectorSource({\r\n                    strategy: bbox\r\n                });\r\n                this.layer = new VectorLayer({\r\n                    source: this.source,\r\n                    renderMode: this.renderMode,\r\n                    zIndex: this.zIndex\r\n                });\r\n                this.layer.set(\"collectionLayer\", true);\r\n                map.addLayer(this.layer);\r\n\r\n                if (this.layerStyle) {\r\n                    const style = this.getStyle(this.layerStyle);\r\n                    this.layer.setStyle(style);\r\n                }\r\n            },\r\n            isRepeatId(points) {\r\n                let arr = [];\r\n                for (let value of points) {\r\n                    if (!value.id) {\r\n                        console.log(\"id缺失：\" + JSON.stringify(value));\r\n                        return true;\r\n                    }\r\n                    if (arr.indexOf(value.id) != -1) {\r\n                        let result = points.filter(item => item.id == value.id);\r\n                        console.log(\"id重复：\" + JSON.stringify(result));\r\n                        return true;\r\n                    }\r\n                    arr.push(value.id);\r\n                }\r\n                return false;\r\n            },\r\n            addFeature(point, viewProjection) {\r\n                if (this.projection == \"EPSG:4326\") {\r\n                    if (!validCoords(point.coords[0], point.coords[1])) {\r\n                        console.error(\"海量点位 经纬度不规范！\", point);\r\n                        return null;\r\n                    }\r\n                }\r\n                let geometry = new Point(point.coords);\r\n                geometry = geometry.transform(this.projection, viewProjection);\r\n                const feature = new Feature({\r\n                    id: point.id,\r\n                    geometry: geometry\r\n                })\r\n                feature.setId(point.id);\r\n                if (point.style) {\r\n                    feature.setStyle(this.getStyle(point.style));\r\n                }\r\n                feature.set(\"collectionInfo\", point);\r\n\r\n                this.storeObject[point.id] = point;\r\n                return feature;\r\n            },\r\n            updateFeature(point, viewProjection) {\r\n                if (this.projection == \"EPSG:4326\") {\r\n                    if (!validCoords(point.coords[0], point.coords[1])) {\r\n                        console.error(\"海量点位 经纬度不规范！\", point);\r\n                        return false;\r\n                    }\r\n                }\r\n                let f = this.source.getFeatureById(point.id);\r\n                if (f) {\r\n                    f.getGeometry().setCoordinates(\r\n                        coordinateTransform(point.coords, this.projection, viewProjection));\r\n                    if (point.style) {\r\n                        f.setStyle(this.getStyle(point.style));\r\n                    } else {\r\n                        f.setStyle(null);\r\n                    }\r\n                    this.storeObject[point.id] = point;\r\n                }\r\n            },\r\n            deleteFeature(id) {\r\n                let f = this.source.getFeatureById(id);\r\n                if (f) {\r\n                    this.source.removeFeature(f);\r\n                    delete this.storeObject[id];\r\n                }\r\n            },\r\n            update(map) {\r\n                const vm = this;\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n\r\n                //每个point必须有唯一的id\r\n                if (vm.isRepeatId(vm.points)) {\r\n                    console.error(\"海量点位必须有唯一的id值\");\r\n                    return false;\r\n                }\r\n\r\n                const features = new Array();\r\n                const idSet = new Array();\r\n                let extent = map.getView().calculateExtent(map.getSize());\r\n                vm.points.forEach(function(p) {\r\n                    let isIn = true;\r\n                    if (vm.onlyVisible) {\r\n                        //判断是否在可见视图内\r\n                        isIn = containsCoordinate(extent, coordinateTransform(p.coords,\r\n                            vm.projection, viewProjection));\r\n                    }\r\n                    if (isIn) {\r\n                        if (vm.storeObject[p.id]) {\r\n                            vm.updateFeature(p, viewProjection);\r\n                        } else {\r\n                            let feature = vm.addFeature(p, viewProjection);\r\n                            if (feature) {\r\n                                features.push(feature);\r\n                            }\r\n                        }\r\n                        idSet.push(p.id);\r\n                    }\r\n                })\r\n                vm.source.addFeatures(features);\r\n\r\n                for (let key in vm.storeObject) {\r\n                    if (idSet.indexOf(key) == -1) {\r\n                        vm.deleteFeature(key);\r\n                    }\r\n                }\r\n            },\r\n            showNameOverlay(map, feature, resultData) {\r\n                const vm = this;\r\n                //悬浮时，先移除其它的弹出框\r\n                removeOverlay(map, null, \"overLabel\");\r\n\r\n                let data = {\r\n                    lat: resultData.lat,\r\n                    lon: resultData.lon,\r\n                    projection: resultData.projection,\r\n                    label: {\r\n                        classNm: \"featureOver\",\r\n                        message: resultData.name,\r\n                        stopEvent: false\r\n                    }\r\n                }\r\n                let label = setLabelEvent(feature, map, data);\r\n                if (label) {\r\n                    label.set(\"overLabel\", \"true\"); //与其他的弹出框区分\r\n                }\r\n                return label;\r\n            },\r\n            listenerMove(data) {\r\n                const vm = this;\r\n                let point = data.feature.get(\"collectionInfo\");\r\n                let name = point.name,\r\n                    coords = point.coords;\r\n                if (name) {\r\n                    vm.moveLabel = vm.showNameOverlay(vm.map, data.feature, {\r\n                        lat: coords[1],\r\n                        lon: coords[0],\r\n                        projection: \"EPSG:4326\",\r\n                        name\r\n                    });\r\n                }\r\n\r\n                vm.$emit(\"pointermove\", point);\r\n            },\r\n            listenerMove_blank() {\r\n                const vm = this;\r\n                if (vm.moveLabel) { //默认name悬浮弹框\r\n                    vm.map.removeOverlay(vm.moveLabel);\r\n                }\r\n            },\r\n            listenerClick(data) {\r\n                const vm = this;\r\n                //获取选中图标的信息\r\n                let point = data.feature.get(\"collectionInfo\");\r\n                vm.selectPoint = deepClone(point);\r\n\r\n                vm.$emit(\"singleclick\", vm.selectPoint);\r\n            },\r\n            listenerClick_blank() {\r\n                const vm = this;\r\n                if (vm.blankClear) {\r\n                    vm.selectPoint = null; //选中图标为空\r\n                }\r\n            },\r\n            listenEvent(mapObject) {\r\n                const vm = this;\r\n                const mapId = mapObject.getTarget().id || \"default\";\r\n                Bus.$on(mapId + \".collection.pointermove\", vm.listenerMove);\r\n\r\n                //地图空白处悬浮\r\n                Bus.$on(mapId + \".pointermove.blank\", vm.listenerMove_blank);\r\n\r\n                Bus.$on(mapId + \".collection.singleclick\", vm.listenerClick);\r\n\r\n                //地图空白处 点击\r\n                Bus.$on(mapId + \".singleclick.blank\", vm.listenerClick_blank);\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                let source = vm.source;\r\n                source.getFeatures().forEach(function(f) {\r\n                    let s = f.getStyle();\r\n                    s = null;\r\n                    f = null;\r\n                })\r\n                source.clear();\r\n                source = null;\r\n                map.removeLayer(vm.layer);\r\n\r\n                const mapId = map.getTarget().id || \"default\";\r\n                Bus.$off(mapId + \".collection.pointermove\", vm.listenerMove);\r\n                Bus.$off(mapId + \".pointermove.blank\", vm.listenerMove_blank);\r\n                Bus.$off(mapId + \".collection.singleclick\", vm.listenerClick);\r\n                Bus.$off(mapId + \".singleclick.blank\", vm.listenerClick_blank);\r\n            })\r\n        }\r\n    }\r\n\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pointCollection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./pointCollection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./pointCollection.vue?vue&type=template&id=95fe7528&\"\nimport script from \"./pointCollection.vue?vue&type=script&lang=js&\"\nexport * from \"./pointCollection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-heat\",staticStyle:{\"display\":\"none\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-heat\" style=\"display: none;\"></div>\r\n</template>\r\n<script>\r\n    import {Heatmap} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import { createFeature } from '../../util/helpers';\r\n\r\n    export default {\r\n        name: 'ol-heat-map',\r\n        inject: ['getMap'],\r\n        props: {\r\n            layerConfig: {\r\n                type: Object,\r\n                default: {\r\n                    blur: 15,\r\n                    radius: 8\r\n                }\r\n            },\r\n            points: {\r\n                type: Array,\r\n                required: true,\r\n                default() {\r\n                    return []\r\n                }\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 2\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            }\r\n        },\r\n        watch: {\r\n            points: {\r\n                handler(nval) {\r\n                    const vm = this;\r\n                    vm.getMap().then(map => {\r\n                        vm.update(map);\r\n                    })\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                source: null,\r\n                layer: null\r\n            }\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.getMap().then((map) => {\r\n                    this.createLayer(map);\r\n                    this.update(map);\r\n                })\r\n            },\r\n            createLayer(map) {\r\n                this.source = new VectorSource();\r\n                this.layer = new Heatmap({\r\n                    source: this.source,\r\n                    ...this.layerConfig,\r\n                    zIndex: this.zIndex\r\n                });\r\n                this.layer.set(\"heatLayer\", true);\r\n                map.addLayer(this.layer);\r\n            },\r\n            update(map) {\r\n                const vm = this;\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                const count = this.points.length;\r\n                let features = new Array();\r\n\r\n                for (let i = 0; i < count; i++) {\r\n                    let point = this.points[i];\r\n                    if (point.lon && point.lat) {\r\n                        let feature = createFeature({\r\n                            projection: vm.projection,\r\n                            lat: parseFloat(point.lat),\r\n                            lon: parseFloat(point.lon),\r\n                            id: point.id\r\n                        }, viewProjection);\r\n                        if (point.weight) {\r\n                            feature.set('weight', point.weight);\r\n                        }\r\n                        features.push(feature);\r\n\r\n                        feature.set(\"featureInfo\", {\r\n                            type: \"heatFeature\",\r\n                            data: {}\r\n                        });\r\n\r\n                    }\r\n                }\r\n\r\n                this.source.clear(true);\r\n                this.source.addFeatures(features);\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                let source = vm.source;\r\n                source.getFeatures().forEach(function (f) {\r\n                    let s = f.getStyle();\r\n                    s = null;\r\n                    f = null;\r\n                })\r\n                source.clear();\r\n                source = null;\r\n                map.removeLayer(vm.layer);\r\n            })\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./heatMap.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./heatMap.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./heatMap.vue?vue&type=template&id=7b5661e8&\"\nimport script from \"./heatMap.vue?vue&type=script&lang=js&\"\nexport * from \"./heatMap.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vueol-nearby\"},[_c('div',{staticClass:\"nearby-control-point\"},[_c('a'),_c('label',{on:{\"click\":function($event){return _vm.editDis($event)}}},[(!_vm.edit)?_c('span',[_vm._v(_vm._s(_vm.initialRadius))]):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.initialRadius),expression:\"initialRadius\"}],staticClass:\"nearby-control-input\",attrs:{\"type\":\"number\"},domProps:{\"value\":(_vm.initialRadius)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.initialRadius=$event.target.value}}}),_vm._v(\"m\\n        \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"vueol-nearby\">\r\n        <div class=\"nearby-control-point\">\r\n            <a></a>\r\n            <label @click=\"editDis($event)\">\r\n                <span v-if=\"!edit\">{{initialRadius}}</span>\r\n                <input type=\"number\" class=\"nearby-control-input\" v-model=\"initialRadius\" v-else/>m\r\n            </label>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {Vector as VectorLayer} from 'ol/layer';\r\n    import {Vector as VectorSource} from 'ol/source';\r\n    import {\r\n        createOverlay,\r\n        createFeature,\r\n        getGeodesicDistance,\r\n        coordinateTransform,\r\n        createStyle, calcRadius\r\n    } from \"../../util/helpers\";\r\n\r\n    export default {\r\n        name: 'ol-nearby',\r\n        inject: ['getMap'],\r\n        props: {\r\n            center: {\r\n                type: Array,\r\n                required: true,\r\n                default() {\r\n                    return [120, 30]\r\n                }\r\n            },\r\n            radius: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            circleStyle: {\r\n                type: Object,\r\n                default() {\r\n                    return {\r\n                        fill: {\r\n                            color: [110, 162, 228, 0.3]\r\n                        },\r\n                        stroke: {\r\n                            width: 1,\r\n                            color: [110, 162, 228]\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            zIndex: {\r\n                type: Number,\r\n                default: 0\r\n            },\r\n            projection: {\r\n                type: String,\r\n                default: 'EPSG:4326'\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                initialRadius: this.radius,\r\n                layer: null,\r\n                source: null,\r\n                feature: null,\r\n                label: null,\r\n                edit: false,\r\n                isDrag: false,\r\n                mapCoord: []   //转换后的中心点坐标\r\n            };\r\n        },\r\n        watch: {\r\n            center: {\r\n                handler() {\r\n                    this.getMap().then((map) => {\r\n                        this.update(map);\r\n                    })\r\n                },\r\n                deep: true\r\n            },\r\n            radius() {\r\n                this.getMap().then((map) => {\r\n                    this.update(map);\r\n                })\r\n            },\r\n            circleStyle: {\r\n                handler() {\r\n                    let s;\r\n                    if (this.circleStyle instanceof Array) {\r\n                        let len = this.circleStyle.length;\r\n                        for (let i = 0; i < len; i++) {\r\n                            s[i] = createStyle(this.circleStyle[i]);\r\n                        }\r\n                    } else {\r\n                        s = createStyle(this.circleStyle);\r\n                    }\r\n\r\n                    this.feature.setStyle(s);\r\n                },\r\n                deep: true\r\n            }\r\n        },\r\n        mounted() {\r\n            this.init();\r\n        },\r\n        methods: {\r\n            init() {\r\n                this.getMap().then((map) => {\r\n                    if (this.projection != \"pixel\") {\r\n                        this.mapCoord = coordinateTransform(this.center, this.projection, map.getView().getProjection().getCode()); //圆心坐标\r\n                    } else {\r\n                        this.mapCoord = this.center;\r\n                    }\r\n                    this.createLayer(map);\r\n                    this.createCircle(map);\r\n                    this.createOverlay(map);\r\n                    this.listenEvent(map);   //监听拖拽事件\r\n                })\r\n            },\r\n            update(map) {\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                this.initialRadius = this.radius;\r\n                if (this.projection != \"pixel\") {\r\n                    this.mapCoord = coordinateTransform(this.center, this.projection, viewProjection); //圆心坐标\r\n                } else {\r\n                    this.mapCoord = this.center;\r\n                }\r\n\r\n                //circle\r\n                const geo = this.feature.getGeometry();\r\n                let r = calcRadius(viewProjection, this.initialRadius, this.mapCoord);\r\n                geo.setCenterAndRadius(this.mapCoord, r);\r\n\r\n                //弹框\r\n                this.label.setPosition([this.mapCoord[0] + r, this.mapCoord[1]]);\r\n\r\n                this.fitView(map);    //适应屏幕\r\n            },\r\n            createLayer(map) {\r\n                this.source = new VectorSource();\r\n                this.layer = new VectorLayer({\r\n                    source: this.source,\r\n                    zIndex: this.zIndex\r\n                });\r\n                this.layer.set(\"nearLayer\", true);\r\n                map.addLayer(this.layer);\r\n            },\r\n            /*calcRadius() {\r\n                if (this.initialRadius) {\r\n                    if (this.projection != \"pixel\") {\r\n                        //在相应坐标系下，一度代表的米数\r\n                        const perDegree = getGeodesicDistance(this.projection, this.center, [this.center[0] + 1, this.center[1]]);\r\n\r\n                        const radius = this.initialRadius / perDegree;   //度数\r\n                        return radius;\r\n                    }\r\n\r\n                    return this.initialRadius;\r\n                }\r\n            },*/\r\n            fitView(map) {\r\n                //适应屏幕\r\n                let extent = this.source.getExtent();\r\n                map.getView().fit(extent, {\r\n                    size: map.getSize(),\r\n                    padding: [15, 15, 15, 15],\r\n                    duration: 1000\r\n                });\r\n            },\r\n            createCircle(map) {\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                let data = {\r\n                    type: \"Circle\",\r\n                    coords: this.mapCoord,\r\n                    radius: calcRadius(viewProjection, this.initialRadius, this.mapCoord),\r\n                    projection: viewProjection,\r\n                    style: this.circleStyle\r\n                };\r\n                this.feature = createFeature(data, viewProjection);\r\n                this.source.addFeature(this.feature);\r\n\r\n                this.fitView(map);    //适应屏幕\r\n            },\r\n            createOverlay(map) {\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n                let r = calcRadius(viewProjection, this.initialRadius, this.mapCoord);\r\n                const pos = [this.mapCoord[0] + r, this.mapCoord[1]];\r\n                this.label = createOverlay(this.$el, pos);\r\n                map.addOverlay(this.label);\r\n            },\r\n            windowToCanvas(canvas, x, y) {\r\n                const bbox = canvas.getBoundingClientRect();\r\n                return [x - bbox.left - (bbox.width - canvas.clientWidth) / 2, y - bbox.top - (bbox.height - canvas.clientHeight) / 2];\r\n            },\r\n            listenEvent(map) {\r\n                const vm = this;\r\n                const viewEle = map.getViewport();\r\n                const ele = document.getElementsByClassName(\"nearby-control-point\")[0].children[0];\r\n                ele.addEventListener(\"mousedown\", e => {\r\n                    const preRadius = vm.feature.getGeometry().getRadius();\r\n                    const prePos = vm.label.getPosition();\r\n                    const downPos = map.getCoordinateFromPixel(vm.windowToCanvas(viewEle, e.clientX, e.clientY));\r\n\r\n                    function calcDynamic(e) {\r\n                        vm.isDrag = true;\r\n                        const coordinate = map.getCoordinateFromPixel(vm.windowToCanvas(viewEle, e.clientX, e.clientY));\r\n                        vm.label.setPosition([prePos[0] + coordinate[0] - downPos[0], vm.mapCoord[1]]);\r\n\r\n                        const nowRadius = Math.abs(coordinate[0] - downPos[0] + preRadius);\r\n                        vm.feature.getGeometry().setRadius(nowRadius);\r\n\r\n                        const viewPro = map.getView().getProjection().getCode();\r\n                        const radiusDis = getGeodesicDistance(viewPro, vm.mapCoord, [vm.mapCoord[0] + nowRadius, vm.mapCoord[1]]);\r\n                        vm.initialRadius = parseInt(radiusDis);\r\n                        return false;\r\n                    }\r\n\r\n                    viewEle.addEventListener('pointermove', calcDynamic);\r\n\r\n                    function removeCalc() {\r\n                        vm.fitView(map);   //适应屏幕\r\n                        vm.label.setPosition([vm.mapCoord[0] + vm.feature.getGeometry().getRadius(), vm.mapCoord[1]]);\r\n\r\n                        vm.$emit(\"refresh\", {\r\n                            radius: parseInt(vm.initialRadius)\r\n                        });   //向上传递消息\r\n                        vm.isDrag = false;\r\n\r\n                        viewEle.removeEventListener('pointermove', calcDynamic);\r\n                        viewEle.removeEventListener('pointerup', removeCalc);\r\n                        return false;\r\n                    }\r\n\r\n                    viewEle.addEventListener('pointerup', removeCalc);\r\n                })\r\n            },\r\n            editDis(e) {\r\n                if (this.isDrag) {\r\n                    return;\r\n                }\r\n                this.edit = true;\r\n\r\n                this.$nextTick(() => {\r\n                    const input = document.getElementsByClassName(\"nearby-control-input\")[0];\r\n                    input.focus();\r\n                })\r\n\r\n                e.stopPropagation();\r\n\r\n                this.getMap().then((map) => {\r\n                    this.listenBlank(map);   //点击空白处，按照 input 的 radius 刷新 circle\r\n                })\r\n            },\r\n            listenBlank(map) {\r\n                //点击空白处，按照 input 的 radius 刷新 circle\r\n                const vm = this;\r\n                const viewEle = map.getViewport();\r\n                const viewProjection = map.getView().getProjection().getCode();\r\n\r\n                function calc(e) {\r\n                    if (vm.edit && e.target.tagName.toLowerCase() != \"input\") {\r\n                        vm.edit = false;\r\n                        const perDegree = getGeodesicDistance(viewProjection, vm.mapCoord, [vm.mapCoord[0] + 1, vm.mapCoord[1]]);\r\n                        let radius = vm.initialRadius / perDegree;\r\n                        vm.feature.getGeometry().setRadius(radius);\r\n                        vm.label.setPosition([vm.mapCoord[0] + radius, vm.mapCoord[1]]);\r\n\r\n                        vm.fitView(map); //适应屏幕\r\n\r\n                        viewEle.removeEventListener(\"pointerdown\", calc);\r\n                        vm.$emit(\"refresh\", {\r\n                            radius: parseInt(vm.initialRadius)\r\n                        });   //向上传递消息\r\n                    }\r\n                }\r\n\r\n                viewEle.addEventListener(\"pointerdown\", calc);\r\n            }\r\n        },\r\n        beforeDestroy() {\r\n            const vm = this;\r\n            vm.getMap().then((map) => {\r\n                let s = vm.feature.getStyle();\r\n                s = null;\r\n                vm.feature.setStyle(null);\r\n                vm.feature = null;\r\n                vm.source.clear();\r\n                map.removeLayer(vm.layer);\r\n\r\n                map.removeOverlay(vm.label);\r\n            })\r\n        }\r\n    }\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./nearby.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./nearby.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./nearby.vue?vue&type=template&id=feabc7e4&\"\nimport script from \"./nearby.vue?vue&type=script&lang=js&\"\nexport * from \"./nearby.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Path from './path.vue'\r\nimport MulPath from './multiPath.vue'\r\nimport PointCollection from './pointCollection.vue'\r\nimport HeatMap from './heatMap.vue'\r\nimport NearBy from './nearby.vue'\r\n\r\nfunction plugin(Vue) {\r\n    if (plugin.installed) {\r\n        return\r\n    }\r\n    plugin.installed = true;\r\n\r\n    Vue.component(Path.name, Path);\r\n    Vue.component(MulPath.name, MulPath);\r\n    Vue.component(PointCollection.name, PointCollection);\r\n    Vue.component(HeatMap.name, HeatMap);\r\n    Vue.component(NearBy.name, NearBy);\r\n}\r\n\r\nexport default plugin;\r\n\r\nexport {\r\n    Path,\r\n    MulPath,\r\n    PointCollection,\r\n    HeatMap,\r\n    NearBy,\r\n    plugin as install\r\n}\r\n","import * as Map from './component/map'\r\nimport * as BasicLayer from './component/basicLayer'\r\nimport * as Marker from './component/marker'\r\nimport * as Overlay from './component/overlay'\r\nimport * as Cluster from './component/cluster'\r\nimport * as Interaction from './component/interaction'\r\nimport * as Flash from './component/flash'\r\nimport * as Vector from './component/vector'\r\nimport * as helpers from './util/helpers'\r\nimport olData from './util/olData'\r\nimport 'ol/ol.css'\r\nimport './sass/main.scss'\r\n\r\nfunction plugin(Vue) {\r\n    if (plugin.installed) {\r\n        return;\r\n    }\r\n    plugin.installed = true;\r\n\r\n    Vue.use(Map);\r\n    Vue.use(BasicLayer);\r\n    Vue.use(Marker);\r\n    Vue.use(Overlay);\r\n    Vue.use(Cluster);\r\n    Vue.use(Interaction);\r\n    Vue.use(Flash);\r\n    Vue.use(Vector);\r\n    Vue.prototype.$mapUtils = helpers;\r\n}\r\n\r\nexport default plugin;\r\n\r\nexport {\r\n    plugin as install,\r\n    // components\r\n    Map,\r\n    BasicLayer,\r\n    Marker,\r\n    Overlay,\r\n    Cluster,\r\n    Interaction,\r\n    Flash,\r\n    Vector,\r\n    helpers,\r\n    olData\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(_vm.$props.tagname,{tag:\"section\",staticClass:\"ps-container\",on:{\"~mouseover\":function($event){return _vm.update($event)},\"ps-scroll-y\":_vm.scrollHanle,\"ps-scroll-x\":_vm.scrollHanle,\"ps-scroll-up\":_vm.scrollHanle,\"ps-scroll-down\":_vm.scrollHanle,\"ps-scroll-left\":_vm.scrollHanle,\"ps-scroll-right\":_vm.scrollHanle,\"ps-y-reach-start\":_vm.scrollHanle,\"ps-y-reach-end\":_vm.scrollHanle,\"ps-x-reach-start\":_vm.scrollHanle,\"ps-x-reach-end\":_vm.scrollHanle}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"ps-container\"\r\n    :is=\"$props.tagname\"\r\n    @mouseover.once=\"update\"\r\n    @ps-scroll-y=\"scrollHanle\"\r\n    @ps-scroll-x=\"scrollHanle\"\r\n    @ps-scroll-up=\"scrollHanle\"\r\n    @ps-scroll-down=\"scrollHanle\"\r\n    @ps-scroll-left=\"scrollHanle\"\r\n    @ps-scroll-right=\"scrollHanle\"\r\n    @ps-y-reach-start=\"scrollHanle\"\r\n    @ps-y-reach-end=\"scrollHanle\"\r\n    @ps-x-reach-start=\"scrollHanle\"\r\n    @ps-x-reach-end=\"scrollHanle\">\r\n    <slot></slot>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\n  import scroll from 'perfect-scrollbar';\r\n  import 'perfect-scrollbar/css/perfect-scrollbar.css';\r\nvar scrollBar = null;\r\n\r\nexport default {\r\n  name: 'vue-perfect-scrollbar',\r\n  props: {\r\n    settings: {\r\n      default: undefined\r\n    },\r\n    swicher: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    tagname: {\r\n      type: String,\r\n      default: \"section\"\r\n    },\r\n    isBodyScroll:{\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  methods: {\r\n    scrollHanle(evt) {\r\n      this.$emit(evt.type, evt)\r\n    },\r\n\r\n    update() {\r\n      scrollBar.update(this.$el)\r\n    },\r\n\r\n    __init() {\r\n      if (this.swicher) {\r\n        if (!this._ps_inited) {\r\n          this._ps_inited = true\r\n          scrollBar = new scroll(this.$el, this.settings)\r\n        } else {\r\n          this.update(this.$el)\r\n        }\r\n      }\r\n    },\r\n\r\n    __uninit() {\r\n      scrollBar.destroy(this.$el)\r\n      this._ps_inited = false\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    swicher(val) {\r\n      if (val && !this._ps_inited) {\r\n        this.__init()\r\n      }\r\n      if (!val && this._ps_inited) {\r\n        this.__uninit()\r\n      }\r\n    },\r\n\r\n    $route() {\r\n      this.update();\r\n      if(this.isBodyScroll){\r\n        this.$el.scrollTop = 0;\r\n      }\r\n    },\r\n\r\n  },\r\n\r\n  mounted() {\r\n    // debugger\r\n    this.__init()\r\n\r\n  },\r\n\r\n  updated() {\r\n    this.$nextTick(this.update)\r\n  },\r\n\r\n  activated() {\r\n    this.__init()\r\n  },\r\n\r\n  deactivated() {\r\n    this.__uninit()\r\n  },\r\n\r\n  beforeDestroy() {\r\n    // this.__uninit()\r\n  },\r\n}\r\n</script>\r\n<style>\r\n\r\n.ps-container {\r\n  position: relative;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scroll.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./scroll.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./scroll.vue?vue&type=template&id=01d77850&\"\nimport script from \"./scroll.vue?vue&type=script&lang=js&\"\nexport * from \"./scroll.vue?vue&type=script&lang=js&\"\nimport style0 from \"./scroll.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import VuePerfectScrollbar from './scroll'\r\n\r\n// 如果vue是全局变量,使用自动全局安装。\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n  // eslint-disable-next-line\r\n  Vue.component('vue-perfect-scrollbar', VuePerfectScrollbar)\r\n}\r\n\r\nexport default {\r\n    install (Vue) {\r\n        Vue.component('vue-perfect-scrollbar', VuePerfectScrollbar)\r\n    }\r\n}\r\n\r\nexport {\r\n    VuePerfectScrollbar\r\n}\r\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport store from './stores'\r\nimport { LoadingBar, Modal } from 'iview';\r\n\r\n\r\n\r\n\r\nimport VueOl from '@datashow/vue-ol';\r\nVue.use(VueOl);\r\n\r\n\r\nimport plugin from \"./utils/suc-plugin\";\r\nVue.use(plugin);\r\n//element组件\r\nimport ElementUI from 'element-ui';\r\nimport 'element-ui/lib/theme-chalk/index.css';\r\nVue.use(ElementUI);\r\n\r\n\r\nimport 'iview/dist/styles/iview.css';\r\nimport './styles/index.scss';\r\nimport './styles/main.scss';\r\n\r\n\r\n\r\n\r\n//滚动条优化插件\r\n// @ts-ignore\r\nimport VuePerfectScrollbar from './plugins/perfect-scrollbar'\r\nVue.use(VuePerfectScrollbar);\r\n\r\nVue.config.productionTip = false;\r\n\r\nVue.prototype.$Modal=Modal;\r\n\r\nrouter.beforeEach((to:any, from:any, next:any) => {\r\n    LoadingBar.start();\r\n    next();\r\n});\r\n\r\nrouter.afterEach(() => {\r\n    LoadingBar.finish();\r\n});\r\n\r\n\r\nnew Vue({\r\n    router,\r\n    store,\r\n    render: h => h(App)\r\n}).$mount('#app')\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plot.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plot.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ECharts.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ECharts.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editOverlay.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./editOverlay.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}